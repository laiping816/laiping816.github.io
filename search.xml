<?xml version="1.0" encoding="utf-8"?>
<search> 
  
    
    <entry>
      <title>JVMå­¦ä¹ ç¬”è®°</title>
      <link href="/2019/07/26/JVM/JVM%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
      <url>/2019/07/26/JVM/JVM%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><p><blockquote class="blockquote-center"><p>Javaå†…å­˜ç»“æ„ã€åƒåœ¾å›æ”¶ã€ç±»åŠ è½½æœºåˆ¶ã€Javaå†…å­˜æ¨¡å‹ã€çº¿ç¨‹å®‰å…¨åŠé”ä¼˜åŒ–</p></blockquote><br><img src="/2019/07/26/JVM/JVMå­¦ä¹ ç¬”è®°/ç¼©ç•¥.png" alt=""></p><a id="more"></a><p>è°ƒä¼˜ç»éªŒå’Œæ€»ç»“è¿˜éœ€åŠ å¼ºâ—ï¸</p><p><strong>è¯¦ç»†ç»†èŠ‚å¤§å›¾åœ°å€ğŸ˜œï¼š</strong></p><p><a href="https://image-link.nos-eastchina1.126.net/%E8%AF%A6%E7%BB%86%E5%9B%BE.svg" target="_blank" rel="noopener">https://image-link.nos-eastchina1.126.net/%E8%AF%A6%E7%BB%86%E5%9B%BE.svg</a></p>]]></content>
      
      
      <categories>
          
          <category> JVM </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JVM </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Spring</title>
      <link href="/2019/06/16/%E6%A1%86%E6%9E%B6/Spring/"/>
      <url>/2019/06/16/%E6%A1%86%E6%9E%B6/Spring/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote class="blockquote-center"><p>IOCã€AOPã€äº‹åŠ¡ç®¡ç†ã€æ³¨è§£å¼€å‘ã€åŸç†ï¼ˆå¾…åšï¼‰</p></blockquote><p><img src="https://image-link.nos-eastchina1.126.net/spring"></p><a id="more"></a><h1 id="Spring"><a href="#Spring" class="headerlink" title="Spring"></a>Spring</h1><h2 id="æ¦‚è¿°"><a href="#æ¦‚è¿°" class="headerlink" title="æ¦‚è¿°"></a>æ¦‚è¿°</h2><p>Springæ˜¯ä¸€ä¸ªåˆ†å±‚çš„JavaSE/EE full-stack(ä¸€ç«™å¼) è½»é‡çº§å¼€æºæ¡†æ¶ã€‚</p><ul><li>è½»é‡çº§ï¼šä¸EJBå¯¹æ¯”ï¼Œä¾èµ–èµ„æºå°‘ï¼Œé”€æ¯çš„èµ„æºå°‘</li><li>åˆ†å±‚ï¼š<ul><li>webï¼šspring-mvc</li><li>serviceï¼šspring</li><li>daoï¼šmybatisã€jdbcTemplate</li></ul></li></ul><h3 id="æ ¸å¿ƒ"><a href="#æ ¸å¿ƒ" class="headerlink" title="æ ¸å¿ƒ"></a>æ ¸å¿ƒ</h3><ul><li>IOCï¼ˆæ§åˆ¶åè½¬ï¼‰</li><li>AOPï¼ˆé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼‰</li></ul><h3 id="ä¼˜ç‚¹"><a href="#ä¼˜ç‚¹" class="headerlink" title="ä¼˜ç‚¹"></a>ä¼˜ç‚¹</h3><ul><li><p>æ–¹ä¾¿è§£è€¦ï¼Œç®€åŒ–å¼€å‘ï¼ˆé«˜å†…èšä½è€¦åˆï¼‰</p><ul><li>Spring å°±æ˜¯ä¸€ä¸ªå¤§å·¥å‚ï¼Œå¯ä»¥å°†æ‰€æœ‰å¯¹è±¡åˆ›å»ºå’Œä¾èµ–å…³ç³»ç»´æŠ¤ï¼Œäº¤ç»™å…¶ç®¡ç†</li><li>Springå·¥å‚ç”¨äºç”Ÿæˆbean</li></ul></li><li><p>AOPç¼–ç¨‹çš„æ”¯æŒ</p><ul><li>æä¾›é¢å‘åˆ‡é¢ç¼–ç¨‹ï¼Œå¯ä»¥æ–¹ä¾¿çš„å®ç°å¯¹ç¨‹åºè¿›è¡Œæƒé™æ‹¦æˆªã€è¿è¡Œç›‘æ§ç­‰åŠŸèƒ½</li></ul></li><li><p>å£°æ˜å¼äº‹åŠ¡çš„æ”¯æŒ</p><ul><li>åªéœ€è¦é€šè¿‡é…ç½®å°±å¯ä»¥å®Œæˆå¯¹äº‹åŠ¡çš„ç®¡ç†ï¼Œè€Œæ— éœ€æ‰‹åŠ¨ç¼–ç¨‹</li></ul></li><li><p>æ–¹ä¾¿é›†æˆå„ç§æ¸¸æˆæ¡†æ¶</p><ul><li>Springä¸æ’æ–¥å„ç§ä¼˜ç§€çš„å¼€æºæ¡†æ¶ï¼Œå…¶å†…éƒ¨æä¾›äº†å¯¹å„ç§ä¼˜ç§€æ¡†æ¶ï¼ˆå¦‚ï¼šStrutsã€Hibernateã€MyBatisã€Quartzç­‰ï¼‰çš„ç›´æ¥æ”¯æŒ</li></ul></li><li><p>é™ä½JavaEE APIçš„ä½¿ç”¨éš¾åº¦</p><ul><li>Spring å¯¹JavaEEå¼€å‘ä¸­éå¸¸éš¾ç”¨çš„ä¸€äº›APIï¼ˆJDBCã€JavaMailã€è¿œç¨‹è°ƒç”¨ç­‰ï¼‰ï¼Œéƒ½æä¾›äº†å°è£…ï¼Œä½¿è¿™äº›APIåº”ç”¨éš¾åº¦å¤§å¤§é™ä½</li></ul></li></ul><h2 id="IOC-DI"><a href="#IOC-DI" class="headerlink" title="IOC(DI)"></a>IOC(DI)</h2><p>Dependency Injection ,ä¾èµ–æ³¨å…¥</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> A a;   <span class="comment">//Bç±»ä¾èµ–Aç±»</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//ä¾èµ–ï¼šBä¾èµ–A</span></span><br><span class="line"><span class="comment">//æ³¨å…¥ï¼šé€šè¿‡setteræ–¹æ³•è¿›è¡Œå¦ä¸€ä¸ªå¯¹è±¡å®ä¾‹è®¾ç½®ã€‚</span></span><br></pre></td></tr></table></figure><p>æ¨¡æ‹Ÿspringæ‰§è¡ŒDIè¿‡ç¨‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.åˆ›å»ºserviceå®ä¾‹ï¼š</span></span><br><span class="line">BookService bookService = <span class="keyword">new</span> BookServiceImpl()<span class="comment">//IoC  &lt;bean&gt;</span></span><br><span class="line"><span class="comment">//2.åˆ›å»ºdaoå®ä¾‹ï¼š</span></span><br><span class="line">BookDao bookDao = <span class="keyword">new</span> BookDaoImpl()<span class="comment">//IoC</span></span><br><span class="line"><span class="comment">//3.å°†daoè®¾ç½®ç»™serviceï¼š</span></span><br><span class="line">bookService.setBookDao(bookDao);<span class="comment">//DI   &lt;property&gt;</span></span><br></pre></td></tr></table></figure><p>åœ¨springä¸­å®é™…å¦‚ä½•é…ç½®</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- </span></span><br><span class="line"><span class="comment">&lt;property&gt; ç”¨äºè¿›è¡Œå±æ€§æ³¨å…¥</span></span><br><span class="line"><span class="comment">       nameï¼š beançš„å±æ€§åï¼Œé€šè¿‡setteræ–¹æ³•è·å¾—</span></span><br><span class="line"><span class="comment">        setBookDao ##&gt; BookDao  ##&gt; bookDao</span></span><br><span class="line"><span class="comment">       ref ï¼šå¦ä¸€ä¸ªbeançš„idå€¼çš„å¼•ç”¨</span></span><br><span class="line"><span class="comment"> --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- åˆ›å»ºservice --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"bookServiceId"</span> <span class="attr">class</span>=<span class="string">"com.itheima.b_di.BookServiceImpl"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"bookDao"</span> <span class="attr">ref</span>=<span class="string">"bookDaoId"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- åˆ›å»ºdaoå®ä¾‹ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"bookDaoId"</span> <span class="attr">class</span>=<span class="string">"com.itheima.b_di.BookDaoImpl"</span>&gt;</span><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="XML-äº†è§£"><a href="#XML-äº†è§£" class="headerlink" title="XML(äº†è§£)"></a>XML(äº†è§£)</h3><h4 id="å®ä¾‹åŒ–ï¼ˆæ— å‚ï¼‰"><a href="#å®ä¾‹åŒ–ï¼ˆæ— å‚ï¼‰" class="headerlink" title="å®ä¾‹åŒ–ï¼ˆæ— å‚ï¼‰"></a>å®ä¾‹åŒ–ï¼ˆæ— å‚ï¼‰</h4><ul><li><p>é»˜è®¤æ„é€ </p></li><li><p>é™æ€å·¥å‚</p><ul><li>å¸¸ç”¨ä¸springæ•´åˆå…¶ä»–æ¡†æ¶ï¼ˆå·¥å…·ï¼‰</li><li>ç”¨äºç”Ÿæˆå®ä¾‹å¯¹è±¡ï¼Œæ‰€æœ‰çš„æ–¹æ³•å¿…é¡»æ˜¯static</li></ul><p><code>&lt;bean id=&quot;&quot;  class=&quot;å·¥å‚å…¨é™å®šç±»å&quot; factory-method=&quot;é™æ€æ–¹æ³•&quot;&gt;</code></p></li><li><p>å®ä¾‹å·¥å‚</p><ul><li>å¿…é¡»å…ˆæœ‰å·¥å‚å®ä¾‹å¯¹è±¡ï¼Œé€šè¿‡å®ä¾‹å¯¹è±¡åˆ›å»ºå¯¹è±¡ã€‚æä¾›æ‰€æœ‰çš„æ–¹æ³•éƒ½æ˜¯â€œéé™æ€â€çš„ã€‚</li></ul></li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"myBeanFactoryId"</span> </span></span><br><span class="line"><span class="tag">      <span class="attr">class</span>=<span class="string">"com.lp.maven.MyBeanFactory"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- è·å¾—userservice </span></span><br><span class="line"><span class="comment">* factory-bean ç¡®å®šå·¥å‚å®ä¾‹</span></span><br><span class="line"><span class="comment">* factory-method ç¡®å®šæ™®é€šæ–¹æ³•</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"userServiceId"</span> </span></span><br><span class="line"><span class="tag">      <span class="attr">factory-bean</span>=<span class="string">"myBeanFactoryId"</span> </span></span><br><span class="line"><span class="tag">      <span class="attr">factory-method</span>=<span class="string">"createService"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure><h4 id="Beanä½œç”¨åŸŸ"><a href="#Beanä½œç”¨åŸŸ" class="headerlink" title="Beanä½œç”¨åŸŸ"></a>Beanä½œç”¨åŸŸ</h4><div class="table-container"><table><thead><tr><th>ç±»åˆ«</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td><strong>singleton</strong></td><td>åœ¨Spring IoCå®¹å™¨ä¸­ä»…å­˜åœ¨ä¸€ä¸ªBeanå®ä¾‹ï¼ŒBeanä»¥å•ä¾‹æ–¹å¼å­˜åœ¨ï¼Œé»˜è®¤å€¼</td></tr><tr><td><strong>prototype</strong></td><td>æ¯æ¬¡ä»å®¹å™¨ä¸­è°ƒç”¨Beanæ—¶ï¼Œéƒ½è¿”å›ä¸€ä¸ªæ–°çš„å®ä¾‹ï¼Œå³æ¯æ¬¡è°ƒç”¨getBean()æ—¶ ï¼Œç›¸å½“äºæ‰§è¡Œnew XxxBean()</td></tr><tr><td>request</td><td>æ¯æ¬¡HTTPè¯·æ±‚éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„Beanï¼Œè¯¥ä½œç”¨åŸŸä»…é€‚ç”¨äºWebApplicationContextç¯å¢ƒ</td></tr><tr><td>session</td><td>åŒä¸€ä¸ªHTTP   Session å…±äº«ä¸€ä¸ªBeanï¼Œä¸åŒSessionä½¿ç”¨ä¸åŒBeanï¼Œä»…é€‚ç”¨äºWebApplicationContext ç¯å¢ƒ</td></tr><tr><td>globalSession</td><td>ä¸€èˆ¬ç”¨äºPortletåº”ç”¨ç¯å¢ƒï¼Œè¯¥ä½œç”¨åŸŸä»…é€‚ç”¨äºWebApplicationContext   ç¯å¢ƒ</td></tr></tbody></table></div><p><code>&lt;bean id=&quot;&quot; class=&quot;&quot;  scope=&quot;&quot;&gt;</code></p><h4 id="å±æ€§DIï¼ˆæœ‰å‚ï¼‰"><a href="#å±æ€§DIï¼ˆæœ‰å‚ï¼‰" class="headerlink" title="å±æ€§DIï¼ˆæœ‰å‚ï¼‰"></a>å±æ€§DIï¼ˆæœ‰å‚ï¼‰</h4><ul><li><p>æ‰‹åŠ¨è£…é…ï¼ˆå¸¸ç”¨ï¼‰</p><ul><li><p>åŸºäºxml</p><ul><li><p>æ„é€ æ–¹æ³•ï¼ˆå®ä¾‹beanéœ€è¦æœ‰æ„é€ æ–¹æ³•ï¼‰</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">name</span>=<span class="string">"å‚æ•°åç§°"</span>  ï¼ˆä¸€èˆ¬ä¸ç”¨ï¼‰</span></span><br><span class="line"><span class="tag">                 <span class="attr">value</span>=<span class="string">"è®¾ç½®æ™®é€šæ•°æ®"</span></span></span><br><span class="line"><span class="tag">                 <span class="attr">ref</span>=<span class="string">"å¼•ç”¨æ•°æ®ï¼Œä¸€èˆ¬æ˜¯å¦ä¸€ä¸ªbean idå€¼"</span></span></span><br><span class="line"><span class="tag">                 <span class="attr">index</span>=<span class="string">"å‚æ•°çš„ç´¢å¼•å·ï¼Œä»0å¼€å§‹"</span></span></span><br><span class="line"><span class="tag">(å¦‚æœåªæœ‰ç´¢å¼•ï¼ŒåŒ¹é…åˆ°äº†å¤šä¸ªæ„é€ æ–¹æ³•æ—¶ï¼Œé»˜è®¤ä½¿ç”¨ç¬¬ä¸€ä¸ªã€‚é™¤éå®š<span class="attr">type</span>)</span></span><br><span class="line"><span class="tag">                 <span class="attr">type</span>=<span class="string">"å‚æ•°ç±»å‹"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>setteræ–¹æ³•</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- setteræ–¹æ³•æ³¨å…¥ </span></span><br><span class="line"><span class="comment">  * æ™®é€šæ•°æ® </span></span><br><span class="line"><span class="comment">   &lt;property name="" value="å€¼"&gt;</span></span><br><span class="line"><span class="comment">   ç­‰æ•ˆ</span></span><br><span class="line"><span class="comment">   &lt;property name=""&gt;</span></span><br><span class="line"><span class="comment">    &lt;value&gt;å€¼</span></span><br><span class="line"><span class="comment">  * å¼•ç”¨æ•°æ®</span></span><br><span class="line"><span class="comment">   &lt;property name="" ref="å¦ä¸€ä¸ªbean"&gt;</span></span><br><span class="line"><span class="comment">   ç­‰æ•ˆ</span></span><br><span class="line"><span class="comment">   &lt;property name=""&gt;</span></span><br><span class="line"><span class="comment">    &lt;ref bean="å¦ä¸€ä¸ªbean"/&gt;</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br></pre></td></tr></table></figure></li><li><p>é›†åˆæ³¨å…¥</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- </span></span><br><span class="line"><span class="comment">  é›†åˆçš„æ³¨å…¥éƒ½æ˜¯ç»™&lt;property&gt;æ·»åŠ å­æ ‡ç­¾</span></span><br><span class="line"><span class="comment">   æ•°ç»„ï¼š&lt;array&gt;</span></span><br><span class="line"><span class="comment">   Listï¼š&lt;list&gt;</span></span><br><span class="line"><span class="comment">   Setï¼š&lt;set&gt;</span></span><br><span class="line"><span class="comment">   Mapï¼š&lt;map&gt; ï¼Œmapå­˜æ”¾k/v é”®å€¼å¯¹ï¼Œä½¿ç”¨&lt;entry&gt;æè¿°</span></span><br><span class="line"><span class="comment">   Propertiesï¼š&lt;props&gt;  &lt;prop key=""&gt;&lt;/prop&gt;  ã€ã€‘</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">  æ™®é€šæ•°æ®ï¼š&lt;value&gt;</span></span><br><span class="line"><span class="comment">  å¼•ç”¨æ•°æ®ï¼š&lt;ref&gt;</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"collDataId"</span> <span class="attr">class</span>=<span class="string">"com.lp.maven.CollData"</span> &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"arrayData"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">array</span>&gt;</span> [<span class="tag">&lt;<span class="name">list</span>&gt;</span> <span class="tag">&lt;<span class="name">set</span>&gt;</span>]</span><br><span class="line">            <span class="tag">&lt;<span class="name">value</span>&gt;</span>1<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">value</span>&gt;</span>2<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">array</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"mapData"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">map</span>&gt;</span> [ <span class="tag">&lt;<span class="name">props</span>&gt;</span>æ­é…<span class="tag">&lt;<span class="name">prop</span>&gt;</span> ]</span><br><span class="line">            <span class="tag">&lt;<span class="name">entry</span> <span class="attr">key</span>=<span class="string">"jack"</span> <span class="attr">value</span>=<span class="string">"æ°å…‹"</span>&gt;</span><span class="tag">&lt;/<span class="name">entry</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">entry</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">key</span>&gt;</span><span class="tag">&lt;<span class="name">value</span>&gt;</span>rose<span class="tag">&lt;/<span class="name">value</span>&gt;</span><span class="tag">&lt;/<span class="name">key</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>è‚‰ä¸<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">entry</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">map</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul></li></ul></li></ul><h3 id="æ³¨è§£-é‡ç‚¹"><a href="#æ³¨è§£-é‡ç‚¹" class="headerlink" title="æ³¨è§£(é‡ç‚¹)"></a>æ³¨è§£(é‡ç‚¹)</h3><h4 id="AnnotationConfigApplicationContext"><a href="#AnnotationConfigApplicationContext" class="headerlink" title="AnnotationConfigApplicationContext"></a>AnnotationConfigApplicationContext</h4><p>æ›¿ä»£xmlæ–‡ä»¶</p><ul><li>åˆ›å»ºé…ç½®ç±»MainConfig.classä½œä¸ºå‚æ•°æ„é€ applicationContextå¯¹è±¡</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span> <span class="comment">//æ ‡å¿—ä½é…ç½®ç±»æ›¿ä»£xml</span></span><br><span class="line"><span class="meta">@ComponentScan</span>(value = <span class="string">"com.test"</span>) <span class="comment">//æ‰«æåŒ…</span></span><br><span class="line"><span class="meta">@Import</span>(&#123;å¤šä¸ªç¬¬ä¸‰æ–¹ç±».class&#125;) <span class="comment">//idé»˜è®¤å…¨ç±»å</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MainConfig</span> </span>&#123;</span><br><span class="line">   <span class="meta">@Lazy</span> <span class="comment">//æ‡’åŠ è½½ï¼Œé’ˆå¯¹å•ä¾‹</span></span><br><span class="line">   <span class="meta">@Scope</span>(<span class="string">"singleton"</span>)</span><br><span class="line">   <span class="comment">//prototype:å¤šå®ä¾‹</span></span><br><span class="line">   <span class="comment">//singleton:å•å®ä¾‹é»˜è®¤ï¼šiocå®¹å™¨å¯åŠ¨åˆ›å»ºè°ƒç”¨æ„é€ </span></span><br><span class="line">   <span class="comment">//request:åŒä¸€æ¬¡è¯·æ±‚åˆ›å»ºä¸€ä¸ªå®ä¾‹</span></span><br><span class="line">   <span class="comment">//session:åŒä¸€ä¸ªä¼šè¯åˆ›å»ºä¸€ä¸ªå®ä¾‹</span></span><br><span class="line">   <span class="meta">@Bean</span>(<span class="string">"person01"</span>)<span class="comment">//idæ ‡è¯†å–åˆ«å</span></span><br><span class="line">   <span class="meta">@Conditional</span>(&#123;LinuxCondition.class&#125;)<span class="comment">//æ¡ä»¶åˆ¤æ–­ï¼Œæ»¡è¶³æ³¨å†Œbean</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> Person <span class="title">person</span><span class="params">()</span> </span>&#123;</span><br><span class="line">     <span class="keyword">return</span> <span class="keyword">new</span> Person(<span class="string">"lp"</span>, <span class="number">26</span>);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="ç»„ä»¶-bean-æ³¨å†Œ"><a href="#ç»„ä»¶-bean-æ³¨å†Œ" class="headerlink" title="ç»„ä»¶(bean)æ³¨å†Œ"></a>ç»„ä»¶(bean)æ³¨å†Œ</h4><ul><li>åŒ…æ‰«æ+ç»„ä»¶æ ‡æ³¨æ³¨è§£<ul><li>(<code>@controllerã€Serviceã€Repositoryã€Component</code>è‡ªå·±å†™çš„ç±»</li></ul></li><li>@Bean ç¬¬ä¸‰æ–¹åŒ…é‡Œé¢çš„ç»„ä»¶</li><li>@Import å¿«é€Ÿç»™å®¹å™¨ä¸­å¯¼å…¥ä¸€ä¸ªç»„ä»¶<ul><li>â‘ ç›´æ¥åœ¨é…ç½®ç±»é¡¶éƒ¨å¯¼å…¥</li><li>â‘¡<code>ImportSelector</code>ï¼šè¿”å›éœ€è¦å¯¼å…¥ç»„ä»¶çš„å…¨ç±»åæ•°ç»„            </li><li>â‘¢<code>ImportBeanDefinitionRegistrar</code>ï¼šæ‰‹å·¥æ³¨å†Œbean</li></ul></li><li>ä½¿ç”¨Springæä¾›çš„FactoryBean(å·¥å‚Bean)<ul><li>é»˜è®¤è·å–åˆ°å·¥å‚beanè°ƒç”¨getObjectåˆ›å»ºçš„å¯¹è±¡</li><li><code>&amp;thirdFactoryBean</code>ï¼Œè¯¥idå¯è·å–å·¥å‚å¯¹è±¡</li></ul></li></ul><h4 id="ç”Ÿå‘½å‘¨æœŸ"><a href="#ç”Ÿå‘½å‘¨æœŸ" class="headerlink" title="ç”Ÿå‘½å‘¨æœŸ"></a>ç”Ÿå‘½å‘¨æœŸ</h4><ul><li>beanåˆ›å»ºâ€”-åˆå§‹åŒ–â€”-é”€æ¯<ul><li>åˆå§‹åŒ–ï¼šå¯¹è±¡åˆ›å»ºå®Œæˆï¼Œå¹¶èµ‹å€¼å¥½ï¼Œè°ƒç”¨åˆå§‹åŒ–</li><li>é”€æ¯ï¼šå•å®ä¾‹å®¹å™¨å…³é—­ï¼Œå¤šå®ä¾‹å®¹å™¨ä¸ç®¡</li></ul></li><li>1)ã€æŒ‡å®šåˆå§‹åŒ–å’Œé”€æ¯<ul><li>é€šè¿‡<code>@Bean(initMethod,destroyMethod)</code></li></ul></li><li>2)ã€é€šè¿‡è®©Beanå®ç°æ¥å£(å¦‚Person)<ul><li><code>InitializingBean</code><ul><li><code>DisposableBean</code></li></ul></li><li>3)ã€ä½¿ç”¨JSR250,ç›´æ¥åœ¨beanä¸­çš„æ–¹æ³•ä¸Šå£°æ˜ä¸‹é¢2ä¸ªæ³¨è§£<ul><li><code>@PostConstruct</code></li><li><code>@PreDestroy</code></li></ul></li><li>4)ã€<code>BeanPostProcessor</code>: beançš„åç½®å¤„ç†å™¨(æœ¬èº«ä¸åšåˆå§‹åŒ–ï¼ŒåŒºåˆ«å‰3ä¸ª)<ul><li>åœ¨bean<strong>åˆå§‹åŒ–</strong>å‰ååšä¸€äº›å·¥ä½œã€‚</li><li>åŸç†ï¼šå®¹å™¨æ„å»ºè¿‡ç¨‹ä¸­ï¼Œ<strong>éå†æ‰€æœ‰BeanPostProcessorï¼ŒæŒ¨ä¸ªæ‰§è¡Œbeforeâ€¦ä¸€æ—¦è¿”å›nullï¼Œè·³å‡ºforå¾ªç¯</strong>ï¼Œä¸ä¼šæ‰§è¡Œåé¢çš„ã€‚åœ¨æ‰§è¡Œåˆå§‹åŒ–æ–¹æ³•ï¼ˆè‹¥æœ‰ï¼‰ï¼Œå†afterâ€¦</li><li>springåº•å±‚ä¸­åº”ç”¨ï¼š<ul><li>beanèµ‹å€¼ï¼Œæ³¨å…¥å…¶ä»–ç»„ä»¶ï¼Œ@Autowiredï¼Œå£°æ˜å‘¨æœŸæ³¨è§£ï¼Œ@Asyncç­‰éƒ½æ˜¯ä¾èµ–BeanPostProcessorå®Œæˆ</li></ul></li></ul></li></ul></li></ul><h4 id="ç»„ä»¶æ³¨å…¥"><a href="#ç»„ä»¶æ³¨å…¥" class="headerlink" title="ç»„ä»¶æ³¨å…¥"></a>ç»„ä»¶æ³¨å…¥</h4><ul><li><p>åŸºæœ¬ç±»å‹</p><ul><li><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ä½¿ç”¨@Valueèµ‹å€¼(ç©ºå‚æ„é€ )</span><br><span class="line">1.åŸºæœ¬æ•°å€¼</span><br><span class="line">2.å†™SpEL, #&#123;&#125;</span><br><span class="line">3.å¯å†™$&#123;&#125;ï¼Œå–å‡ºé…ç½®æ–‡ä»¶ï¼ˆè¿è¡Œç¯å¢ƒï¼‰å€¼</span><br><span class="line">//è¯»å–å¤–éƒ¨é…ç½®æ–‡ä»¶K/Vä¿å­˜åˆ°è¿è¡Œç¯å¢ƒå˜é‡,åŠ è½½å®Œåå¯ç”¨$&#123;&#125;å–å‡º</span><br><span class="line">@PropertySource(&quot;classpath:/person.properties&quot;)é…ç½®ç±»æ³¨è§£</span><br></pre></td></tr></table></figure></li></ul></li><li><p>å¼•ç”¨ç±»å‹(è‡ªåŠ¨è£…é…)</p><blockquote><p><strong>æ³¨æ„ï¼š</strong>é»˜è®¤åŠ è½½iocå®¹å™¨ç»„ä»¶</p><ol><li>å®¹å™¨å¯åŠ¨ä¼šè°ƒç”¨ç©ºå‚æ„é€ åˆ›å»ºå¯¹è±¡ï¼Œå†è¿›è¡Œåˆå§‹åŒ–å¤åˆ¶ç­‰æ“ä½œã€‚</li><li>è‹¥æ— éç©ºï¼Œåªæœ‰1ä¸ªæœ‰å‚æ„é€ ï¼Œåˆ™æœ‰å‚çš„å¼•ç”¨ç±»å‹å‚æ•° @Autowiredå¯çœç•¥ï¼ŒåŸºæœ¬çš„è¿˜æ˜¯è¦ç”¨@Value</li></ol></blockquote><ul><li>@Autowired è‡ªåŠ¨æ³¨å…¥  ä¼˜å…ˆè€ƒè™‘ä½¿ç”¨</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">è‡ªåŠ¨è£…é…DI</span><br><span class="line"><span class="number">1</span>ã€<span class="meta">@Autowired</span> è‡ªåŠ¨æ³¨å…¥  ä¼˜å…ˆè€ƒè™‘ä½¿ç”¨</span><br><span class="line">   <span class="number">1</span>ï¼‰é»˜è®¤ä¼˜å…ˆæŒ‰ç…§.classå»å®¹å™¨ä¸­å¯¹åº”ç»„ä»¶</span><br><span class="line">   <span class="number">2</span>ï¼‰å¦‚æœæ‰¾åˆ°å¤šä¸ªåŒç±»å‹ï¼ˆidæœ‰åˆ«åï¼‰ï¼Œå†å°†å±æ€§åä½œä¸ºidæŸ¥æ‰¾</span><br><span class="line">   <span class="number">3</span>ï¼‰<span class="meta">@Qualifier</span>(<span class="string">"bookDao2"</span>) æ˜ç¡®æŒ‡å®šç”¨çš„idï¼Œè€Œä¸æ˜¯ç”¨å±æ€§å</span><br><span class="line">   <span class="number">4</span>ï¼‰é»˜è®¤å¿…é¡»å°†å±æ€§å¤åˆ¶å¥½ï¼Œæ²¡æœ‰å°±æŠ¥é”™ï¼Œé™¤éä½¿ç”¨ï¼ˆrequired=<span class="keyword">false</span>ï¼‰å£°æ˜å¯ä¸º<span class="keyword">null</span></span><br><span class="line">   <span class="number">5</span>ï¼‰<span class="meta">@Primary</span>ï¼šè®©springè¿›è¡ŒDIï¼Œé»˜è®¤ç”¨é¦–é€‰çš„ï¼Œä¹Ÿå¯ç»§ç»­ä½¿ç”¨<span class="meta">@Qualifier</span>æŒ‡å®š</span><br><span class="line"> </span><br><span class="line"><span class="comment">//2ã€@Resource(JSR250)å’Œ@Inject(JSR330) [javaè§„èŒƒ]</span></span><br><span class="line"><span class="comment">//3ã€@Autowired ï¼šæ„é€ å™¨ï¼Œå‚æ•°ï¼Œæ–¹æ³•ï¼Œå±æ€§</span></span><br><span class="line">  <span class="number">1</span>ï¼‰åœ¨æ–¹æ³•ä¸Šï¼Œ<span class="meta">@Bean</span> </span><br><span class="line">  æ–¹æ³•ï¼Œä¸‹é¢çš„æ–¹æ³•å‚æ•°ï¼Œå‚æ•°å¯ä»å®¹å™¨ä¸­è·å–ï¼Œé»˜è®¤ä¸å†™Autowiredå¯çœç•¥</span><br><span class="line">      <span class="meta">@Bean</span></span><br><span class="line">       <span class="function">pubic BookService <span class="title">bookService</span><span class="params">(BookDao bookDao)</span> </span>&#123;</span><br><span class="line">       <span class="keyword">return</span> <span class="keyword">new</span> BookService();</span><br><span class="line">       &#125;</span><br><span class="line">   <span class="number">2</span>ï¼‰åœ¨æ„é€ å™¨ä¸Šï¼Œå¦‚æœç»„ä»¶åªæœ‰ä¸€ä¸ªæœ‰å‚ï¼ŒAutowiredå¯çœç•¥</span><br><span class="line"><span class="comment">//4ã€è‡ªå®šä¹‰ç»„ä»¶è¦ä½¿ç”¨springåº•å±‚å®¹å™¨ç»„ä»¶ï¼ˆApplicationContext, BeanFactoryç­‰ï¼‰</span></span><br><span class="line">       è‡ªå®šä¹‰ç»„ä»¶è¦å®ç°xxxAwareæ¥å£</span><br><span class="line">     ApplicationContextAwareã€BeanNameAwareç­‰</span><br></pre></td></tr></table></figure></li></ul><h4 id="ç¯å¢ƒæŒ‡å®šProfile"><a href="#ç¯å¢ƒæŒ‡å®šProfile" class="headerlink" title="ç¯å¢ƒæŒ‡å®šProfile"></a>ç¯å¢ƒæŒ‡å®šProfile</h4><p>ä¸ªäººçœ‹æ³•ï¼šè·Ÿconditionalç±»ä¼¼</p><ul><li><p>Springä¸ºæˆ‘ä»¬æä¾›çš„å¯ä»¥æ ¹æ®å½“å‰ç¯å¢ƒï¼ŒåŠ¨æ€çš„æ¿€æ´»å’Œåˆ‡æ¢ä¸€ç³»åˆ—ç»„ä»¶çš„åŠŸèƒ½ã€‚å¦‚å¼€å‘ç¯å¢ƒã€æµ‹è¯•ç¯å¢ƒã€ç”Ÿæˆç¯å¢ƒï¼Œæ•°æ®æºï¼ˆ/Aï¼‰ï¼ˆ/Bï¼‰ï¼ˆ/Cï¼‰</p></li><li><p>æŒ‡å®šç¯å¢ƒ</p><ul><li><p>1)ã€ä½¿ç”¨å‘½ä»¤è¡ŒåŠ¨æ€å‚æ•°ï¼šJVMå‚æ•°<code>-Dspring.profiles.active=test</code>(å³ç¯å¢ƒ)</p></li><li><p>2)ã€ä»£ç ï¼š</p><ul><li><p>åˆ›å»ºapplicationContext,å¿…é¡»ç”¨æ— å‚æ„é€ ï¼Œä¸ç„¶å°±é…å¥½äº†ç¯å¢ƒ</p></li><li><p>è®¾ç½®éœ€è¦æ¿€æ´»çš„ç¯å¢ƒï¼š</p><p>applicationContext.getEnvironment().setActiveProfiles(â€œtestâ€, â€œdevâ€)</p></li><li><p>æ³¨å†Œä¸»é…ç½®ç±»</p><p>applicationContext.register(é…ç½®æ–‡ä»¶.class)</p></li><li><p>å¯åŠ¨åˆ·æ–°å®¹å™¨</p><p>applicationContext.refresh();</p></li></ul></li></ul></li><li><p>è¯´æ˜</p><p>â€‹    æŒ‡å®šç»„ä»¶åœ¨å“ªä¸ªç¯å¢ƒçš„æƒ…å†µä¸‹æ‰èƒ½è¢«æ³¨å†Œåˆ°å®¹å™¨ï¼Œä¸æŒ‡å®šï¼Œä»»ä½•ç¯å¢ƒä¸‹éƒ½èƒ½æ³¨å†Œè¿™ä¸ªç»„ä»¶</p><ul><li>åŠ äº†ç¯å¢ƒæ ‡è¯†çš„bean,åªæœ‰åœ¨è¿™ä¸ªç¯å¢ƒæ‰èƒ½è¢«æ¿€æ´»æ³¨å†Œã€‚é»˜è®¤æ˜¯defaultç¯å¢ƒ</li></ul><ul><li>å†™åœ¨é…ç½®ç±»ä¸Šï¼Œåªæœ‰æ˜¯æŒ‡å®šçš„ç¯å¢ƒçš„æ—¶å€™ï¼Œæ•´ä¸ªé…ç½®ç±»æ‰ç”Ÿæ•ˆ</li></ul></li></ul><h2 id="AOP"><a href="#AOP" class="headerlink" title="AOP"></a>AOP</h2><h3 id="æ­¥éª¤"><a href="#æ­¥éª¤" class="headerlink" title="æ­¥éª¤"></a>æ­¥éª¤</h3><ol><li><p>å¯¼å…¥aopæ¨¡å—ï¼›Spring AOPï¼š(spring-aspects)</p></li><li><p>å®šä¹‰ä¸€ä¸ªä¸šåŠ¡é€»è¾‘ç±»ï¼ˆMathCalculatorï¼‰ï¼›åœ¨ä¸šåŠ¡é€»è¾‘è¿è¡Œçš„æ—¶å€™å°†æ—¥å¿—è¿›è¡Œæ‰“å°ï¼ˆæ–¹æ³•ä¹‹å‰ã€æ–¹æ³•è¿è¡Œç»“æŸã€æ–¹æ³•å‡ºç°å¼‚å¸¸ï¼Œxxxï¼‰</p></li><li><p>å®šä¹‰ä¸€ä¸ªæ—¥å¿—åˆ‡é¢ç±»ï¼ˆLogAspectsï¼‰ï¼šåˆ‡é¢ç±»é‡Œé¢çš„æ–¹æ³•éœ€è¦åŠ¨æ€æ„ŸçŸ¥MathCalculator.divè¿è¡Œåˆ°å“ªé‡Œç„¶åæ‰§è¡Œï¼›</p><p>é€šçŸ¥æ–¹æ³•ï¼š</p><ul><li>å‰ç½®é€šçŸ¥(<code>@Before</code>)ï¼šlogStartï¼šåœ¨ç›®æ ‡æ–¹æ³•(div)è¿è¡Œä¹‹å‰è¿è¡Œ</li><li>åç½®é€šçŸ¥(<code>@After</code>)ï¼šlogEndï¼šåœ¨ç›®æ ‡æ–¹æ³•(div)è¿è¡Œç»“æŸä¹‹åè¿è¡Œï¼ˆæ— è®ºæ–¹æ³•æ­£å¸¸ç»“æŸè¿˜æ˜¯å¼‚å¸¸ç»“æŸï¼‰</li><li>è¿”å›é€šçŸ¥(<code>@AfterReturning</code>)ï¼šlogReturnï¼šåœ¨ç›®æ ‡æ–¹æ³•(div)æ­£å¸¸è¿”å›ä¹‹åè¿è¡Œ</li><li>å¼‚å¸¸é€šçŸ¥(<code>@AfterThrowing</code>)ï¼šlogExceptionï¼šåœ¨ç›®æ ‡æ–¹æ³•(div)å‡ºç°å¼‚å¸¸ä»¥åè¿è¡Œ</li><li>ç¯ç»•é€šçŸ¥(<code>@Around</code>)ï¼šåŠ¨æ€ä»£ç†ï¼Œæ‰‹åŠ¨æ¨è¿›ç›®æ ‡æ–¹æ³•è¿è¡Œï¼ˆ<code>joinPoint.procced()</code>ï¼‰</li></ul></li><li><p>ç»™åˆ‡é¢ç±»çš„ç›®æ ‡æ–¹æ³•æ ‡æ³¨ä½•æ—¶ä½•åœ°è¿è¡Œï¼ˆé€šçŸ¥æ³¨è§£ï¼‰ï¼›</p></li><li><p>å°†åˆ‡é¢ç±»å’Œä¸šåŠ¡é€»è¾‘ç±»ï¼ˆç›®æ ‡æ–¹æ³•æ‰€åœ¨ç±»ï¼‰éƒ½åŠ å…¥åˆ°å®¹å™¨ä¸­;</p></li><li><p>å¿…é¡»å‘Šè¯‰Springå“ªä¸ªç±»æ˜¯åˆ‡é¢ç±»(ç»™åˆ‡é¢ç±»ä¸ŠåŠ ä¸€ä¸ªæ³¨è§£ï¼š@Aspect)</p></li><li><p>ç»™é…ç½®ç±»ä¸­åŠ  <code>@EnableAspectJAutoProxy</code> ã€å¼€å¯åŸºäºæ³¨è§£çš„aopæ¨¡å¼ã€‘</p><p>â€‹    åœ¨Springä¸­å¾ˆå¤šçš„ @EnableXXX;</p></li></ol><h3 id="ç¤ºä¾‹"><a href="#ç¤ºä¾‹" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LogAspects</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æŠ½å–å…¬å…±çš„åˆ‡å…¥ç‚¹è¡¨è¾¾å¼</span></span><br><span class="line"><span class="comment">//1ã€æœ¬ç±»å¼•ç”¨</span></span><br><span class="line"><span class="comment">//2ã€å…¶ä»–çš„åˆ‡é¢å¼•ç”¨</span></span><br><span class="line"><span class="meta">@Pointcut</span>(<span class="string">"execution(public * com.aop.MathCalculator.*(..))"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">pointCut</span><span class="params">()</span></span>&#123;&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//@Beforeåœ¨ç›®æ ‡æ–¹æ³•ä¹‹å‰åˆ‡å…¥ï¼›åˆ‡å…¥ç‚¹è¡¨è¾¾å¼ï¼ˆæŒ‡å®šåœ¨å“ªä¸ªæ–¹æ³•åˆ‡å…¥ï¼‰</span></span><br><span class="line"><span class="meta">@Before</span>(<span class="string">"pointCut()"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">logStart</span><span class="params">(JoinPoint joinPoint)</span></span>&#123;</span><br><span class="line">Object[] args = joinPoint.getArgs();</span><br><span class="line">System.out.println(<span class="string">""</span>+joinPoint.getSignature().getName()+<span class="string">"è¿è¡Œã€‚ã€‚ã€‚@Before:å‚æ•°åˆ—è¡¨æ˜¯ï¼š&#123;"</span>+Arrays.asList(args)+<span class="string">"&#125;"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@After</span>(<span class="string">"com.aop.LogAspects.pointCut()"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">logEnd</span><span class="params">(JoinPoint joinPoint)</span></span>&#123;</span><br><span class="line">System.out.println(<span class="string">""</span>+joinPoint.getSignature().getName()+<span class="string">"ç»“æŸã€‚ã€‚ã€‚@After"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//JoinPointä¸€å®šè¦å‡ºç°åœ¨å‚æ•°è¡¨çš„ç¬¬ä¸€ä½</span></span><br><span class="line"><span class="meta">@AfterReturning</span>(value=<span class="string">"pointCut()"</span>,returning=<span class="string">"result"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">logReturn</span><span class="params">(JoinPoint joinPoint,Object result)</span></span>&#123;</span><br><span class="line">System.out.println(<span class="string">""</span>+joinPoint.getSignature().getName()+<span class="string">"æ­£å¸¸è¿”å›ã€‚ã€‚ã€‚@AfterReturning:è¿è¡Œç»“æœï¼š&#123;"</span>+result+<span class="string">"&#125;"</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@AfterThrowing</span>(value=<span class="string">"pointCut()"</span>,throwing=<span class="string">"exception"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">logException</span><span class="params">(JoinPoint joinPoint,Exception exception)</span></span>&#123;</span><br><span class="line">System.out.println(<span class="string">""</span>+joinPoint.getSignature().getName()+<span class="string">"å¼‚å¸¸ã€‚ã€‚ã€‚å¼‚å¸¸ä¿¡æ¯ï¼š&#123;"</span>+exception+<span class="string">"&#125;"</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å£°æ˜å¼äº‹åŠ¡"><a href="#å£°æ˜å¼äº‹åŠ¡" class="headerlink" title="å£°æ˜å¼äº‹åŠ¡"></a>å£°æ˜å¼äº‹åŠ¡</h2><h3 id="æ­¥éª¤-1"><a href="#æ­¥éª¤-1" class="headerlink" title="æ­¥éª¤"></a>æ­¥éª¤</h3><ol><li>å¯¼å…¥ç›¸å…³ä¾èµ–<ul><li>æ•°æ®æºã€æ•°æ®åº“é©±åŠ¨ã€Spring-jdbcæ¨¡å—</li></ul></li><li>é…ç½®æ•°æ®æºã€JdbcTemplateæ“ä½œæ•°æ®</li><li>ç»™æ–¹æ³•ä¸Šæ ‡æ³¨ @Transactional è¡¨ç¤ºå½“å‰æ–¹æ³•æ˜¯ä¸€ä¸ªäº‹åŠ¡æ–¹æ³•ï¼›</li><li>@EnableTransactionManagement å¼€å¯åŸºäºæ³¨è§£çš„äº‹åŠ¡ç®¡ç†åŠŸèƒ½ï¼›</li><li>é…ç½®äº‹åŠ¡ç®¡ç†å™¨æ¥æ§åˆ¶äº‹åŠ¡;</li></ol><h3 id="ç¤ºä¾‹-1"><a href="#ç¤ºä¾‹-1" class="headerlink" title="ç¤ºä¾‹"></a>ç¤ºä¾‹</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@EnableTransactionManagement</span></span><br><span class="line"><span class="meta">@ComponentScan</span>(<span class="string">"com.atguigu.tx"</span>)</span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TxConfig</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ•°æ®æº</span></span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> DataSource <span class="title">dataSource</span><span class="params">()</span> <span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line">ComboPooledDataSource dataSource = <span class="keyword">new</span> ComboPooledDataSource();</span><br><span class="line">dataSource.setUser(<span class="string">"root"</span>);</span><br><span class="line">dataSource.setPassword(<span class="string">"123456"</span>);</span><br><span class="line">dataSource.setDriverClass(<span class="string">"com.mysql.jdbc.Driver"</span>);</span><br><span class="line">dataSource.setJdbcUrl(<span class="string">"jdbc:mysql://localhost:3306/test"</span>);</span><br><span class="line"><span class="keyword">return</span> dataSource;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> JdbcTemplate <span class="title">jdbcTemplate</span><span class="params">()</span> <span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line"><span class="comment">//Springå¯¹@Configurationç±»ä¼šç‰¹æ®Šå¤„ç†ï¼›ç»™å®¹å™¨ä¸­åŠ ç»„ä»¶çš„æ–¹æ³•ï¼Œå¤šæ¬¡è°ƒç”¨éƒ½åªæ˜¯ä»å®¹å™¨ä¸­æ‰¾ç»„ä»¶ï¼Œæ•…è€Œä¸å­˜åœ¨dataSource()åˆ›å¤šä¸ªå¯¹è±¡</span></span><br><span class="line">JdbcTemplate jdbcTemplate = <span class="keyword">new</span> JdbcTemplate(dataSource());</span><br><span class="line"><span class="keyword">return</span> jdbcTemplate;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ³¨å†Œäº‹åŠ¡ç®¡ç†å™¨åœ¨å®¹å™¨ä¸­</span></span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> PlatformTransactionManager <span class="title">transactionManager</span><span class="params">()</span> <span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">new</span> DataSourceTransactionManager(dataSource());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="æ‰©å±•åŸç†"><a href="#æ‰©å±•åŸç†" class="headerlink" title="æ‰©å±•åŸç†"></a>æ‰©å±•åŸç†</h2><ul><li>BeanFactoryPostProcessor</li><li>BeanDefinitionRegistryPostProcessor</li><li>ApplicationListener</li><li>Springå®¹å™¨åˆ›å»ºè¿‡ç¨‹</li></ul><h2 id="Web"><a href="#Web" class="headerlink" title="Web"></a>Web</h2><ul><li>servlet3.0</li><li>å¼‚æ­¥è¯·æ±‚</li></ul>]]></content>
      
      
      <categories>
          
          <category> æ¡†æ¶ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Spring </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>SpringMVC</title>
      <link href="/2019/06/16/%E6%A1%86%E6%9E%B6/SpringMVC/"/>
      <url>/2019/06/16/%E6%A1%86%E6%9E%B6/SpringMVC/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote class="blockquote-center"><p>Spring MVCå°ç»“</p></blockquote><p><img src="/2019/06/16/æ¡†æ¶/SpringMVC/3.png"></p><a id="more"></a><h1 id="SpringMVC"><a href="#SpringMVC" class="headerlink" title="SpringMVC"></a>SpringMVC</h1><p>è¡¨ç°å±‚æ¡†æ¶</p><h2 id="å¿«é€Ÿå…¥é—¨"><a href="#å¿«é€Ÿå…¥é—¨" class="headerlink" title="å¿«é€Ÿå…¥é—¨"></a>å¿«é€Ÿå…¥é—¨</h2><p>ä¸»è¦ç”±2å¤§å—æ„æˆ</p><ul><li><code>web.xml</code>é…ç½®DispatcherServlet</li><li><code>DispatcherServlet-servlet.xml</code>ä¸­é…ç½®<ul><li>å¤„ç†å™¨æ˜ å°„ã€æ ¹æ®é€‰å®šè§„åˆ™æ‰¾æ§åˆ¶å™¨ã€‘</li><li>è§†å›¾è§£æå™¨</li></ul></li></ul><h2 id="æ˜ å°„è¯·æ±‚"><a href="#æ˜ å°„è¯·æ±‚" class="headerlink" title="æ˜ å°„è¯·æ±‚"></a>æ˜ å°„è¯·æ±‚</h2><ul><li><p>@RequestMapping</p><ul><li>ä¿®é¥°ç±»åï¼šä½œä¸ºurlæ ¹</li><li>ä¿®é¥°æ–¹æ³•åï¼šä½œä¸ºurlæˆ–è€…å­</li><li>è¿˜å¯è‡ªå®šä¹‰è®¿é—®ç±»å‹GETã€POSTç­‰(é»˜è®¤ä¸åŒºåˆ†)ï¼ŒåŠheaderå’Œå‚æ•°è¦æ±‚</li></ul></li><li><p>@PathVariable</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å¯ä»¥ç”¨æ¥æ˜ å°„URLä¸­çš„å ä½ç¬¦åˆ°ç›®æ ‡æ–¹æ³•å‚æ•°</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/delete/&#123;id&#125;"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">dellete</span><span class="params">(@PathVariable(<span class="string">"id"</span>)</span> Integer id) </span>&#123;</span><br><span class="line">  UserDao.delete(id);</span><br><span class="line">  <span class="keyword">return</span> <span class="string">"redirect:/user/list.action"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h2 id="æ˜ å°„è¯·æ±‚å‚æ•°"><a href="#æ˜ å°„è¯·æ±‚å‚æ•°" class="headerlink" title="æ˜ å°„è¯·æ±‚å‚æ•°"></a>æ˜ å°„è¯·æ±‚å‚æ•°</h2><ul><li><p>@RequestParam</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ç»‘å®šè¯·æ±‚å‚æ•°</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">test</span><span class="params">(@RequestParam(<span class="string">"username"</span>)</span> String un,</span></span><br><span class="line"><span class="function">  @<span class="title">RequestParam</span><span class="params">(value=<span class="string">"age"</span>, required=<span class="keyword">false</span>)</span> Integer age,) </span>&#123;</span><br><span class="line">  <span class="comment">//urlä¸º/test?username=lp&amp;age=26 (requiredè¡¨ç¤ºå¿…é¡»æœ‰)</span></span><br><span class="line">  å¯è§£æå‡ºï¼Œä½†è¿™ç§è¯·æ±‚éresté£æ ¼</span><br><span class="line">  <span class="keyword">return</span> SUCCESS;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//(é‡è¦)</span></span><br><span class="line"><span class="comment">//ç”¨çš„å¤šçš„æ˜¯POJOå¯¹è±¡æ˜ å°„(@RequestParam("username") </span></span><br><span class="line">Spring MVCä¼šæŒ‰è¯·æ±‚å‚æ•°åå’ŒPOJOå±æ€§åè¿›è¡Œè‡ªåŠ¨åŒ¹é…</span><br><span class="line">è‡ªåŠ¨ä¸ºè¯¥å¯¹è±¡å¡«å……å€¼ï¼Œæ”¯æŒçº§è”å±æ€§ã€‚å¦‚ï¼šdept.deptIdç­‰</span><br></pre></td></tr></table></figure></li><li><p>@RequestHeader</p><p>ç»‘å®šè¯·æ±‚å¤´ï¼Œç”¨çš„ä¸å¤š</p></li><li><p>@CookieValue</p><p>æ˜ å°„ä¸€ä¸ªCookieå€¼</p></li><li><p>Handleræ–¹æ³•å‚æ•°</p><p>å³å¤„ç†è¯·æ±‚æ–¹æ³•çš„å‚æ•°ï¼Œç›´æ¥æ”¾åˆ°method(HttpServletRequest req)ä½¿ç”¨</p><ul><li><p>ServeletAPIç±»å‹å‚æ•°</p><p>â€¢ HttpServletRequest</p><p>â€¢ HttpServletResponse</p><p>â€¢ HttpSession</p><p>â€¢ java.security.Principal</p><p>â€¢ Locale</p><p>â€¢ InputStream</p><p>â€¢ OutputStream</p><p>â€¢ Reader</p><p>â€¢ Writer</p></li></ul></li></ul><h2 id="å¤„ç†æ¨¡å‹æ•°æ®"><a href="#å¤„ç†æ¨¡å‹æ•°æ®" class="headerlink" title="å¤„ç†æ¨¡å‹æ•°æ®"></a>å¤„ç†æ¨¡å‹æ•°æ®</h2><ul><li><p>ModelAndView</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ§åˆ¶å™¨è¿”å›è¯¥å€¼ï¼Œåˆ™å³åŒ…å«è§†å›¾ï¼Œä¹ŸåŒ…å«æ•°æ® </span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/testModelAndView"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> ModelAndView <span class="title">testModelAndView</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  String viewName = SUCCESS;</span><br><span class="line">  ModelAndView modelAndView = <span class="keyword">new</span> ModelAndView(viewName);</span><br><span class="line"></span><br><span class="line">  <span class="comment">//æ·»åŠ æ¨¡å‹æ•°æ®åˆ°modelAndView</span></span><br><span class="line">  modelAndView.addObject(<span class="string">"time"</span>, <span class="keyword">new</span> Date());</span><br><span class="line">  System.out.println(modelAndView);</span><br><span class="line">  <span class="keyword">return</span> modelAndView; <span class="comment">//åªåœ¨è¯·æ±‚åŸŸ requestScope</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><blockquote><p>æ³¨æ„ç‚¹ï¼š</p><ol><li>requestå¯¹è±¡é€šå¸¸ç”¨æ¥æ¥æ”¶å®¢æˆ·ç«¯æäº¤åˆ°æœåŠ¡ç«¯çš„æ•°æ®ï¼Œå¦‚ï¼šåœ¨servletæˆ–è€…actionä¸­å¯ä»¥ç”¨request.getParameter()çš„æ–¹æ³•è·å–è·å–å‚æ•°å†…å®¹ï¼›</li><li>requestScopeé€šå¸¸æ˜¯åœ¨servletæˆ–è€…actionçš„æœåŠ¡ç«¯ä¸­é€šè¿‡request.setAttribute()æ–¹æ³•æŠŠæ•°æ®æ”¾åˆ°requestå¯¹è±¡ä¸­ä¾›å®¢æˆ·ç«¯è·å–ï¼Œç„¶åå®¢æˆ·ç«¯è·å–çš„æ–¹æ³•å°±æ˜¯requestScope.getAttribute()ã€‚</li></ol></blockquote><ul><li><p>Map</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/testMap"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">testMap</span><span class="params">(Map&lt;String, Object&gt; map)</span> </span>&#123;</span><br><span class="line">  System.out.println(map.getClass().getName());</span><br><span class="line">  map.put(<span class="string">"names"</span>, Arrays.asList(<span class="string">"a"</span>,<span class="string">"b"</span>,<span class="string">"c"</span>));</span><br><span class="line">  <span class="keyword">return</span> SUCCESS;</span><br><span class="line">&#125;<span class="comment">//åŒæ ·ï¼Œæ— å…¶ä»–å£°æ˜ï¼Œåªåœ¨è¯·æ±‚åŸŸ</span></span><br></pre></td></tr></table></figure></li><li><p>@SessionAttributesä¿®é¥°ç±»</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//valueæŒ‡å®šé”®å­˜æ”¾ï¼ŒtypesæŒ‡å®šå€¼çš„ç±»å‹çš„é”®éƒ½ç®—</span></span><br><span class="line"><span class="meta">@SessionAttributes</span>(value = &#123;<span class="string">"user"</span>&#125;, types=&#123;String.class&#125;)</span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloWorld</span> </span>&#123;</span><br><span class="line">  <span class="meta">@RequestMapping</span>(<span class="string">"/testSessionAttributes"</span>)</span><br><span class="line">   <span class="function"><span class="keyword">public</span> String <span class="title">testSessionAttributes</span><span class="params">(Map&lt;String, Object&gt; map)</span> </span>&#123;</span><br><span class="line">        map.put(<span class="string">"user"</span>, <span class="string">"lp"</span>);</span><br><span class="line">        <span class="keyword">return</span> SUCCESS;</span><br><span class="line">   &#125;</span><br><span class="line">&#125; <span class="comment">//requestScopeå’ŒsessionScopeéƒ½æœ‰</span></span><br></pre></td></tr></table></figure></li><li><p>@ModelAttribute</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//@ModelAttributeæ ‡è®°çš„æ–¹æ³•, ä¼šåœ¨æ¯ä¸ªç›®æ ‡æ–¹æ³•æ‰§è¡Œä¹‹å‰è¢«SpringMVCè°ƒç”¨     </span></span><br><span class="line"><span class="meta">@ModelAttribute</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">getUser</span><span class="params">(@RequestParam(value=<span class="string">"id"</span>,required=<span class="keyword">false</span>)</span> Integer id, Map&lt;String, Object&gt; map)</span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(id != <span class="keyword">null</span>)&#123;</span><br><span class="line">    <span class="comment">//æ¨¡æ‹Ÿä»æ•°æ®åº“ä¸­è·å–å¯¹è±¡</span></span><br><span class="line">    User user = <span class="keyword">new</span> User(<span class="number">1</span>, <span class="string">"Tom"</span>, <span class="string">"123456"</span>, <span class="string">"tom@ccc.com"</span>, <span class="number">12</span>);</span><br><span class="line">    System.out.println(<span class="string">"ä»æ•°æ®åº“ä¸­è·å–ä¸€ä¸ªå¯¹è±¡: "</span> + user);</span><br><span class="line">    map.put(<span class="string">"abc"</span>, user);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/testModelAttribute"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">testModelAttribute</span><span class="params">(@ModelAttribute(<span class="string">"abc"</span>)</span> User user)</span>&#123; <span class="comment">//å¦‚æœä¸å–åˆ«åabcï¼Œé»˜è®¤ä¸å†™ï¼Œåˆ™ä¸Šé¢çš„mapé”®ä¸ºuser</span></span><br><span class="line">  System.out.println(<span class="string">"ä¿®æ”¹: "</span> + user);</span><br><span class="line">  <span class="keyword">return</span> SUCCESS;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>è¿è¡Œæµç¨‹:<ul><li>æ‰§è¡Œ @ModelAttribute æ³¨è§£ä¿®é¥°çš„æ–¹æ³•: ä»æ•°æ®åº“ä¸­å–å‡ºå¯¹è±¡, æŠŠå¯¹è±¡æ”¾å…¥åˆ°äº† Map ä¸­. é”®ä¸º: user</li><li>SpringMVC ä» Map ä¸­å–å‡º User å¯¹è±¡, å¹¶æŠŠè¡¨å•çš„è¯·æ±‚å‚æ•°èµ‹ç»™è¯¥ User å¯¹è±¡çš„å¯¹åº”å±æ€§.</li><li>SpringMVC æŠŠä¸Šè¿°å¯¹è±¡ä¼ å…¥ç›®æ ‡æ–¹æ³•çš„å‚æ•°. </li></ul></li></ul></li></ul><h2 id="å¤„ç†JSON"><a href="#å¤„ç†JSON" class="headerlink" title="å¤„ç†JSON"></a>å¤„ç†JSON</h2><p>ä½¿ç”¨<code>HttpMessageConverter</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//mvc:annotation-driven   xmléœ€è¦é…ç½®</span></span><br><span class="line"><span class="meta">@ResponseBody</span> </span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/testHttpMessageConverter"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">testHttpMessageConverter</span><span class="params">(@RequestBody String body)</span></span>&#123;</span><br><span class="line">  System.out.println(body);<span class="comment">//æå‰reqä¿¡æ¯</span></span><br><span class="line">  <span class="keyword">return</span> <span class="string">"helloworld! "</span> + <span class="keyword">new</span> Date();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/testJson"</span>) <span class="comment">//ç›´æ¥è¿”json</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Collection&lt;Employee&gt; <span class="title">testJson</span><span class="params">()</span></span>&#123;</span><br><span class="line">  <span class="keyword">return</span> employeeDao.getAll();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/testConversionServiceConverer"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">testConverter</span><span class="params">(@RequestParam(<span class="string">"employee"</span>)</span> Employee employee)</span>&#123;</span><br><span class="line">  System.out.println(<span class="string">"save: "</span> + employee);</span><br><span class="line">  employeeDao.save(employee);</span><br><span class="line">  <span class="keyword">return</span> <span class="string">"redirect:/emps"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="è‡ªå®šä¹‰æ‹¦æˆªå™¨"><a href="#è‡ªå®šä¹‰æ‹¦æˆªå™¨" class="headerlink" title="è‡ªå®šä¹‰æ‹¦æˆªå™¨"></a>è‡ªå®šä¹‰æ‹¦æˆªå™¨</h2><p>å¿…é¡»å®ç°<code>HandlerIntercepter</code>æ¥å£</p><ul><li>preHandle()</li><li>postHandle()</li><li>afterCompletion()</li></ul><p>å¤šä¸ªæ‹¦æˆªå™¨æ‰§è¡Œé¡ºåºå¦‚ä¸‹å›¾ï¼š</p><blockquote><p>æ³¨æ„ï¼š</p><ol><li><p>3ä¸ªæ–¹æ³•é¡ºåº</p></li><li><p>å½“return falseï¼Œç¬¬ä¸€ä¸ªæ‹¦æˆªå™¨preæ‰§è¡Œäº†ï¼Œè¿˜æ˜¯ä¼šè¿è¡Œç¬¬ä¸€ä¸ªçš„after</p></li></ol></blockquote><p><img src="/2019/06/16/æ¡†æ¶/SpringMVC/æ‹¦æˆªå™¨é¡ºåº.png" alt=""></p><h2 id="SpringMVCè¿è¡Œæµç¨‹"><a href="#SpringMVCè¿è¡Œæµç¨‹" class="headerlink" title="SpringMVCè¿è¡Œæµç¨‹"></a>SpringMVCè¿è¡Œæµç¨‹</h2><p>ä¸‰å¼ å›¾</p><ul><li>å›¾1</li></ul><p><img src="/2019/06/16/æ¡†æ¶/SpringMVC/1.png" alt=""></p><ul><li>å›¾2</li></ul><p><img src="/2019/06/16/æ¡†æ¶/SpringMVC/2.png" alt=""></p><ul><li>å›¾3</li></ul><p><img src="/2019/06/16/æ¡†æ¶/SpringMVC/3.png" alt=""></p><ul><li>æµç¨‹æè¿°</li></ul><ol><li><p>ç”¨æˆ·å‘æœåŠ¡å™¨å‘é€è¯·æ±‚ï¼Œè¯·æ±‚è¢«Spring å‰ç«¯æ§åˆ¶Servlet <code>DispatcherServlet</code>æ•è·ï¼›</p></li><li><p><code>DispatcherServlet</code>å¯¹è¯·æ±‚URLè¿›è¡Œè§£æï¼Œå¾—åˆ°è¯·æ±‚èµ„æºæ ‡è¯†ç¬¦ï¼ˆURIï¼‰ã€‚ç„¶åæ ¹æ®è¯¥URIï¼Œè°ƒç”¨<code>HandlerMapping</code>è·å¾—è¯¥<code>Handler</code>é…ç½®çš„æ‰€æœ‰ç›¸å…³çš„å¯¹è±¡ï¼ˆåŒ…æ‹¬<code>Handler</code>å¯¹è±¡ä»¥åŠHandlerå¯¹è±¡å¯¹åº”çš„æ‹¦æˆªå™¨ï¼‰ï¼Œæœ€åä»¥<code>HandlerExecutionChain</code>å¯¹è±¡çš„å½¢å¼è¿”å›ï¼›</p></li><li><p><code>DispatcherServlet</code> æ ¹æ®è·å¾—çš„<code>Handler</code>ï¼Œé€‰æ‹©ä¸€ä¸ªåˆé€‚çš„<code>HandlerAdapter</code>ã€‚ï¼ˆ<strong>é™„æ³¨</strong>ï¼šå¦‚æœæˆåŠŸè·å¾—<code>HandlerAdapter</code>åï¼Œæ­¤æ—¶å°†å¼€å§‹æ‰§è¡Œæ‹¦æˆªå™¨çš„<code>preHandler(â€¦)</code>æ–¹æ³•ï¼‰</p></li><li><p>æå–Requestä¸­çš„æ¨¡å‹æ•°æ®ï¼Œå¡«å……Handlerå…¥å‚ï¼Œå¼€å§‹æ‰§è¡ŒHandlerï¼ˆController)ã€‚ åœ¨å¡«å……Handlerçš„å…¥å‚è¿‡ç¨‹ä¸­ï¼Œæ ¹æ®ä½ çš„é…ç½®ï¼ŒSpringå°†å¸®ä½ åšä¸€äº›é¢å¤–çš„å·¥ä½œ</p><ul><li><p><code>HttpMessageConveter</code>ï¼š å°†è¯·æ±‚æ¶ˆæ¯ï¼ˆå¦‚Jsonã€xmlç­‰æ•°æ®ï¼‰è½¬æ¢æˆä¸€ä¸ªå¯¹è±¡ï¼Œå°†å¯¹è±¡è½¬æ¢ä¸ºæŒ‡å®šçš„å“åº”ä¿¡æ¯</p></li><li><p>æ•°æ®è½¬æ¢ï¼šå¯¹è¯·æ±‚æ¶ˆæ¯è¿›è¡Œæ•°æ®è½¬æ¢ã€‚å¦‚Stringè½¬æ¢æˆIntegerã€Doubleç­‰</p></li><li><p>æ•°æ®æ ¹å¼åŒ–ï¼šå¯¹è¯·æ±‚æ¶ˆæ¯è¿›è¡Œæ•°æ®æ ¼å¼åŒ–ã€‚ å¦‚å°†å­—ç¬¦ä¸²è½¬æ¢æˆæ ¼å¼åŒ–æ•°å­—æˆ–æ ¼å¼åŒ–æ—¥æœŸç­‰</p></li><li><p>æ•°æ®éªŒè¯ï¼š éªŒè¯æ•°æ®çš„æœ‰æ•ˆæ€§ï¼ˆé•¿åº¦ã€æ ¼å¼ç­‰ï¼‰ï¼ŒéªŒè¯ç»“æœå­˜å‚¨åˆ°<code>BindingResult</code>æˆ–<code>Error</code>ä¸­</p></li></ul></li><li><p>Handleræ‰§è¡Œå®Œæˆåï¼Œå‘<code>DispatcherServlet</code>è¿”å›ä¸€ä¸ª<code>ModelAndView</code>å¯¹è±¡ï¼›</p></li><li>æ ¹æ®è¿”å›çš„<code>ModelAndView</code>ï¼Œé€‰æ‹©ä¸€ä¸ªé€‚åˆçš„<code>ViewResolver</code>ï¼ˆå¿…é¡»æ˜¯å·²ç»æ³¨å†Œåˆ°Springå®¹å™¨ä¸­çš„<code>ViewResolver</code>)è¿”å›ç»™<code>DispatcherServlet</code>ï¼›</li><li><code>ViewResolver</code> ç»“åˆModelå’ŒViewï¼Œæ¥æ¸²æŸ“è§†å›¾</li><li>å°†æ¸²æŸ“ç»“æœè¿”å›ç»™å®¢æˆ·ç«¯ã€‚</li></ol>]]></content>
      
      
      <categories>
          
          <category> æ¡†æ¶ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SpringMVC </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>æ’åºç®—æ³•</title>
      <link href="/2019/03/24/%E7%AE%97%E6%B3%95/%E6%8E%92%E5%BA%8F/"/>
      <url>/2019/03/24/%E7%AE%97%E6%B3%95/%E6%8E%92%E5%BA%8F/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote class="blockquote-center"><p>å†’æ³¡ã€é€‰æ‹©ã€æ’å…¥ã€å¸Œå°”ã€å½’å¹¶ã€å¿«é€Ÿã€å †</p></blockquote><p><img src="/2019/03/24/ç®—æ³•/æ’åº/æ’åºåˆ†ç±».png"></p><a id="more"></a><h1 id="æ’åºç®—æ³•"><a href="#æ’åºç®—æ³•" class="headerlink" title="æ’åºç®—æ³•"></a>æ’åºç®—æ³•</h1><ul><li><p><a href="https://www.geeksforgeeks.org/" target="_blank" rel="noopener">GeeksForGeeks</a>ç½‘ç«™ç”¨äºå­¦ä¹ ç›¸åº”çš„åŸç†ä»¥åŠç¼–ç </p></li><li><p><a href="https://visualgo.net/zh" target="_blank" rel="noopener">Visualgo</a>ç½‘ç«™å¯ä»¥æŸ¥çœ‹å„ç§æ’åºç®—æ³•çš„åŠ¨å›¾ï¼Œå®¹æ˜“åŠ æ·±ç†è§£</p></li></ul><h2 id="å†’æ³¡æ’åº"><a href="#å†’æ³¡æ’åº" class="headerlink" title="å†’æ³¡æ’åº"></a>å†’æ³¡æ’åº</h2><ul><li>å¤æ‚åº¦ï¼šO(n^2)</li><li><p>æ¯æ¬¡ç¡®å®šæœ€å¤§çš„</p></li><li><p>æ­¥éª¤:</p><ol><li>ç¬¬ä¸€ä¸ªå…ƒç´ èµ·ï¼Œå‘åä¸€ä¸ªä¸ªæŒ¨ç€æ¯”è¾ƒä¸‹å»ï¼Œå¤§äºåˆ™äº¤æ¢ï¼Œä¸€ç›´åˆ°æœ€å1ä¸ªå…ƒç´ (ç¡®å®šäº†æœ€å¤§çš„)</li><li>è¿˜æ˜¯ä»ç¬¬ä¸€ä¸ªèµ·ï¼Œå‘åâ€¦ä¸€ç›´åˆ°å€’æ•°ç¬¬2ä¸ª(ç¡®å®šäº†ç¬¬2å¤§çš„)</li><li>ä¸€ç›´é‡å¤â€¦ç›´åˆ°ç¡®å®šäº†ç¬¬n-1æœ€å¤§çš„ï¼Œåˆ™ç•™ä¸‹çš„ç¬¬ä¸€ä¸ªå…ƒç´ å³ä¸ºæœ€å°</li></ol></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">bubbleSort</span><span class="params">(<span class="keyword">int</span>[] arr, <span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) </span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; n - <span class="number">1</span> - i; j++) &#123;</span><br><span class="line">      <span class="keyword">if</span> (arr[j] &gt; arr[j + <span class="number">1</span>])</span><br><span class="line">        swap(arr, j, j+<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="é€‰æ‹©æ’åº"><a href="#é€‰æ‹©æ’åº" class="headerlink" title="é€‰æ‹©æ’åº"></a>é€‰æ‹©æ’åº</h2><ul><li><p>å¤æ‚åº¦ï¼šO(n^2)</p></li><li><p>æ¯æ¬¡ç¡®å®šæœ€å°çš„</p></li><li><p>æ­¥éª¤ï¼š</p><ol><li>ç¬¬ä¸€ä¸ªå…ƒç´ èµ·ï¼Œå‘åæ‰¾ä¸€ç›´æ‰¾åˆ°æœ«å°¾ï¼Œç¡®å®šæ¯”å®ƒå°çš„æœ€å°çš„å…ƒç´ äº¤æ¢(ç¡®å®šäº†ç¬¬å°çš„)</li><li>ç¬¬äºŒä¸ªå…ƒç´ å…¶ï¼Œå‘å..(ç¡®å®šäº†ç¬¬2å°çš„)</li><li>ä¸€ç›´é‡å¤ï¼Œç›´åˆ°ç¡®å®šäº†ç¬¬n-1å°çš„ï¼Œåˆ™ç•™ä¸‹çš„æœ€åä¸€ä¸ªå…ƒç´ å³ä¸ºæœ€å¤§</li></ol></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">selectSort</span><span class="params">(<span class="keyword">int</span> arr, <span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; n; i++) &#123;</span><br><span class="line">    <span class="keyword">int</span> minIndex = i;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> j = i + <span class="number">1</span>; j &lt; n ; j++) &#123;</span><br><span class="line">      <span class="keyword">if</span> (arr[j] &lt; arr[minIndex]) &#123;</span><br><span class="line">        minIndex = j;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    swap(arr, i, minIndex);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><hr><h2 id="æ’å…¥æ’åº"><a href="#æ’å…¥æ’åº" class="headerlink" title="æ’å…¥æ’åº"></a>æ’å…¥æ’åº</h2><ul><li>å¤æ‚åº¦ï¼šO(n^2)ï¼Œæœ€ä¼˜æ—¶é€€åŒ–æˆO(n)</li><li><p>æ¯æ¬¡ç¡®å®šå‰nä¸ªæœ‰åº</p></li><li><p>æ­¥éª¤</p><ol><li>ä»ç¬¬1ä¸ªå¼€å§‹ä¸€ä¸ªä¸ªéå†ä¸‹å»</li><li>æ¯æ¬¡è®©å½“å‰ç´¢å¼•æŒ‡åˆ°çš„å…ƒç´ å‘å‰é¢çš„æœ‰åºæ•°ç»„è¿›è¡Œæ’å…¥</li></ol></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">insertionSort</span><span class="params">(<span class="keyword">int</span>[] arr, <span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; n; i++) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> j = i; j &gt; <span class="number">0</span> &amp;&amp; arr[j] &lt; arr[j - <span class="number">1</span>]; j--) &#123;   </span><br><span class="line">      swap(arr, j, j-<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//é—®é¢˜ï¼šæ¯æ¬¡ä¸€ç¢°åˆ°å°ï¼Œå°±ä¸€ç›´æ¢ï¼ˆ3æ­¥ï¼‰ç›´åˆ°ä¸å†å°</span></span><br><span class="line"><span class="comment">//æ”¹è¿›(æ›´ç¬¦åˆäººçš„æ€ç»´æ¨¡å¼çš„æ’å…¥)</span></span><br><span class="line"><span class="comment">//1.æ¯æ¬¡ç¢°åˆ°å°äº†ä¸äº¤æ¢ï¼ŒåªæŠŠè¦æ¢çš„æ•°åç§»1ä½</span></span><br><span class="line"><span class="comment">//2.é‡åˆ°ä¸å†å°æ—¶ï¼ŒæŠŠå½“å‰æ¬¡å¾ªç¯è¦å¤„ç†çš„å€¼ç§»åˆ°å½“å‰ä½ç½®å1ä½ç½®ã€‚</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">insertionSort2</span><span class="params">(<span class="keyword">int</span>[] arr, <span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; n; i++) &#123;</span><br><span class="line">    <span class="keyword">int</span> temp = arr[i];</span><br><span class="line">    <span class="keyword">int</span> j;</span><br><span class="line">    <span class="keyword">for</span> (j = i; j &gt; <span class="number">0</span> &amp;&amp; arr[j-<span class="number">1</span>] &gt; temp; j--) &#123;</span><br><span class="line">      arr[j] = arr[j - <span class="number">1</span>];</span><br><span class="line">    &#125;</span><br><span class="line">    arr[j] = temp;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ä½œç”¨"><a href="#ä½œç”¨" class="headerlink" title="ä½œç”¨"></a>ä½œç”¨</h3><ul><li><p>ç”±äºbreakçš„å­˜åœ¨ï¼Œåœ¨å¯¹å‡ ä¹å·²ç»æ’å¥½åºçš„æ•°æ®æ“ä½œæ—¶ï¼Œæ•ˆç‡é«˜ï¼Œå³å¯ä»¥è¾¾åˆ°<strong>O(n)</strong>æ•ˆç‡ã€‚</p></li><li><p>åœ¨æ•°æ®é‡å°çš„æ—¶å€™ï¼Œå¯ä»¥è€ƒè™‘ç”¨æ’å…¥ï¼Œä¸ä¸€å®šè¦é€‰æ‹©å½’å¹¶å’Œå¿«é€Ÿã€‚</p></li></ul><hr><h2 id="å¸Œå°”æ’åº"><a href="#å¸Œå°”æ’åº" class="headerlink" title="å¸Œå°”æ’åº"></a>å¸Œå°”æ’åº</h2><ul><li><p>å¤æ‚åº¦O(n^(1.3â€”2))</p></li><li><p>åŸºäºæ’å…¥æ’åºå¯¹æœ‰åºæ•ˆç‡é«˜ç‰¹ç‚¹è¿›è¡Œä¼˜åŒ–ï¼Œåˆ†ç»„å®ç°å°½å¯èƒ½æœ€å¤§åŒ–æœ‰åºï¼Œå„ç»„ä»ç”¨æ’å…¥ï¼Œå¹¶æ…¢æ…¢åŠ å¤§ç»„å†…å…ƒç´ è§„æ¨¡åŒæ—¶å‡å°‘ç»„</p></li><li><p>æ­¥éª¤</p><p>å…·ä½“å‚è€ƒ<a href="https://blog.csdn.net/qq_39207948/article/details/80006224" target="_blank" rel="noopener">å›¾è§£å¸Œå°”æ’åº</a></p><p>å…¶ä»–å…·ä½“å…³æ³¨å…¬ä¼—å·ï¼šè¶£è°ˆç¼–ç¨‹</p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">shellSort</span><span class="params">(<span class="keyword">int</span>[] arr, <span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> gap = n/<span class="number">2</span>; gap &gt; <span class="number">0</span>; gap/=<span class="number">2</span>) </span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = gap; i &lt; n; i++) &#123;</span><br><span class="line">      insertI(arr, gap, i);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">insertI</span><span class="params">(<span class="keyword">int</span>[] arr, <span class="keyword">int</span> gap, <span class="keyword">int</span> i)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">int</span> inserted = arr[i];</span><br><span class="line">  <span class="keyword">int</span> j;</span><br><span class="line">  <span class="keyword">for</span> (j = i; j &gt;= gap &amp;&amp; inserted &lt; arr[j - gap]; j -= gap)</span><br><span class="line">    arr[j] = arr[j - gap];</span><br><span class="line">  arr[j] = inserted;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ä½œç”¨-1"><a href="#ä½œç”¨-1" class="headerlink" title="ä½œç”¨"></a>ä½œç”¨</h3><p>åˆ†ç»„+æ’å…¥ï¼Œä½¿å¾—å¯¹è¾ƒå¤§è§„æ¨¡å¹¶ä¸”æ— åºçš„æ•°æ®ä¹Ÿéå¸¸æœ‰æ•ˆ</p><h2 id="å½’å¹¶æ’åº"><a href="#å½’å¹¶æ’åº" class="headerlink" title="å½’å¹¶æ’åº"></a>å½’å¹¶æ’åº</h2><ul><li><p>O(nlogn)</p></li><li><p>æ€æƒ³ï¼šåˆ†æ²»æ€æƒ³ï¼Œåˆ†æ²»(æ™®é€šäºŒåˆ†é€’å½’åˆ°åº•)ï¼Œåˆ(é‡ç‚¹ï¼ŒåŒæŒ‡é’ˆåˆ)</p></li></ul><p><img src="/2019/03/24/ç®—æ³•/æ’åº/å½’å¹¶.jpg" alt=""></p><ul><li><p>æ­¥éª¤</p><p><a href="https://mp.weixin.qq.com/s/YNF-6vY5m2Q_kEXJbep5NQ" target="_blank" rel="noopener">å›¾è§£å½’å¹¶</a></p><p><strong>å…³é”®</strong>ï¼šåˆå¹¶2ä¸ªæœ‰åºæ•°ç»„</p></li></ul><p><img src="/2019/03/24/ç®—æ³•/æ’åº/åŒæŒ‡é’ˆåˆå¹¶.png" alt=""></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">mergeSort</span><span class="params">(<span class="keyword">int</span>[] arr, <span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">  _mergeSort(arr, <span class="number">0</span>, n-<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">_mergeSort</span><span class="params">(<span class="keyword">int</span>[]arr, <span class="keyword">int</span> l, <span class="keyword">int</span> r)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (l &gt;= r) </span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  <span class="comment">//è¯¥æ­¥å¯é€‰æ‹©ï¼Œå†æ•°æ®è§„æ¨¡å°äºä¸€å®šç¨‹åº¦çš„æ—¶å€™é€‰æ‹©ä½¿ç”¨å½’å¹¶æ’åº</span></span><br><span class="line"><span class="comment">//if (r - l &lt;= 15) </span></span><br><span class="line"><span class="comment">//  return insertionSort(arr, l, r);</span></span><br><span class="line">  </span><br><span class="line">  <span class="keyword">int</span> mid = (r + l) / <span class="number">2</span>;</span><br><span class="line">  _mergeSort(arr, l, mid);</span><br><span class="line">  _mergeSort(arr, mid+<span class="number">1</span>, r);</span><br><span class="line">  <span class="keyword">if</span> (arr[mid] &gt; arr[mid + <span class="number">1</span>])</span><br><span class="line">    _merge(arr, l, mid, r);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">_merge</span><span class="params">(<span class="keyword">int</span>[] arr, <span class="keyword">int</span> l, <span class="keyword">int</span> mid, <span class="keyword">int</span> r)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">int</span>[] temp = <span class="keyword">new</span> <span class="keyword">int</span>[r - l + <span class="number">1</span>];</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; temp.length; i++) &#123;</span><br><span class="line">    temp[i] = arr[l + i];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">int</span> lp = l, rp = mid + <span class="number">1</span>;<span class="comment">//lp, rpä»£è¡¨å·¦å³æ•°ç»„æŒ‡é’ˆ</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> i = l; i &lt;= r; i++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (rp &gt; r) </span><br><span class="line">      arr[i] = temp[-l + lp++];</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (lp &gt; mid)</span><br><span class="line">      arr[i] = temp[-l + rp++];</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (temp[lp - l] &lt; temp[rp - l]) </span><br><span class="line">      arr[i] = temp[-l + lp++];</span><br><span class="line">    <span class="keyword">else</span> </span><br><span class="line">      arr[i] = temp[-l + rp++];</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="ä½œç”¨-2"><a href="#ä½œç”¨-2" class="headerlink" title="ä½œç”¨"></a>ä½œç”¨</h3><ul><li><p>é€†åºå¯¹(è¡¡é‡æ•°ç»„çš„æœ‰åºç¨‹åº¦)</p><ul><li><p>æš´åŠ›è§£æ³•ï¼šè€ƒå¯Ÿæ•°ç»„ä¸­æ¯ä¸€ä¸ªæ•°å¯¹ï¼Œå¤æ‚åº¦O(n^2)</p></li><li><p>ä½¿ç”¨å½’å¹¶</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//åªéœ€è¦åœ¨mergeæ“ä½œçš„æ—¶ï¼Œå³æŒ‡é’ˆæ•°å¤§äºå·¦æŒ‡é’ˆæ•°æ—¶ï¼Œå¢åŠ é€†åºå¯¹ä¸ªæ•° </span></span><br><span class="line">reverseCount += (mid - i + <span class="number">1</span>); <span class="comment">//ç®—é€†åºå¯¹</span></span><br></pre></td></tr></table></figure></li></ul></li></ul><hr><h2 id="å¿«é€Ÿæ’åº"><a href="#å¿«é€Ÿæ’åº" class="headerlink" title="å¿«é€Ÿæ’åº"></a>å¿«é€Ÿæ’åº</h2><ul><li><p>O(nlogn)</p></li><li><p>æ€æƒ³ï¼šåˆ†æ²»æ€æƒ³ï¼Œåˆ†(é‡ç‚¹ï¼Œæ ¹æ®ç¬¬ä¸€ä¸ªå…ƒç´ åˆ’åˆ†åŒºåŸŸ)ï¼Œåˆ(é€’å½’è¿”å›åˆä¸Šå»)</p></li><li><p>æ­¥éª¤</p><p><strong>å…³é”®</strong>ï¼šåˆ’åˆ†åŒºåŸŸ</p><p><img src="/2019/03/24/ç®—æ³•/æ’åº/partition.png" alt=""></p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">quickSort</span><span class="params">(<span class="keyword">int</span>[] arr, <span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">  _quickSort(arr, <span class="number">0</span>, n-<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">_quickSort</span><span class="params">(<span class="keyword">int</span>[] arr, <span class="keyword">int</span> l, <span class="keyword">int</span> r)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (l &gt;= r)</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  <span class="keyword">int</span> p = _partition(arr, l, r);</span><br><span class="line">  _quickSort(arr, l, p - <span class="number">1</span>);</span><br><span class="line">  _quickSort(arr, p + <span class="number">1</span>, r);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">_partition</span><span class="params">(<span class="keyword">int</span>[] arr, <span class="keyword">int</span> l, <span class="keyword">int</span> r)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">int</span> j = l, v = arr[l];</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> i = l + <span class="number">1</span>; i &lt;= r; i++) &#123;</span><br><span class="line">    <span class="keyword">if</span> (arr[i] &lt; v) </span><br><span class="line">      swap(arr, ++j, i);</span><br><span class="line">  &#125;</span><br><span class="line">  swap(arr, l, j);</span><br><span class="line">  <span class="keyword">return</span> j;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><p>ä¼˜åŒ–</p><ul><li><p>éšæœºåŒ–(æ™®é€šå’Œè¾ƒå¤§ç¨‹åº¦æœ‰åºå‡å¯)</p><p>å½“æ’åºæ•°ç»„åœ¨è¾ƒå¤§ç¨‹åº¦ä¸Šæœ‰åºçš„æƒ…å†µä¸‹</p><p><img src="/2019/03/24/ç®—æ³•/æ’åº/é€€åŒ–.png" alt=""></p><p>åˆ†åŒºåŸŸåæ ‘å°±ä¸å¹³è¡¡ï¼Œæœ€å·®æƒ…å†µé€€åŒ–æˆçº¿æ€§</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">_partition</span><span class="params">(<span class="keyword">int</span>[] arr, <span class="keyword">int</span> l, <span class="keyword">int</span> r)</span> </span>&#123;</span><br><span class="line">  <span class="comment">//éšæœºåŒ–ç¬¬ä¸€ä¸ªæ•°,æ­¤æ—¶é€€åŒ–æˆçº¿æ€§å¯èƒ½æ€§åŠå…¶ä½</span></span><br><span class="line">  <span class="keyword">int</span> random = <span class="keyword">new</span> Random().nextInt(r - l + <span class="number">1</span>) + l;</span><br><span class="line">  swap(arr, l, random);</span><br><span class="line">  <span class="keyword">int</span> j = l, v = arr[l];</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>åŒè·¯</p><p>â€‹    æœ‰å¤§é‡é‡å¤æ•°å­—ï¼Œæ­¤æ—¶å› ä¸ºä¸åˆ†ç•Œç‚¹vç›¸åŒå€¼çš„ç‚¹æœ‰å¤§é‡ï¼ŒæŒ‰ç…§ä¸Šé¢çš„æ–¹æ³•ï¼Œéƒ½æ˜¯è®©ç­‰äºvå½’äºå·¦è¾¹è¦ä¹ˆå³è¾¹ã€‚åˆä¼šå¯¼è‡´æ•°åŠå…¶ä¸å¹³è¡¡</p></li><li><p>ä¸‰è·¯ (ä¸€èˆ¬æœ‰å¤§é‡é‡å¤ä½¿ç”¨)</p><p>â€‹    é’ˆå¯¹ä¸Šé¢å¤§é‡é‡å¤æ•°å­—ï¼Œæ­¤æ³•æœ€å¥½</p><p><img src="/2019/03/24/ç®—æ³•/æ’åº/3è·¯.png" alt=""></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">_partition</span><span class="params">(<span class="keyword">int</span>[] arr, <span class="keyword">int</span> l, <span class="keyword">int</span> r)</span> </span>&#123;</span><br><span class="line">  <span class="comment">//éšæœºåŒ–ç¬¬ä¸€ä¸ªæ•°,æ­¤æ—¶é€€åŒ–æˆçº¿æ€§å¯èƒ½æ€§åŠå…¶ä½</span></span><br><span class="line">  <span class="keyword">int</span> random = <span class="keyword">new</span> Random().nextInt(r - l + <span class="number">1</span>) + l;</span><br><span class="line">  swap(arr, l, random);</span><br><span class="line">  <span class="keyword">int</span> v = arr[l];</span><br><span class="line">  <span class="keyword">int</span> lt = l, gt = r + <span class="number">1</span>; </span><br><span class="line">  <span class="comment">//for (int i = l + 1; i &lt;= r; i++) &#123;</span></span><br><span class="line">  <span class="keyword">while</span>(<span class="keyword">int</span> i &lt; gt) &#123;</span><br><span class="line">    <span class="keyword">if</span> (arr[i] &lt; v)</span><br><span class="line">      swap(arr, i++, ++lt);</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (arr[i] == v)</span><br><span class="line">      i++;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">      swap(arr, i, --gt);</span><br><span class="line">  &#125;</span><br><span class="line">  swap(arr, l, lt);</span><br><span class="line">  æ­¤æ—¶éœ€è¦<span class="keyword">return</span> lt-<span class="number">1</span>å’Œgt</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">_quickSort(arr, l, lt-<span class="number">1</span>);</span><br><span class="line">_quickSort(arr, gt, r);</span><br></pre></td></tr></table></figure></li></ul></li></ul><h3 id="ä½œç”¨-3"><a href="#ä½œç”¨-3" class="headerlink" title="ä½œç”¨"></a>ä½œç”¨</h3><ul><li><p>å–æ•°ç»„ä¸­ç¬¬nå¤§çš„å…ƒç´ (100ä¸‡ä¸ªæ•°é‡Œç¬¬100å¤§çš„å…ƒç´ )</p><ul><li><p>æ’åºO(nlogn)</p></li><li><p>å¿«é€Ÿæ’åºï¼šO(n)</p><ul><li><p>n + n/2 + n/4 + n/8 + â€¦ + 1 = O(2n);</p></li><li><p>æ¯æ¬¡ç¡®å®šçš„æ•°éƒ½æ˜¯æœ€ååœ¨æ•°ç»„ä¸­çš„ä½ç½®ï¼Œæ ¹æ®è¯¥ä½ç½®é€‰æ‹©å·¦åŒºåŸŸè¿˜æ˜¯å³åŒºåŸŸ</p></li></ul></li></ul></li></ul><hr><h2 id="å †æ’åº"><a href="#å †æ’åº" class="headerlink" title="å †æ’åº"></a>å †æ’åº</h2><ul><li><p>O(nlogn)</p></li><li><p>æ€æƒ³ï¼š</p><ul><li><p>æ³•1(è€—è´¹ç©ºé—´)</p><ul><li><p>æ„å»ºäºŒå‰æœ€å°å †ï¼Œ<strong>sift up</strong>å’Œ<strong>sift down</strong>æ“ä½œæ¥æ·»åŠ å’Œå–å‡ºå…ƒç´ </p></li><li><p>æŠŠä¸€ä¸ªæ•°ç»„è½¬æ¢æˆäºŒå‰å †</p><ul><li><p>ä¸ç”¨1ä¸ªä¸ªæ·»åŠ åˆ°ç©ºå †ï¼Œæ­¤æ—¶è¦O(nlogn)æ—¶é—´</p></li><li><p><strong>heapify</strong>:O(n) æ›´å¥½</p><ol><li><p>æ‰¾åˆ°æœ€å1ä¸ªéå¶å­ç»“ç‚¹ï¼Œä¸€ç›´ä¸Šå»åˆ°æ ¹ä¸€ç›´åšä¸‹æ²‰æ“ä½œ</p></li><li><p>å®šä½æœ€å1ä¸ªéå¶å­ç»“ç‚¹ï¼Œå°±æ˜¯æœ€å1ä¸ªèŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹</p></li></ol></li></ul></li></ul></li><li><p>æ³•2(åŸåœ°æ’åº)</p><ul><li>é¦–å…ˆè¿›è¡Œ1æ¬¡heapifyï¼Œæ„å»º1ä¸ªæœ€å¤§å †(nä¸ªå…ƒç´ )</li><li>æŠŠç¬¬ä¸€ä¸ªå…ƒç´ å’Œæœ€å1ä¸ªè¿›è¡Œäº¤æ¢ï¼Œåšshiftdownæ“ä½œï¼Œä»è€Œå†æ¬¡ä¿è¯æœ€å¤§å †(n-1ä¸ªå…ƒç´ )</li><li>ä¸€ç›´é‡å¤ç¬¬2æ­¥ç›´åˆ°æœ€ååªå‰©ä¸‹1ä¸ªå…ƒç´ ä½ç½®</li></ul></li></ul></li><li><p>æ­¥éª¤</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">heapSort</span><span class="params">(<span class="keyword">int</span>[] arr, <span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> i = (n - <span class="number">2</span>) / <span class="number">2</span>; i &gt;= <span class="number">0</span>; i--)</span><br><span class="line">    _shiftDown(arr, n, i);</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> i = n - <span class="number">1</span>; i &gt; <span class="number">0</span>; i--) &#123;</span><br><span class="line">    swap(arr, <span class="number">0</span>, i);</span><br><span class="line">    _shiftDown(arr, i, <span class="number">0</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">_shiftDown</span><span class="params">(<span class="keyword">int</span>[] arr, <span class="keyword">int</span> n, <span class="keyword">int</span> k)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">while</span>(<span class="number">2</span> * k + <span class="number">1</span> &lt; n) &#123;</span><br><span class="line">    <span class="keyword">int</span> j = <span class="number">2</span> * k + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span> (j + <span class="number">1</span> &lt; n &amp;&amp; arr[j + <span class="number">1</span>] &gt; arr[j])</span><br><span class="line">      j += <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">if</span> (arr[k] &gt;= arr[j])</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    swap(arr, k, j);</span><br><span class="line">    k = j;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h3 id="ä½œç”¨-4"><a href="#ä½œç”¨-4" class="headerlink" title="ä½œç”¨"></a>ä½œç”¨</h3><ul><li><p>å †è¿™ç§æ•°æ®ç»“æ„ï¼Œä¸ä»…ä»…åœ¨æ’åºä¸­æœ‰ç”¨ï¼Œæ›´èƒ½å¤„ç†ä¼˜å…ˆé˜Ÿåˆ—é—®é¢˜ã€‚</p></li><li><p>å¤„ç†100Wä¸ªæ•°æ®æ±‚å‰100ä¸ªæ•°æ®ï¼Œå¤æ‚åº¦O(nlogm)</p></li></ul><h1 id="æ’åºå¯¹æ¯”"><a href="#æ’åºå¯¹æ¯”" class="headerlink" title="æ’åºå¯¹æ¯”"></a>æ’åºå¯¹æ¯”</h1><p><img src="/2019/03/24/ç®—æ³•/æ’åº/æ’åºå°å¯¹æ¯”.png" alt=""></p><ul><li><p>ç¨³å®šæ€§</p><p>å¯¹äºç›¸ç­‰çš„å…ƒç´ ï¼Œåœ¨æ’åºåï¼ŒåŸæ¥é å‰çš„å…ƒç´ ä¾ç„¶é å‰ã€‚ç›¸ç­‰å…ƒç´ çš„ç›¸å¯¹ä½ç½®æ²¡æœ‰å‘ç”Ÿå˜åŒ–</p><ul><li><p>æ„ä¹‰</p><p>æ¯”å¦‚å­¦ç”Ÿæˆç»©å•å¯¹è±¡æœ‰å¾ˆå¤šå­—æ®µ(å§“åï¼Œå„ç§‘æˆç»©â€¦..)ï¼Œåˆå§‹æ˜¯æŒ‰ç…§å­¦ç”Ÿåå­—å­—å…¸åºæ’åºï¼Œç°åœ¨å¸Œæœ›é€šè¿‡æŸç§‘æˆç»©æ’åºï¼Œä½†å­¦ç”Ÿå§“åå­—å…¸åºä»ä¸å˜</p></li></ul></li><li><p>è§£å†³ä¸ç¨³å®šçš„é—®é¢˜</p><ul><li><p>é€šè¿‡è‡ªå®šä¹‰æ¯”è¾ƒå‡½æ•°</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å¢åŠ æ¯”è¾ƒæ¡ä»¶</span></span><br><span class="line"><span class="function">bool <span class="title">compareTo</span><span class="params">(Student s)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> score != s.score ?</span><br><span class="line">    score &gt; s.score :</span><br><span class="line">    name &lt; s.name;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul></li></ul><p>â€‹                                        <strong>æœªå®Œå¾…ç»­â€¦â€¦</strong></p><p><img src="/2019/03/24/ç®—æ³•/æ’åº/æ€»ç»“å›¾.png" alt=""></p>]]></content>
      
      
      <categories>
          
          <category> ç®—æ³• </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ’åº </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>æ ‘å½¢ç»“æ„</title>
      <link href="/2019/02/24/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E6%A0%91%E5%BD%A2%E7%BB%93%E6%9E%84/"/>
      <url>/2019/02/24/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E6%A0%91%E5%BD%A2%E7%BB%93%E6%9E%84/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote class="blockquote-center"><p>äºŒåˆ†æœç´¢æ ‘ï¼ˆé›†åˆã€æ˜ å°„ï¼‰ã€å †ã€çº¿æ®µæ ‘ã€å¹¶æŸ¥é›†ã€å¹³è¡¡äºŒå‰æ ‘ï¼ˆAVLã€çº¢é»‘æ ‘ã€B-Treeã€B+ Treeï¼‰ã€å“ˆå¸Œè¡¨ã€<br>æœªå®Œå¾…ç»­æ›´æ–°(çº¿æ®µæ ‘ã€Trie)</p></blockquote><p><img src="/2019/02/24/æ•°æ®ç»“æ„/æ ‘å½¢ç»“æ„/time.jpg" alt=""></p><a id="more"></a><h1 id="æ ‘å½¢ç»“æ„"><a href="#æ ‘å½¢ç»“æ„" class="headerlink" title="æ ‘å½¢ç»“æ„"></a>æ ‘å½¢ç»“æ„</h1><ul><li>æ ‘<ul><li>äºŒåˆ†æœç´¢æ ‘</li><li>å¹³è¡¡äºŒå‰æ ‘ï¼šAVLï¼›çº¢é»‘æ ‘</li><li>å †ï¼›å¹¶æŸ¥é›†</li><li>çº¿æ®µæ ‘ï¼›Trieï¼ˆå­—å…¸æ ‘ï¼Œå‰ç¼€æ ‘ï¼‰</li></ul></li></ul><h2 id="äºŒåˆ†æœç´¢æ ‘"><a href="#äºŒåˆ†æœç´¢æ ‘" class="headerlink" title="äºŒåˆ†æœç´¢æ ‘"></a>äºŒåˆ†æœç´¢æ ‘</h2><p>åŠ¨æ€æ•°æ®ç»“æ„</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Node</span> </span>&#123;</span><br><span class="line">    E e;</span><br><span class="line">    Node left;</span><br><span class="line">    Node right;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><p>ç‰¹ç‚¹</p><ul><li>æ¯ä¸ªèŠ‚ç‚¹çš„å€¼ &gt; å…¶å·¦å­æ ‘<strong>æ‰€æœ‰</strong>èŠ‚ç‚¹å€¼ï¼Œ&lt; å³å­æ ‘</li><li>æ¯æ£µå­æ ‘ä¹Ÿæ˜¯äºŒåˆ†æœç´¢æ ‘</li><li>è‡ªå®šä¹‰ç±»ï¼Œå¿…é¡»æä¾›æ¯”è¾ƒè§„åˆ™</li></ul></li><li><p>éå†ï¼šO(n)</p><ul><li><p>æ·±åº¦ä¼˜å…ˆéå†ï¼ˆä¸€æ‰åˆ°åº•ï¼‰</p><ul><li>å‰åºï¼ˆ<code>node</code>,  <code>node.left</code>,  <code>node.right</code>ï¼‰<ul><li>ä¸€èˆ¬åªæ˜¯æƒ³éå†æ‰§è¡Œæ“ä½œï¼ˆæˆ–è¾“å‡ºç»“æœï¼‰å¯é€‰ç”¨å…ˆåºéå†</li></ul></li><li>ä¸­åºï¼ˆ<code>node.left</code>,  <code>node</code>,  <code>node.right</code>ï¼‰<ul><li>ç¬¦åˆä»å°åˆ°å¤§ï¼ˆæˆ–ä»å¤§åˆ°å°ï¼‰é¡ºåºçš„ï¼Œæ•…è¦éå†è¾“å‡º<strong>æ’åº</strong>å¥½çš„ç»“æœéœ€è¦ä½¿ç”¨ä¸­åºéå†</li></ul></li><li>åç»­ï¼ˆ<code>node.left</code>,  <code>node.right</code>, <code>node</code>ï¼‰<ul><li>è‚¯å®šå·²ç»éå†è¿‡è¯¥èŠ‚ç‚¹çš„å·¦å³å­èŠ‚ç‚¹ï¼Œæ•…é€‚ç”¨äºè¦è¿›è¡Œç ´åæ€§æ“ä½œçš„æƒ…å†µï¼Œæ¯”å¦‚åˆ é™¤æ‰€æœ‰èŠ‚ç‚¹</li></ul></li></ul></li><li><p>å¹¿åº¦ä¼˜å…ˆéå†ï¼ˆæ›´å¿«æ‰¾åˆ°é—®é¢˜çš„è§£ - æœ€çŸ­è·¯å¾„ï¼‰</p><ul><li>å±‚åº</li></ul></li></ul></li></ul><h2 id="é›†åˆ-Set"><a href="#é›†åˆ-Set" class="headerlink" title="é›†åˆ(Set)"></a>é›†åˆ(Set)</h2><p>å…ƒç´ ä¸é‡å¤</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Interface Set&lt;E&gt; &#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(E)</span></span>; <span class="comment">//ä¸èƒ½æ·»åŠ é‡å¤å…ƒç´ </span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">remove</span><span class="params">(E)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">boolean</span> <span class="title">contains</span><span class="params">(E e)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">getSize</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">boolean</span> <span class="title">isEmpty</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><p>å®ç°æ–¹å¼</p><ul><li><p>äºŒåˆ†æœç´¢æ ‘ï¼ˆæœ‰åºï¼‰</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BSTSet</span>&lt;<span class="title">E</span> <span class="keyword">extends</span> <span class="title">Comparable</span>&lt;<span class="title">E</span>&gt;&gt; <span class="keyword">implements</span> <span class="title">Set</span>&lt;<span class="title">E</span>&gt;</span></span><br></pre></td></tr></table></figure><p>hï¼ˆå±‚æ•°1.2.3â€¦ï¼‰å¯¹åº”æœ‰<code>2^(h - 1)</code>ä¸ªç»“ç‚¹ã€‚æ»¡äºŒå‰æ ‘ç»“ç‚¹æ•°<code>n = 2^h - 1</code></p><p>h = log(n + 1)</p><ul><li>å¢åˆ æŸ¥çš„å¤æ‚åº¦ï¼šO(h) = O(logn)</li></ul></li><li><p>é“¾è¡¨ï¼ˆæ— åºï¼‰</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LinkedListSet</span>&lt;<span class="title">E</span>&gt; <span class="keyword">implements</span> <span class="title">Set</span>&lt;<span class="title">E</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>å¤æ‚åº¦O(n)æ•ˆç‡ä½</li><li>åŸºäºå“ˆå¸Œè¡¨æ•ˆç‡é«˜</li></ul></li></ul></li></ul><blockquote><p>å½“h = næ—¶ï¼ŒäºŒåˆ†æœç´¢æ ‘å³é€€åŒ–æˆé“¾è¡¨ã€‚</p><p>è§£å†³æ–¹æ³•ï¼šå¹³è¡¡äºŒå‰æ ‘</p></blockquote><h2 id="æ˜ å°„-Map"><a href="#æ˜ å°„-Map" class="headerlink" title="æ˜ å°„(Map)"></a>æ˜ å°„(Map)</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Map</span>&lt;<span class="title">K</span>, <span class="title">V</span>&gt; </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(K key, V value)</span></span>;</span><br><span class="line">    <span class="function">V <span class="title">remove</span><span class="params">(K key)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">boolean</span> <span class="title">contains</span><span class="params">(K key)</span></span>;</span><br><span class="line">    <span class="function">V <span class="title">get</span><span class="params">(K key)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">set</span><span class="params">(K key, V value)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">getSize</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">boolean</span> <span class="title">isEmpty</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>æ—¶é—´å¤æ‚åº¦<ul><li>é“¾è¡¨<ul><li>å¢åˆ æ”¹æŸ¥O(n)</li></ul></li><li>äºŒåˆ†æœç´¢æ ‘ <ul><li>å¢åˆ æ”¹æŸ¥O(h)  = O(logn)</li></ul></li></ul></li></ul><blockquote><p>é›†åˆï¼Œå®Œå…¨å¯ä»¥é€šè¿‡æ˜ å°„å®ç°ï¼Œåªè¦æŠŠvalueç½®ä¸ºnullå³å¯</p></blockquote><h2 id="å †"><a href="#å †" class="headerlink" title="å †"></a>å †</h2><h3 id="ä¼˜å…ˆé˜Ÿåˆ—"><a href="#ä¼˜å…ˆé˜Ÿåˆ—" class="headerlink" title="ä¼˜å…ˆé˜Ÿåˆ—"></a>ä¼˜å…ˆé˜Ÿåˆ—</h3><ul><li><p>å®ç°</p><ul><li>æ™®é€šçº¿æ€§ç»“æ„   <ul><li>å…¥é˜Ÿï¼šOï¼ˆ1ï¼‰</li><li>å‡ºé˜Ÿï¼šOï¼ˆnï¼‰</li></ul></li><li><p>é¡ºåºçº¿æ€§ç»“æ„</p><ul><li>å…¥é˜Ÿï¼šOï¼ˆnï¼‰</li><li>å‡ºé˜Ÿï¼šOï¼ˆ1ï¼‰</li></ul></li><li><p>å †</p><ul><li>å…¥é˜Ÿï¼šOï¼ˆlognï¼‰</li><li>å‡ºé˜Ÿï¼šOï¼ˆlognï¼‰</li></ul></li></ul></li></ul><h3 id="äºŒå‰å †"><a href="#äºŒå‰å †" class="headerlink" title="äºŒå‰å †"></a>äºŒå‰å †</h3><ul><li><p>ç‰¹ç‚¹</p><ul><li>å®Œå…¨äºŒå‰æ ‘ï¼ˆåŒºåˆ«æ»¡äºŒå‰æ ‘ï¼‰ï¼šæœ€åå±‚ä¸Šé¢ä¸€å±‚ä¸€å®šæ˜¯æ»¡çš„ï¼Œæœ€å1å±‚å¶å­ç»“ç‚¹ä¸€å®šåœ¨æœ€å·¦è¾¹</li><li>å †ä¸­æŸä¸ªèŠ‚ç‚¹çš„å€¼æ€»æ˜¯ &lt;= å…¶çˆ¶èŠ‚ç‚¹çš„å€¼ ï¼ˆæœ€å¤§å †ï¼‰</li></ul></li><li><p>å­˜å‚¨ç»“æ„</p><ul><li><p>æ ‘(ç•¥)</p></li><li><p>æ•°ç»„</p><p><strong>æ³¨æ„</strong>ï¼šä¸ºäº†åé¢æ±‚<code>parent</code>å’Œ<code>child</code>æ•°ç»„0å·ä½ç½®ç©ºå‡º</p></li></ul><p><img src="/2019/02/24/æ•°æ®ç»“æ„/æ ‘å½¢ç»“æ„/äºŒå‰å †.png" alt=""></p><p>ä¿ç•™ç¬¬ä¸€ä¸ªä½ç½®ï¼š</p><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">%è½¬æ¢åªè¦æŠŠåŸæ¥çš„iåœ°æ–¹ç”¨i+1æ›¿æ¢æœ€åå‡ä¸ª1å°±è¡Œ</span></span><br><span class="line">parent(<span class="built_in">i</span>) = (<span class="built_in">i</span>+<span class="number">1</span>)/<span class="number">2</span> - <span class="number">1</span> = (<span class="built_in">i</span><span class="number">-1</span>)/<span class="number">2</span></span><br><span class="line">left child(<span class="built_in">i</span>) = <span class="number">2</span>*(<span class="built_in">i</span>+<span class="number">1</span>) - <span class="number">1</span> = <span class="number">2</span>*<span class="built_in">i</span>+<span class="number">1</span>;</span><br><span class="line">right child(<span class="built_in">i</span>) = <span class="number">2</span>*(<span class="built_in">i</span>+<span class="number">1</span>)+<span class="number">1</span> - <span class="number">1</span> = <span class="number">2</span>*<span class="built_in">i</span>+<span class="number">2</span>;</span><br></pre></td></tr></table></figure></li></ul><p>  <img src="/2019/02/24/æ•°æ®ç»“æ„/æ ‘å½¢ç»“æ„/äºŒå‰å †2.png" alt=""></p><ul><li><p>æ“ä½œå †</p><ul><li><p>æ·»åŠ (<code>Sift Up</code>å †ç‰¹æœ‰ç§°è°“)</p><ul><li>å…ˆåŠ åœ¨æ•°ç»„æœ€åé¢</li><li>ç„¶åè·Ÿçˆ¶äº²æ¯”è¾ƒï¼Œä¸€å±‚å±‚æ¯”ä¸Šå»ç›´åˆ°æ ¹èŠ‚ç‚¹æˆ–è€…å°äºç­‰äºå…¶çˆ¶èŠ‚ç‚¹</li></ul></li><li><p>å–å‡ºå †ä¸­æœ€å¤§å…ƒç´ (<code>Sift Down</code>)</p><p><img src="/2019/02/24/æ•°æ®ç»“æ„/æ ‘å½¢ç»“æ„/siftdown.gif" alt=""></p></li><li><p>replace(å–å‡ºæœ€å¤§å¹¶æ›¿æ¢)</p></li><li><p>heapify(å°†ä»»æ„æ•°ç»„æ•´ç†æˆå †çš„å½¢çŠ¶)</p><ul><li><p>O(n)</p></li><li><p><strong>å…³é”®</strong>ï¼šæ‰¾åˆ°æœ€å1ä¸ªéå¶å­ç»“ç‚¹ï¼Œä¸€ç›´ä¸Šå»åˆ°æ ¹ä¸€ç›´åšä¸‹æ²‰æ“ä½œ</p><ul><li>å®šä½æœ€å1ä¸ªéå¶å­ç»“ç‚¹ï¼Œå°±æ˜¯æœ€å1ä¸ªèŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹</li></ul></li></ul></li></ul></li></ul><h3 id="ç´¢å¼•å †"><a href="#ç´¢å¼•å †" class="headerlink" title="ç´¢å¼•å †"></a>ç´¢å¼•å †</h3><h2 id="çº¿æ®µæ ‘"><a href="#çº¿æ®µæ ‘" class="headerlink" title="çº¿æ®µæ ‘"></a>çº¿æ®µæ ‘</h2><ul><li><p>å¼•å…¥</p><ul><li>åŒºé—´æŸ“è‰²</li><li>åŒºé—´æŸ¥è¯¢</li></ul><p>å¯¹äºç»™å®šåŒºé—´</p><p>æ›´æ–°ï¼šæ›´æ–°åŒºé—´ä¸­çš„ä¸€ä¸ªå…ƒç´ æˆ–è€…ä¸€ä¸ªåŒºé—´çš„å€¼</p><p>æŸ¥è¯¢ï¼šä¸€ä¸ªåŒºé—´[i, j]çš„æœ€å¤§å€¼ï¼Œæœ€å°å€¼ï¼Œæˆ–è€…åŒºé—´æ•°å­—å’Œ</p></li><li><p>ç‰¹ç‚¹</p><ul><li>å¹³è¡¡äºŒå‰æ ‘ï¼ˆæœ€å¤§å’Œæœ€å°æ·±åº¦å·®è·1ï¼‰</li></ul></li></ul><h2 id="å¹¶æŸ¥é›†"><a href="#å¹¶æŸ¥é›†" class="headerlink" title="å¹¶æŸ¥é›†"></a>å¹¶æŸ¥é›†</h2><p>Union Find</p><ul><li><p>å¤æ‚åº¦ï¼šO(log*n)     è¿‘ä¹æ˜¯O(1)</p><script type="math/tex; mode=display">\log * n=\left\{\begin{array}{cc}{0} & {\text { if }(n \leq 1)} \\ {1+\log *(\log n)} & {\text { if }(n>1)}\end{array}\right.</script></li><li><p>åœºæ™¯</p><ul><li>å¤„ç†è¿æ¥é—®é¢˜Connectivity Problem</li><li>è·¯å¾„é—®é¢˜</li><li>é›†åˆå¹¶é›†</li></ul></li><li><p>ç‰¹ç‚¹</p><ul><li>å­©å­æŒ‡å‘çˆ¶äº²</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UnionFind</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">size</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">boolean</span> <span class="title">isConnected</span><span class="params">(<span class="keyword">int</span> p, <span class="keyword">int</span> q)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">unionElements</span><span class="params">(<span class="keyword">int</span> p, <span class="keyword">int</span> q)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//é€šå¸¸è¿˜éœ€è¦ä¸€ä¸ªfindæ–¹æ³•æ¥ç¡®å®šï¼Œå½“å‰å…ƒç´ pæ‰€å¯¹åº”çš„é›†åˆ</span></span><br></pre></td></tr></table></figure></li></ul><h3 id="å®ç°"><a href="#å®ç°" class="headerlink" title="å®ç°"></a>å®ç°</h3><ul><li><p>ç”¨æ•°ç»„ï¼ŒæŸ¥O(1)ï¼Œä½†æ˜¯åˆå¹¶O(n)</p><p><img src="/2019/02/24/æ•°æ®ç»“æ„/æ ‘å½¢ç»“æ„/union.png" alt=""></p></li><li><p>æ ‘å½¢ï¼ŒæŸ¥O(logn)ï¼Œåˆå¹¶O(logn)</p><p><img src="/2019/02/24/æ•°æ®ç»“æ„/æ ‘å½¢ç»“æ„/æ ‘çŠ¶union.png" alt=""></p></li></ul><h3 id="è·¯å¾„ä¼˜åŒ–"><a href="#è·¯å¾„ä¼˜åŒ–" class="headerlink" title="è·¯å¾„ä¼˜åŒ–"></a>è·¯å¾„ä¼˜åŒ–</h3><ul><li><p>åŸºäºsizeä¼˜åŒ–</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å¼•å…¥szæ•°ç»„</span></span><br><span class="line"><span class="keyword">int</span>[] sz;  <span class="comment">//sz[i]è¡¨ç¤ºä»¥iä¸ºæ ¹çš„é›†åˆä¸­å…ƒç´ ä¸ªæ•°</span></span><br><span class="line"><span class="comment">//æ¯æ¬¡unionæ ¹æ®å¯¹åº”é›†åˆçš„sizeï¼Œå°‘çš„æŒ‡å‘å¤šçš„</span></span><br></pre></td></tr></table></figure></li><li><p>åŸºäºrankä¼˜åŒ–(æ›´åˆç†)</p><p>åŸºäºsizeï¼Œåœ¨å¦‚ä¸‹æƒ…å†µå°±ä¸é€‚ç”¨</p></li></ul><p><img src="/2019/02/24/æ•°æ®ç»“æ„/æ ‘å½¢ç»“æ„/sizeä¼˜åŒ–é—®é¢˜.png" alt=""></p><ul><li><p>è·¯å¾„å‹ç¼©(å¤šè°ƒç”¨å‡ æ¬¡ä¹Ÿèƒ½è¾¾åˆ°æœ€ä¼˜æ•ˆæœ)</p><p>å‘ç”Ÿåœ¨findæ–¹æ³•è¿‡ç¨‹</p><p><img src="/2019/02/24/æ•°æ®ç»“æ„/æ ‘å½¢ç»“æ„/è·¯å¾„å‹ç¼©.png" alt=""></p><p>åŸºäºæ€§èƒ½è€ƒè™‘ä¸ç»´æŠ¤rankï¼Œä½†rankä»å¯ä½œä¸ºå‚è€ƒ</p></li><li><p>æœ€å¤§åŒ–è·¯å¾„å‹ç¼©(é€’å½’è€—è´¹æ€§èƒ½ï¼Œå¹¶éæœ€ä¼˜)</p></li></ul><p><img src="/2019/02/24/æ•°æ®ç»“æ„/æ ‘å½¢ç»“æ„/è·¯å¾„å‹ç¼©æœ€å¤§.png" alt=""></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//å€ŸåŠ©é€’å½’å®ç°ï¼Œä¸€å½’åˆ°åº•ï¼Œé€çº§returnä¿è¯parent[i] = æ ¹</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">find</span><span class="params">(<span class="keyword">int</span> p)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (p &lt; <span class="number">0</span> || p &gt;= parent.length)</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> IllegalArgumentException(<span class="string">"p out of bound"</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (p != parent[p])</span><br><span class="line">    parent[p] = find(parent[p]);</span><br><span class="line">  <span class="keyword">return</span> parent[p];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="å¹³è¡¡äºŒå‰æ ‘"><a href="#å¹³è¡¡äºŒå‰æ ‘" class="headerlink" title="å¹³è¡¡äºŒå‰æ ‘"></a>å¹³è¡¡äºŒå‰æ ‘</h2><p>è§£å†³æ™®é€šäºŒåˆ†æœç´¢æ ‘ï¼Œæœ€å·®æ’å…¥é€€åŒ–æˆé“¾è¡¨</p><ul><li>å®šä¹‰ï¼šä»»æ„èŠ‚ç‚¹ï¼Œå·¦å³å­æ ‘çš„é«˜åº¦å·®ä¸è¶…è¿‡1</li></ul><h3 id="AVL"><a href="#AVL" class="headerlink" title="AVL"></a>AVL</h3><ul><li><p>è®¡ç®—èŠ‚ç‚¹é«˜åº¦å’Œå¹³è¡¡å› å­(å³å·¦å³å­æ ‘é«˜åº¦å·®)</p></li><li><p>å·¦ã€å³æ—‹è½¬</p><ul><li><p>LLä¸å¹³è¡¡</p><p><img src="/2019/02/24/æ•°æ®ç»“æ„/æ ‘å½¢ç»“æ„/å·¦ä¾§ä¸å¹³è¡¡.png" alt=""></p><ul><li>ğŸ’¡è§£å†³ï¼šå³æ—‹è½¬ã€‚è¯æ˜ç•¥</li></ul><p><img src="/2019/02/24/æ•°æ®ç»“æ„/æ ‘å½¢ç»“æ„/å³æ—‹è½¬.png" alt=""></p></li><li><p>RRï¼šå·¦æ—‹è½¬</p></li><li><p>LRï¼šå…ˆå¯¹x<strong>å·¦æ—‹è½¬</strong>è½¬æ¢ä¸º<strong>LL</strong>é—®é¢˜ï¼Œåœ¨å¯¹yå³æ—‹è½¬</p><p><img src="/2019/02/24/æ•°æ®ç»“æ„/æ ‘å½¢ç»“æ„/LR.png" alt=""></p></li><li><p>RLï¼šå…ˆå¯¹x<strong>å³æ—‹è½¬</strong>è½¬æ¢ä¸º<strong>RR</strong>é—®é¢˜ï¼Œåœ¨å¯¹yå·¦æ—‹è½¬</p></li></ul></li><li><p>å†æ·»åŠ å’Œåˆ é™¤æ“ä½œä¸­æ£€æŸ¥å¹³è¡¡</p></li></ul><h3 id="çº¢é»‘æ ‘"><a href="#çº¢é»‘æ ‘" class="headerlink" title="çº¢é»‘æ ‘"></a>çº¢é»‘æ ‘</h3><blockquote><p>è¦ç‚¹ï¼š</p><ol><li>çº¢é»‘æ ‘å’Œ2-3æ ‘ç­‰ä»·å…³ç³»</li><li>çº¢é»‘æ ‘5æ¡æ€§è´¨</li><li>ç‰ºç‰²å¹³è¡¡æ€§ï¼Œä¿æŒäº†â€é»‘å¹³è¡¡â€ï¼Œç»Ÿè®¡æ€§èƒ½æ›´ä¼˜</li></ol></blockquote><ul><li>ç®—æ³•å¯¼è®ºä¸­çš„å®šä¹‰  (æœ€å¤§é«˜åº¦ï¼š2logn å³æ¯ä¸ªèŠ‚ç‚¹éƒ½æ˜¯3-èŠ‚ç‚¹)<ul><li>æ¯ä¸ªèŠ‚ç‚¹çº¢çš„æˆ–é»‘çš„</li><li>æ ¹èŠ‚ç‚¹æ˜¯é»‘çš„</li><li>æ¯ä¸ªå¶å­èŠ‚ç‚¹(æœ€åçš„ç©ºèŠ‚ç‚¹)æ˜¯é»‘çš„ã€‚å®šä¹‰äº†ç©ºçš„èŠ‚ç‚¹ï¼Œä¸ºé»‘è‰²</li><li>å¦‚æœä¸€ä¸ªèŠ‚ç‚¹æ˜¯çº¢çš„ï¼Œé‚£ä¹ˆå®ƒçš„å­©å­èŠ‚ç‚¹æ˜¯é»‘çš„</li><li>ä»ä»»æ„ä¸€ä¸ªèŠ‚ç‚¹åˆ°å¶å­èŠ‚ç‚¹ï¼Œç»è¿‡çš„é»‘è‰²èŠ‚ç‚¹æ˜¯ä¸€æ ·çš„(ä¿æŒäº†â€é»‘å¹³è¡¡â€çš„äºŒå‰æ ‘)</li></ul></li></ul><h4 id="2-3æ ‘"><a href="#2-3æ ‘" class="headerlink" title="2-3æ ‘"></a>2-3æ ‘</h4><ul><li><p>ç‰¹ç‚¹</p><ul><li>æ»¡è¶³äºŒåˆ†æœç´¢æ ‘çš„åŸºæœ¬æ€§è´¨</li><li>èŠ‚ç‚¹å¯ä»¥å­˜æ”¾ä¸€ä¸ªå…ƒç´ ï¼ˆ2ä¸ªå­©å­ï¼‰æˆ–è€…ä¸¤ä¸ªå…ƒç´ (3ä¸ªå­©å­)</li><li>ç»å¯¹å¹³è¡¡ï¼Œä»»æ„èŠ‚ç‚¹å·¦å³å­æ ‘é«˜åº¦ç›¸åŒ</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"> a                    b   c</span><br><span class="line">/ \                /    |   \</span><br></pre></td></tr></table></figure></li><li><p>2-3æ ‘ç»´æŠ¤ç»å¯¹å¹³è¡¡</p><p>æ·»åŠ èŠ‚ç‚¹ä¸ä¼šæ·»åŠ åˆ°ç©ºçš„ä½ç½®</p><ul><li><p>æ’å…¥2-èŠ‚ç‚¹ï¼Œå°±æ™®é€šèåˆæ„æˆ3-èŠ‚ç‚¹å³å¯</p></li><li><p>æ’å…¥3-èŠ‚ç‚¹</p><ul><li><p>çˆ¶äº²èŠ‚ç‚¹æ˜¯2-èŠ‚ç‚¹</p><p><img src="/2019/02/24/æ•°æ®ç»“æ„/æ ‘å½¢ç»“æ„/2-3æ ‘æ·»åŠ èŠ‚ç‚¹1.png" alt=""></p></li><li><p>çˆ¶äº²èŠ‚ç‚¹æ˜¯3-èŠ‚ç‚¹</p><p>æœ€åä¸€æ­¥é€€åŒ–ç»§ç»­å‘ä¸Šèåˆåï¼Œåœ¨å‘ä¸Šé€’å½’ç›´åˆ°é‡åˆ°2-èŠ‚ç‚¹æˆ–è€…æ ¹èŠ‚ç‚¹åœæ­¢</p><p><img src="/2019/02/24/æ•°æ®ç»“æ„/æ ‘å½¢ç»“æ„/2-3æ ‘æ·»åŠ èŠ‚ç‚¹2.png" alt=""></p></li></ul></li></ul></li></ul><h4 id="è½¬æ¢ä¸ç­‰ä»·æ€§"><a href="#è½¬æ¢ä¸ç­‰ä»·æ€§" class="headerlink" title="è½¬æ¢ä¸ç­‰ä»·æ€§"></a>è½¬æ¢ä¸ç­‰ä»·æ€§</h4><ul><li>æ™®é€š2-èŠ‚ç‚¹å°±æ˜¯é»‘è‰²</li><li>3-èŠ‚ç‚¹ä¸­å°çš„é‚£ä¸ªæ•°ä¸ºçº¢è‰²ï¼Œå¤§çš„ä»ä¸ºé»‘ã€‚å› æ­¤æ‰€æœ‰çº¢è‰²èŠ‚ç‚¹éƒ½æ˜¯å·¦å€¾æ–œçš„</li></ul><p><img src="/2019/02/24/æ•°æ®ç»“æ„/æ ‘å½¢ç»“æ„/çº¢é»‘æ ‘å’Œ2-3è½¬æ¢.png" alt=""></p><p>â€‹     ä¾‹å­ï¼šæ™®é€šè½¬æ¢ç¤ºä¾‹</p><p><img src="/2019/02/24/æ•°æ®ç»“æ„/æ ‘å½¢ç»“æ„/çº¢é»‘æ ‘.png" alt=""></p><h4 id="æ·»åŠ å…ƒç´ "><a href="#æ·»åŠ å…ƒç´ " class="headerlink" title="æ·»åŠ å…ƒç´ "></a>æ·»åŠ å…ƒç´ </h4><ul><li><p>æ’å…¥åˆ°2-èŠ‚ç‚¹</p><ul><li><p>æ’å…¥å…ƒç´ æ¯”2-èŠ‚ç‚¹å°ï¼Œå°±ç›´æ¥æ·»åŠ åˆ°å·¦å­æ ‘å³å¯</p></li><li><p>æ’å…¥å…ƒç´ æ¯”2-èŠ‚ç‚¹å¤§ï¼Œéœ€è¦å·¦æ—‹è½¬</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//       node                     x</span></span><br><span class="line"><span class="comment">//      /   \     å·¦æ—‹è½¬         /  \</span></span><br><span class="line"><span class="comment">//     T1   x   ---------&gt;   node   T3</span></span><br><span class="line"><span class="comment">//         / \              /   \</span></span><br><span class="line"><span class="comment">//        T2 T3            T1   T2</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> Node <span class="title">leftRotate</span><span class="params">(Node node)</span></span>&#123;</span><br><span class="line">  node.right = x.left;</span><br><span class="line">  x.left = node;</span><br><span class="line">  x.color = node.color;</span><br><span class="line">  node.color = RED;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul></li><li><p>æ’å…¥åˆ°3-èŠ‚ç‚¹</p><ul><li><p>å½“å‰ &gt; 3-èŠ‚ç‚¹ï¼Œé¢œè‰²ç¿»è½¬</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//      42(é»‘)                  42(çº¢)</span></span><br><span class="line"><span class="comment">//    /       \      -----&gt;     /      \</span></span><br><span class="line"><span class="comment">//  37(çº¢)    66(æ–°æ’å…¥çº¢)     37(é»‘)    66(é»‘)</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">flipColors</span><span class="params">(Node node)</span></span>&#123;</span><br><span class="line">        node.color = RED;</span><br><span class="line">        node.left.color = BLACK;</span><br><span class="line">        node.right.color = BLACK;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>å½“å‰ &lt; 3-èŠ‚ç‚¹ï¼Œå³æ—‹è½¬å†é¢œè‰²ç¿»è½¬</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//      42(é»‘)      37(é»‘)          37(çº¢)</span></span><br><span class="line"><span class="comment">//     /    ---&gt;   /     \  ---&gt;  /    \</span></span><br><span class="line"><span class="comment">//  37(çº¢)     12(çº¢) 42(çº¢)  12(é»‘)42(é»‘)</span></span><br><span class="line"><span class="comment">//   /</span></span><br><span class="line"><span class="comment">// 12(æ–°æ’å…¥çº¢)</span></span><br><span class="line"><span class="comment">//---------------------------------------------</span></span><br><span class="line">    <span class="comment">//     node                   x</span></span><br><span class="line">    <span class="comment">//    /   \     å³æ—‹è½¬       /  \</span></span><br><span class="line">    <span class="comment">//   x    T2   -------&gt;   y   node</span></span><br><span class="line">    <span class="comment">//  / \                       /  \</span></span><br><span class="line">    <span class="comment">// y  T1                     T1  T2</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> Node <span class="title">rightRotate</span><span class="params">(Node node)</span></span>&#123;</span><br><span class="line">  Node x = node.left;</span><br><span class="line">  <span class="comment">// å³æ—‹è½¬</span></span><br><span class="line">  node.left = x.right;</span><br><span class="line">  x.right = node;</span><br><span class="line">  x.color = node.color;</span><br><span class="line">  node.color = RED;</span><br><span class="line">  <span class="keyword">return</span> x;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>å½“å‰åœ¨ 3-èŠ‚ç‚¹2ä¸ªæ•°å€¼ä¸­é—´ï¼Œå…ˆå·¦æ—‹è½¬å†å³æ—‹è½¬æœ€åï¼Œé¢œè‰²ç¿»è½¬</p><p><img src="/2019/02/24/æ•°æ®ç»“æ„/æ ‘å½¢ç»“æ„/RBæ·»åŠ å…ƒç´ .png" alt=""></p></li></ul></li><li><p>æœ€ç»ˆaddæ·»åŠ ç»´æŠ¤çº¢é»‘æ ‘çš„è¿‡ç¨‹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ¤æ–­èŠ‚ç‚¹nodeçš„é¢œè‰²</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">isRed</span><span class="params">(Node node)</span></span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(node == <span class="keyword">null</span>)<span class="comment">//ç©ºä¸ºé»‘</span></span><br><span class="line">    <span class="keyword">return</span> BLACK;</span><br><span class="line">  <span class="keyword">return</span> node.color;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// å‘çº¢é»‘æ ‘ä¸­æ·»åŠ æ–°çš„å…ƒç´ (key, value)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">add</span><span class="params">(K key, V value)</span></span>&#123;</span><br><span class="line">  root = add(root, key, value);</span><br><span class="line">  root.color = BLACK; <span class="comment">// æœ€ç»ˆæ ¹èŠ‚ç‚¹ä¸ºé»‘è‰²èŠ‚ç‚¹</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// è¿”å›æ’å…¥æ–°èŠ‚ç‚¹åçº¢é»‘æ ‘çš„æ ¹</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> Node <span class="title">add</span><span class="params">(Node node, K key, V value)</span></span>&#123;</span><br><span class="line">  ...</span><br><span class="line">  <span class="comment">//å³å­©å­ä¸ºçº¢è‰²ï¼Œå·¦å­©å­ä¸ºé»‘è‰²</span></span><br><span class="line">  <span class="keyword">if</span> (isRed(node.right) &amp;&amp; !isRed(node.left))</span><br><span class="line">    node = leftRotate(node);</span><br><span class="line">  <span class="comment">//å·¦å­©å­ã€å·¦å­©å­çš„å·¦å­©å­éƒ½ä¸ºçº¢</span></span><br><span class="line">  <span class="keyword">if</span> (isRed(node.left) &amp;&amp; isRed(node.left.left))</span><br><span class="line">    node = rightRotate(node);</span><br><span class="line">  <span class="comment">//å·¦ã€å³å­©å­éƒ½ä¸ºçº¢</span></span><br><span class="line">  <span class="keyword">if</span> (isRed(node.left) &amp;&amp; isRed(node.right))</span><br><span class="line">    flipColors(node);</span><br><span class="line">  <span class="keyword">return</span> node;   </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h4 id="æ€§èƒ½æ€»ç»“"><a href="#æ€§èƒ½æ€»ç»“" class="headerlink" title="æ€§èƒ½æ€»ç»“"></a>æ€§èƒ½æ€»ç»“</h4><ul><li>å®Œå…¨éšæœºæ•°æ®ï¼Œæ™®é€šBSTå³å¯ã€‚ç¼ºç‚¹ï¼šæç«¯é€€åŒ–æˆé“¾è¡¨(æˆ–é«˜åº¦ä¸å¹³è¡¡)</li><li>æŸ¥è¯¢è¾ƒå¤šï¼ŒAVLï¼Œä½†ä¿æŒå¹³è¡¡å¼€é”€æ¯”çº¢é»‘æ ‘è¦é«˜</li><li>çº¢é»‘æ ‘ç‰ºç‰²äº†å¹³è¡¡æ€§(2lognçš„é«˜åº¦)ï¼Œ<strong>ç»Ÿè®¡æ€§èƒ½æ›´ä¼˜</strong>(ç»¼åˆå¢åˆ æ”¹æŸ¥æ‰€æœ‰çš„æ“ä½œ)</li></ul><h2 id="å“ˆå¸Œè¡¨-æ•£åˆ—è¡¨"><a href="#å“ˆå¸Œè¡¨-æ•£åˆ—è¡¨" class="headerlink" title="å“ˆå¸Œè¡¨(æ•£åˆ—è¡¨)"></a>å“ˆå¸Œè¡¨(æ•£åˆ—è¡¨)</h2><ul><li><p>ç»å…¸è®¾è®¡æ€æƒ³ï¼šç©ºé—´æ¢æ—¶é—´</p></li><li><p>ä»€ä¹ˆæ˜¯å“ˆå¸Œè¡¨ï¼Ÿ</p><ul><li><p>ä¾‹å­</p><p>â€‹    ä¾‹å¦‚å•è¯ï¼ˆåªå«å°å†™å­—æ¯ï¼‰å­—æ¯é¢‘ç‡ç»Ÿè®¡ï¼Œ<code>int[26] freq</code> å°±æ˜¯ä¸€ä¸ªå“ˆå¸Œè¡¨ã€‚æ¯ä¸€ä¸ªå­—ç¬¦éƒ½å’Œä¸€ä¸ªç´¢å¼•ç›¸å¯¹åº”</p></li><li><p>å“ˆå¸Œå‡½æ•° (â€œé”®â€è½¬æ¢ä¸ºâ€ç´¢å¼•â€)</p><ul><li><p><code>ch - &#39;a&#39;</code></p><p>å­—ç¬¦è½¬æ¢ä¸ºç´¢å¼•çš„å‡½æ•° </p></li></ul></li><li><p>å“ˆå¸Œå†²çª</p><p><img src="/2019/02/24/æ•°æ®ç»“æ„/æ ‘å½¢ç»“æ„/å“ˆå¸Œå†²çª.png" alt=""></p></li></ul></li></ul><h3 id="å“ˆå¸Œå‡½æ•°è®¾è®¡"><a href="#å“ˆå¸Œå‡½æ•°è®¾è®¡" class="headerlink" title="å“ˆå¸Œå‡½æ•°è®¾è®¡"></a>å“ˆå¸Œå‡½æ•°è®¾è®¡</h3><ul><li><p>åŸåˆ™</p><p>â€œé”®â€è½¬æ¢ä¸ºâ€ç´¢å¼•â€</p><ul><li>ä¸€è‡´æ€§ï¼šif a = b åˆ™hash(a)  =  hash(b)ä¹Ÿä¸€å®šç›¸ç­‰</li><li>é«˜æ•ˆæ€§ï¼šè®¡ç®—é«˜æ•ˆç®€ä¾¿</li><li>å‡åŒ€æ€§ï¼šå“ˆå¸Œå€¼å‡åŒ€åˆ†å¸ƒ</li></ul></li><li><p>å¯¹è±¡</p><ul><li><p>å¤§æ•´æ•°</p><ul><li>%Mï¼Œæ¨¡ä¸€ä¸ªç´ æ•°(æ•°è®ºç›¸å…³)ï¼Œç´ æ•°é€‰æ‹©ä¸Šç½‘æŸ¥ï¼Œè¯¥ç´ æ•°å³å“ˆå¸Œè¡¨å¤§å°</li></ul></li><li><p>æµ®ç‚¹æ•°</p><ul><li>å†…å­˜ç©ºé—´å½“åšintã€longæ¥å¤„ç†è½¬æ¢ä¸ºå¤§æ•´æ•°çš„é—®é¢˜</li></ul></li><li><p>å­—ç¬¦ä¸²</p><ul><li>çœ‹åšæ˜¯1ä¸ªB(baseç”¨æˆ·å¯é€‰ï¼Œå¦‚å…¨æ˜¯å°å†™å­—æ¯ï¼Œå°±ä¸º26)è¿›åˆ¶çš„å¤§æ•´å½¢</li></ul><p><img src="/2019/02/24/æ•°æ®ç»“æ„/æ ‘å½¢ç»“æ„/å­—ç¬¦ä¸²è½¬å“ˆå¸Œ.png" alt=""></p></li><li><p>ç¬¦åˆç±»å‹</p><ul><li>å¯ä»¥å¥—ç”¨å­—ç¬¦ä¸²çš„å¤„ç†æ–¹æ³•ï¼Œæ¯ä¸ªå­—ç¬¦å¯ä»¥å¯¹åº”ä¸€ä¸ªå­—æ®µï¼ŒJavaä¸­è¿›åˆ¶Bå–äº†31ã€‚</li></ul></li></ul></li><li><p>Javaä¸­çš„hashCode</p><blockquote><p>æ³¨æ„ï¼šhashCodeåªæ˜¯æŠŠâ€é”®â€è½¬åŒ–æˆäº†ä¸€ä¸ªæ•´å‹å€¼ï¼Œå…·ä½“è¦è½¬æ¢ä¸ºâ€ç´¢å¼•â€ï¼Œè¿˜éœ€è¦%Mï¼Œè¿™ä¸ªéœ€è¦åœ¨è‡ªå·±è®¾è®¡çš„å“ˆå¸Œè¡¨çš„ç±»ä¸­å†…éƒ¨é€»è¾‘æ¥å®Œæˆ</p></blockquote></li></ul><h3 id="å“ˆå¸Œå†²çªå¤„ç†"><a href="#å“ˆå¸Œå†²çªå¤„ç†" class="headerlink" title="å“ˆå¸Œå†²çªå¤„ç†"></a>å“ˆå¸Œå†²çªå¤„ç†</h3><ul><li><p>é“¾åœ°å€æ³•(Seperate Chaining)</p><ul><li>ä¿è¯hashCodeä¸ºæ­£æ•° &amp;0x7fffffffï¼Œå–æ¨¡</li></ul><p><img src="/2019/02/24/æ•°æ®ç»“æ„/æ ‘å½¢ç»“æ„/é“¾åœ°å€æ³•.png" alt=""></p><ul><li>æ¯ä¸€ä¸ªç´¢å¼•å­˜å‚¨çš„æŸ¥æ‰¾è¡¨ï¼Œç”¨æ ‘æ›¿ä»£</li></ul><p><img src="/2019/02/24/æ•°æ®ç»“æ„/æ ‘å½¢ç»“æ„/å“ˆå¸Œè¡¨æœ€ç»ˆè®¾è®¡.png" alt=""></p><blockquote><p><strong>æ³¨æ„</strong>ï¼šè½¬æˆçº¢é»‘æ ‘ä¹Ÿæ˜¯æœ‰æ¡ä»¶çš„ï¼Œå¦‚æœKeyä¸å…·æœ‰å¯æ¯”è¾ƒæ€§é‚£ä¸èƒ½è½¬</p></blockquote></li><li><p>å¼€æ”¾åœ°å€æ³•</p><ul><li>çº¿æ€§æ¢æµ‹ï¼šæ•ˆç‡ä½</li><li>å¹³æ–¹æ¢æµ‹ï¼š1+4+9+16â€¦</li><li>äºŒæ¬¡å“ˆå¸Œ</li></ul></li><li>å†å“ˆå¸Œæ³•</li><li>Coalesced Hashingï¼šç»¼åˆé“¾åœ°å€æ³•å’Œå¼€æ”¾åœ°å€å‘</li></ul><h3 id="å¤æ‚åº¦åˆ†æ"><a href="#å¤æ‚åº¦åˆ†æ" class="headerlink" title="å¤æ‚åº¦åˆ†æ"></a>å¤æ‚åº¦åˆ†æ</h3><ul><li><p>å¹³å‡å¤æ‚åº¦</p><p>æ€»å…±Mä¸ªåœ°å€ï¼Œå¦‚æœæ”¾å…¥å“ˆå¸Œè¡¨çš„å…ƒç´ ä¸ºNï¼Œå“ˆå¸Œç¢°æ’å¯¼è‡´å¹³å‡å¤æ‚åº¦å¦‚ä¸‹</p><ul><li>é“¾è¡¨ï¼šO(N/M)</li><li>å¹³è¡¡æ ‘ï¼šO(log(N/M))</li></ul></li><li><p>ä¼˜åŒ–è¶‹äºå‡æ‘Šå¤æ‚ O(1)</p><ul><li><p>åŠ¨æ€ç©ºé—´å¤„ç†</p><ul><li>å¹³å‡æ¯ä¸ªåœ°å€æ‰¿è½½çš„å…ƒç´ å¤šè¿‡ä¸€å®šç¨‹åº¦ï¼Œå³æ‰©å®¹ <code>N / M &gt;= upperTol</code></li><li>å¹³å‡æ¯ä¸ªä¸ªåœ°å€â€¦å°‘â€¦ï¼Œç¼©å®¹<code>N / M &lt; lowerTol</code></li></ul></li><li><p>å®¹é‡å˜æ¢åMå¯èƒ½ä¸æ˜¯ç´ æ•°</p><ul><li>æ„å»ºç´ æ•°æ•°ç»„ï¼Œé€šè¿‡ç´¢å¼•å¢åŠ æ¥æ”¹å˜Må¤§å°</li></ul></li></ul></li></ul><h2 id="B-æ ‘"><a href="#B-æ ‘" class="headerlink" title="B-æ ‘"></a>B-æ ‘</h2><ul><li><p>ä¸ºä»€ä¹ˆä¸ç”¨äºŒåˆ†æœç´¢æˆ–è€…çº¢é»‘æ ‘ï¼Ÿ</p><p>â€‹    ç£ç›˜IOï¼Œdbç´¢å¼•å­˜å‚¨åœ¨diskä¸Šï¼Œæ•°æ®é‡å¤§ï¼Œç´¢å¼•å¯èƒ½æœ‰å‡ ä¸ªGã€‚å½“æŸ¥è¯¢æ—¶ï¼Œæ˜¾ç„¶ä¸å¯èƒ½æŠŠæ•´ä¸ªç´¢å¼•å…¨éƒ¨åŠ è½½åˆ°å†…å­˜ã€‚èƒ½åšåªæœ‰é€ä¸€åŠ è½½æ¯ä¸ªç£ç›˜é¡µ(ç´¢å¼•æ ‘çš„èŠ‚ç‚¹)ã€‚</p><blockquote><p>æ³¨æ„ï¼šå®é™…æ˜¯ä»¥ç£ç›˜å—ä¸ºå•ä½è¯»å–ï¼Œè€ŒInnoDBå­˜å‚¨å¼•æ“æ˜¯ä»¥é¡µä¸ºæœ€å°å•ä½ç®¡ç†ï¼Œæ–¹ä¾¿èµ·è§ç§°ç£ç›˜é¡µ</p></blockquote><ul><li><p>egï¼šå¦‚æœæ‹¿h=4çš„äºŒåˆ†æœç´¢æ‰¾10</p><p><img src="/2019/02/24/æ•°æ®ç»“æ„/æ ‘å½¢ç»“æ„/B-treeå¼•å…¥ä¾‹å­.png" alt=""></p><ul><li>ç¬¬ä¸€æ¬¡ç£ç›˜IOï¼Œæ‰¾9</li><li>ç¬¬2æ¬¡ï¼Œæ‰¾13</li><li>ç¬¬3æ¬¡ï¼Œæ‰¾11</li><li>ç¬¬4æ¬¡ï¼Œæ‰¾åˆ°10</li></ul><p>ç£ç›˜IOçš„æ¬¡æ•°æ˜¯ç”±æ ‘çš„é«˜åº¦æ‰€å†³å®š</p><p>å› æ­¤ä¸ºäº†å‡å°‘ç£ç›˜IOçš„æ¬¡æ•°ï¼Œ<strong>æ ¸å¿ƒæ€æƒ³</strong>ï¼šå°±éœ€è¦æŠŠåŸæ¥â€<strong>ç˜¦é«˜</strong>â€œçš„æ ‘ç»“æ„ï¼Œå˜å¾—â€<strong>çŸ®èƒ–</strong>â€œ</p></li></ul></li><li><p>ç‰¹ç‚¹</p><p>å¤šè·¯å¹³è¡¡äºŒå‰æ ‘ï¼Œæ¯ä¸ªèŠ‚ç‚¹æœ€å¤šåŒ…å«kä¸ªå­©å­(ç§°â€Bæ ‘çš„é˜¶â€)ã€‚kçš„å¤§å°å–å†³äºç£ç›˜é¡µçš„å¤§å°</p><p>mé˜¶Bæ ‘çš„ç‰¹å¾ï¼š</p><ul><li>æ ¹èŠ‚ç‚¹è‡³å°‘2ä¸ªå­å¥³</li><li>æ¯ä¸ªä¸­é—´èŠ‚ç‚¹éƒ½åŒ…å«k-1ä¸ªå…ƒç´ å’Œkä¸ªå­©å­ï¼Œ(å…¶ä¸­$\frac{m}{2} \leq k  \leq m$)</li><li>å’Œä¸Šé¢ä¸€æ¡ä¸€æ ·ï¼Œæ¯ä¸ªå¶å­èŠ‚ç‚¹éƒ½åŒ…å«k-1ä¸ªå…ƒç´ ï¼Œ(å…¶ä¸­$\frac{m}{2} \leq k  \leq m$)</li><li>æ‰€æœ‰å¶å­å¶å­èŠ‚ç‚¹éƒ½ä½äºåŒä¸€å±‚</li><li><p>æ¯ä¸ªèŠ‚ç‚¹ä¸­çš„å…ƒç´ ä»å°åˆ°å¤§æ’åˆ—ï¼ŒèŠ‚ç‚¹å½“ä¸­k-1ä¸ªå…ƒç´ æ­£å¥½æ˜¯kä¸ªå­©å­åŒ…å«çš„å…ƒç´ çš„å€¼åŸŸåˆ†åˆ’ã€‚</p></li><li><p>egï¼š</p><ul><li>æŸ¥æ‰¾æ“ä½œï¼š3é˜¶B-æ ‘ä¸ºä¾‹ï¼ˆå°±æ˜¯2-3æ ‘ï¼‰ï¼Œæ‰¾5çš„è¿‡ç¨‹</li></ul><p><img src="/2019/02/24/æ•°æ®ç»“æ„/æ ‘å½¢ç»“æ„/B-tree.png" alt="">æ•´ä¸ªæµç¨‹ï¼ŒæŸ¥è¯¢æ¬¡æ•°ä¸€ç‚¹ä¹Ÿä¸å¿…äºŒåˆ†æœç´¢æ ‘å°‘ï¼Œ<strong>ä½†ç›¸æ¯”ç£ç›˜IOçš„é€Ÿåº¦ï¼Œå†…å­˜ä¸­çš„æ¯”è¾ƒè€—æ—¶å‡ ä¹å¯ä»¥å¿½ç•¥</strong>ã€‚å› æ­¤åªè¦æ ‘çš„é«˜åº¦å¤Ÿä½ï¼ŒIOæ¬¡æ•°è¶³å¤Ÿå°‘ï¼Œå°±èƒ½æé«˜æ€§èƒ½ã€‚</p><ul><li><p>æ·»åŠ ã€åˆ é™¤æ“ä½œ</p><p>å’Œ2-3æ ‘æ·»åŠ æ•°æ®ä¸€æ ·ï¼Œä¿æŒå®Œå…¨å¹³è¡¡</p></li></ul></li></ul></li><li><p>åº”ç”¨</p><ul><li>æ–‡ä»¶ç³»ç»Ÿä»¥åŠéƒ¨åˆ†æ•°æ®åº“ç´¢å¼•ï¼Œæ¯”å¦‚è‘—åçš„MongoDBï¼Œå¤§éƒ¨åˆ†å…³ç³»å‹æ•°æ®åº“ï¼Œåˆ™ä½¿ç”¨B+æ ‘ä½œä¸ºç´¢å¼•</li></ul></li></ul><h2 id="B-æ ‘-1"><a href="#B-æ ‘-1" class="headerlink" title="B+æ ‘"></a>B+æ ‘</h2><ul><li><p>ç‰¹ç‚¹</p><ul><li>æœ‰kä¸ªå­æ ‘çš„ä¸­é—´èŠ‚ç‚¹åŒ…å«æœ‰kä¸ªå…ƒç´ ï¼ˆBæ ‘ä¸­æ˜¯k-1ä¸ªå…ƒç´ ï¼‰ï¼Œæ¯ä¸ªå…ƒç´ ä¸ä¿å­˜æ•°æ®ï¼Œåªç”¨æ¥ç´¢å¼•ï¼Œæ‰€æœ‰æ•°æ®éƒ½ä¿å­˜åœ¨å¶å­èŠ‚ç‚¹ã€‚</li><li>æ‰€æœ‰çš„å¶å­ç»“ç‚¹ä¸­åŒ…å«äº†å…¨éƒ¨å…ƒç´ çš„ä¿¡æ¯ï¼ŒåŠæŒ‡å‘å«è¿™äº›å…ƒç´ è®°å½•çš„æŒ‡é’ˆï¼Œä¸”å¶å­ç»“ç‚¹æœ¬èº«ä¾å…³é”®å­—çš„å¤§å°è‡ªå°è€Œå¤§é¡ºåºé“¾æ¥ã€‚</li><li>æ‰€æœ‰çš„ä¸­é—´èŠ‚ç‚¹å…ƒç´ éƒ½åŒæ—¶å­˜åœ¨äºå­èŠ‚ç‚¹ï¼Œåœ¨å­èŠ‚ç‚¹å…ƒç´ ä¸­æ˜¯æœ€å¤§ï¼ˆæˆ–æœ€å°ï¼‰å…ƒç´ ã€‚</li></ul><p><img src="/2019/02/24/æ•°æ®ç»“æ„/æ ‘å½¢ç»“æ„/b+æ ‘.png" alt=""></p><blockquote><p>æ³¨æ„ï¼šæ ¹èŠ‚ç‚¹çš„æœ€å¤§å…ƒç´ ï¼Œä¹Ÿæ˜¯æ˜¯æ•´ä¸ªB+æ ‘çš„æœ€å¤§å…ƒç´ ã€‚ä¼˜åŒ–æ— è®ºæ’å…¥æˆ–è€…åˆ é™¤å…ƒç´ ï¼Œè®°å¾—ç»´æŠ¤ã€‚</p></blockquote></li><li><p>å«æ˜Ÿæ•°æ®</p><p>å®é™…å°±æ˜¯æ•°æ®è®°å½•è¡Œï¼Œåœ¨B+æ ‘ä¸­åªæœ‰å¶å­èŠ‚ç‚¹å¸¦å«æ˜Ÿæ•°æ®ï¼Œå…¶ä»–ä¸­é—´èŠ‚ç‚¹åªæ˜¯ç´¢å¼•</p><ul><li>èšé›†ç´¢å¼•ï¼šå¶å­èŠ‚ç‚¹ç›´æ¥åŒ…å«å«æ˜Ÿæ•°æ®</li><li>éèšé›†ï¼šåŒ…å«çš„æ˜¯å«æ˜Ÿæ•°æ®çš„æŒ‡é’ˆ</li></ul></li><li><p>ä¼˜ç‚¹</p><ul><li><p>å•è¡ŒæŸ¥è¯¢ï¼šegï¼šä¸Šé¢æŸ¥3</p><p>(8,15) -&gt; (2, 5, 8) -&gt; (3, 5)ï¼Œçœ‹ä¼¼è¿‡ç¨‹å’ŒB-treeå·®ä¸å¤š</p><ul><li>B+ treeä¸­é—´èŠ‚ç‚¹æ— å«æ˜Ÿæ•°æ®ï¼ŒåŒæ ·å¤§å°ç£ç›˜é¡µå¯å®¹çº³æ›´å¤šèŠ‚ç‚¹å…ƒç´ (æ›´â€çŸ®èƒ–â€)ã€<strong>IOå°‘</strong></li><li><strong>æŸ¥è¯¢æ€§èƒ½ç¨³å®š</strong>ï¼Œä¸€å®šä¼šæ‰¾åˆ°å¶å­èŠ‚ç‚¹ï¼Œè€ŒB-treeåˆ™ä¸ç¨³å®š</li></ul></li><li><p><strong>èŒƒå›´æŸ¥è¯¢ç®€ä¾¿</strong></p><p>B-treeä¸­è¦ä¾é ä¸­åºéå†ï¼Œå¤æ‚ã€‚</p><p>B+treeåªè¦æ‰¾åˆ°ä¸‹é™ï¼Œæ ¹æ®é“¾è¡¨æŒ‡é’ˆæ‰¾åˆ°ä¸Šé™å³å¯</p></li></ul></li></ul><h2 id="æœªå®Œå¾…ç»­æ›´æ–°"><a href="#æœªå®Œå¾…ç»­æ›´æ–°" class="headerlink" title="æœªå®Œå¾…ç»­æ›´æ–°"></a>æœªå®Œå¾…ç»­æ›´æ–°</h2>]]></content>
      
      
      <categories>
          
          <category> æ•°æ®ç»“æ„ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> éçº¿æ€§ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>çº¿æ€§æ•°æ®ç»“æ„</title>
      <link href="/2019/02/10/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E7%BA%BF%E6%80%A7%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/"/>
      <url>/2019/02/10/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/%E7%BA%BF%E6%80%A7%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote class="blockquote-center"><p>æ—¶é—´å¤æ‚åº¦ã€æ•°ç»„ã€æ ˆã€é˜Ÿåˆ—ã€é“¾è¡¨</p></blockquote><p><img src="https://image-link.nos-eastchina1.126.net/linearDS"></p><a id="more"></a><h1 id="å¤æ‚åº¦ä»‹ç»"><a href="#å¤æ‚åº¦ä»‹ç»" class="headerlink" title="å¤æ‚åº¦ä»‹ç»"></a>å¤æ‚åº¦ä»‹ç»</h1><ul><li><p>è¡¡é‡ä»£ç å¥½åæŒ‡æ ‡</p><ul><li>è¿è¡Œæ—¶é—´ï¼ˆæ—¶é—´å¤æ‚åº¦ï¼‰</li><li>å ç”¨ç©ºé—´ï¼ˆç©ºé—´å¤æ‚åº¦ï¼‰</li></ul></li><li><p>æ—¶é—´å¤æ‚åº¦</p><p>ç”±äºè¿è¡Œç¯å¢ƒå’Œè¾“å…¥è§„æ¨¡çš„å½±å“ï¼Œä»£ç ç»å¯¹æ—¶é—´æ— æ³•ä¼°è®¡ï¼Œä½†å¯é¢„ä¼°ä»£ç çš„åŸºæœ¬æ“ä½œ<strong>æ‰§è¡Œæ¬¡æ•°</strong></p><p>è®¡ç®—å¾—å‡ºT(n) = â€¦.è¡¨è¾¾å¼</p><ul><li><p>æ¸è¿›æ—¶é—´å¤æ‚åº¦</p><p>å½“nè¶‹äº âˆ çš„æ—¶å€™å¾—åˆ°çš„æå€¼</p><ul><li>è¿è¡Œæ—¶é—´ä¸ºå¸¸æ•°é‡çº§ï¼ŒO ï¼ˆ1ï¼‰</li><li>åªä¿ç•™æ—¶é—´å‡½æ•°ä¸­æœ€é«˜é˜¶é¡¹ï¼Œä¸”çœå»æœ€é«˜é˜¶å‰ç³»æ•°</li><li>å¸¸è§æœ‰Oï¼ˆ1ï¼‰&lt; Oï¼ˆlognï¼‰&lt; Oï¼ˆnï¼‰&lt; Oï¼ˆn^2ï¼‰</li></ul></li></ul></li></ul><h1 id="çº¿æ€§æ•°æ®ç»“æ„"><a href="#çº¿æ€§æ•°æ®ç»“æ„" class="headerlink" title="çº¿æ€§æ•°æ®ç»“æ„"></a>çº¿æ€§æ•°æ®ç»“æ„</h1><ul><li><p>åº•å±‚ä¾æ‰˜é™æ€æ•°ç»„</p><p>ï¼ˆArrayListã€æ•°ç»„æ ˆã€æ•°ç»„é˜Ÿåˆ—ï¼‰</p><ul><li>ä¼˜<ul><li>æœ‰éšæœºè®¿é—®èƒ½åŠ›ï¼Œindex</li></ul></li><li>ç¼º<ul><li>é resizeè§£å†³å›ºå®šå®¹é‡é—®é¢˜</li></ul></li></ul></li><li><p>çœŸæ­£åŠ¨æ€æ•°æ®ç»“æ„ï¼ˆæ— éœ€è€ƒè™‘å®¹é‡ï¼‰</p><p>ï¼ˆé“¾è¡¨LinkedListã€é“¾è¡¨æ ˆã€é“¾è¡¨é˜Ÿåˆ—ï¼‰</p><ul><li>ä¼˜<ul><li>çœŸæ­£åŠ¨æ€ï¼Œä¸éœ€è¦å¤„ç†å›ºå®šå®¹é‡é—®é¢˜</li></ul></li><li>ç¼º<ul><li>ä¸§å¤±éšæœºè®¿é—®èƒ½åŠ›</li></ul></li></ul></li></ul><h2 id="åŠ¨æ€æ•°ç»„"><a href="#åŠ¨æ€æ•°ç»„" class="headerlink" title="åŠ¨æ€æ•°ç»„"></a>åŠ¨æ€æ•°ç»„</h2><h3 id="ArrayList"><a href="#ArrayList" class="headerlink" title="ArrayList"></a>ArrayList</h3><blockquote><p>æ³¨æ„</p><ul><li>å‚æ•°æœ‰indexï¼Œéƒ½éœ€è¦ç•Œé™åˆ¤æ–­</li><li>å®¹é‡capacityä¸å¤Ÿï¼ŒåŠ å€;   åˆ é™¤å¯¼è‡´å®¹é‡è¿‡å¤šï¼Œå‡åŠ</li></ul></blockquote><ul><li><p>å¤æ‚åº¦åˆ†æ</p><ul><li><p>æ·»åŠ æ“ä½œï¼š<code>O(n)</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">addLast(e)  O(<span class="number">1</span>)</span><br><span class="line">addFirst(e)  O(n)    </span><br><span class="line">add(index, e)  O(n) ç®—æœŸæœ›ä¸ºn/<span class="number">2</span></span><br></pre></td></tr></table></figure></li><li><p>åˆ é™¤æ“ä½œï¼š<code>O(n)</code></p><p>åŒæ·»åŠ </p></li><li><p>ä¿®æ”¹æ“ä½œï¼šå·²çŸ¥ç´¢å¼•<code>O(1)</code>ï¼›æœªçŸ¥ç´¢å¼•<code>O(n)</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set(index, e)O(<span class="number">1</span>):æ”¯æŒéšæœºè®¿é—®</span><br></pre></td></tr></table></figure></li><li><p>æŸ¥æ‰¾æ“ä½œï¼šå·²çŸ¥ç´¢å¼•<code>O(1)</code>ï¼›æœªçŸ¥ç´¢å¼•<code>O(n)</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">get(index)O(<span class="number">1</span>)</span><br><span class="line">contain(e)O(n)</span><br><span class="line">find(e)O(n)</span><br></pre></td></tr></table></figure></li></ul></li><li><p>å‡æ‘Šæ—¶é—´å¤æ‚åº¦</p><p>ç”±äº<code>resize</code>æ“ä½œçš„å­˜åœ¨ï¼Œä¸å¯èƒ½æ¯æ¬¡æ·»åŠ éƒ½ä¼šè§¦å‘ã€‚</p><p>å‡è®¾<code>capacity = n</code>ï¼Œn+1æ¬¡<code>addLast</code>ï¼Œè§¦å‘1æ¬¡<code>resize</code>ï¼Œæ€»å…±è¿›è¡Œ2n+1æ¬¡åŸºæœ¬æ“ä½œã€‚</p><p>ï¼ˆ2n+1ï¼‰/ï¼ˆn+1ï¼‰â‰ˆ 2ï¼Œ æ‰€ä»¥å‡æ‘Šæ—¶é—´å¤æ‚åº¦ä¸ºO(1)</p></li><li><p>å¤æ‚åº¦éœ‡è¡çš„é—®é¢˜</p><p>åœ¨capacityä¸´ç•Œçš„åœ°æ–¹ï¼Œäº¤æ›¿æ‰§è¡Œ<code>addLast</code>å’Œ<code>removeLast</code>ä¼šå‡ºç°é¢‘ç¹æ‰©å®¹ç¼©å®¹ã€‚</p><p>è§£å†³ï¼šLazyï¼Œå½“size == capacity / 4æ—¶ï¼Œå†å‡å»ä¸€åŠã€‚</p></li></ul><h3 id="LinkedList"><a href="#LinkedList" class="headerlink" title="LinkedList"></a>LinkedList</h3><ul><li><p>èŠ‚ç‚¹</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Node</span> </span>&#123;</span><br><span class="line">    E e;</span><br><span class="line">    Node next;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><blockquote><p>â˜…è®¾ç«‹è™šæ‹Ÿå¤´ç»“ç‚¹dummyHead</p><ol><li>ä¸ºäº†è§£å†³ï¼Œç”±äºå¤´ä½ç½®æ²¡æœ‰å‰èŠ‚ç‚¹ï¼Œæœ‰äº›æ“ä½œï¼ˆå¯»æ‰¾Predecessorï¼‰éœ€è¦åŒºåˆ«å¯¹å¾…çš„é—®é¢˜</li><li>ä¸ºç»Ÿä¸€æ“ä½œï¼Œæ•…è€Œæ·»åŠ </li></ol></blockquote><ul><li><p>æ—¶é—´å¤æ‚åº¦</p><ul><li>å¢     <code>O(n)</code><ul><li>addLast                  O(n) </li><li>addFirst                  O(1)</li><li>add                          O(n/2)=O(n)</li></ul></li><li>åˆ     <code>O(n)</code><ul><li>removeLast            O(n) </li><li>removeFirst           O(1)</li><li>remove                   O(n/2)=O(n)</li></ul></li><li><p>æ”¹    <code>O(n)</code></p></li><li><p>æŸ¥    <code>O(n)</code></p><ul><li>get                           O(n)</li><li>contains                  O(n)</li></ul></li></ul><blockquote><p>å°ç»“</p></blockquote><ol><li>å¦‚æœåªå¯¹é“¾è¡¨å¤´è¿›è¡Œæ“ä½œï¼šO(1)</li><li>ä¸€èˆ¬ä¸è¿›è¡Œä¿®æ”¹æ“ä½œ</li><li>åªæŸ¥è¡¨å¤´å…ƒç´  O(1)</li></ol></li></ul><blockquote><p><strong>å¼•ç”³</strong></p><ol><li>åŒé“¾è¡¨</li><li>å¾ªç¯é“¾è¡¨ï¼Œjdkå†…éƒ¨å®ç°æ–¹å¼ï¼ŒnullèŠ‚ç‚¹ä¸ºè™šæ‹Ÿå¤´ç»“ç‚¹</li><li>æ•°ç»„é“¾è¡¨</li></ol></blockquote><h2 id="æ ˆ"><a href="#æ ˆ" class="headerlink" title="æ ˆ"></a>æ ˆ</h2><p>ç›¸å½“äºæ•°ç»„æ“ä½œçš„ä¸€ä¸ªå­é›†ã€‚åè¿›å…ˆå‡ºLast In First Outï¼ˆLIFOï¼‰</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ¥å£</span></span><br><span class="line">Interface Stack&lt;E&gt; &#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">push</span><span class="params">(E)</span></span>;</span><br><span class="line">    <span class="function">E <span class="title">pop</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function">E <span class="title">peek</span><span class="params">()</span></span>; <span class="comment">//æ ˆé¡¶å…ƒç´ </span></span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">getSize</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">boolean</span> <span class="title">isEmpty</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><p>æ—¶é—´å¤æ‚åº¦</p><ul><li><p>ArrayStackï¼ˆæ•°ç»„æ ˆï¼‰</p><ul><li>push        O(1) å‡æ‘Š</li><li>pop              O(1) å‡æ‘Š</li><li>peek            O(1)</li><li>getSize        O(1)</li><li>isEmpty       O(1)</li></ul></li><li><p>LinkedListStack</p><ul><li>push        O(1) </li><li>pop              O(1) </li><li>peek            O(1)</li><li>getSize        O(1)</li><li>isEmpty       O(1)</li></ul></li></ul><blockquote><p>å¯¹æ¯”</p><ol><li>å¤æ‚åº¦ç›¸åŒï¼Œæ‰€ä»¥å·®å¼‚å¾ˆå°</li><li>ä½†æ˜¯å½“æ’å…¥æ•°æ®å¾ˆå¤šçš„æ—¶å€™ï¼Œæœ‰å¯èƒ½é“¾è¡¨æ ˆæ•ˆç‡ä¼šæ…¢ï¼Œ å› ä¸ºå…¶<strong>newæ¬¡æ•°å¤ªå¤š</strong>è€—è´¹æ—¶é—´ï¼Œä¼šå»å†…å­˜æ‰¾æ–°çš„å¯ä»¥å¼€è¾Ÿç©ºé—´çš„åœ°æ–¹</li></ol></blockquote></li></ul><h2 id="é˜Ÿåˆ—"><a href="#é˜Ÿåˆ—" class="headerlink" title="é˜Ÿåˆ—"></a>é˜Ÿåˆ—</h2><p>å…ˆè¿›å…ˆå‡º ï¼ˆFIFOï¼‰</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ¥å£</span></span><br><span class="line">Interface Queue&lt;E&gt; &#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">enqueue</span><span class="params">(E e)</span></span>;</span><br><span class="line">    <span class="function">E <span class="title">dequeue</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function">E <span class="title">getFront</span><span class="params">()</span></span>; </span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">getSize</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">boolean</span> <span class="title">isEmpty</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="æ•°ç»„é˜Ÿåˆ—"><a href="#æ•°ç»„é˜Ÿåˆ—" class="headerlink" title="æ•°ç»„é˜Ÿåˆ—"></a>æ•°ç»„é˜Ÿåˆ—</h3><ul><li>æ—¶é—´å¤æ‚åº¦<ul><li>ArrayQueueï¼ˆæ•°ç»„å¯¹åˆ—ï¼‰<ul><li>enqueue     O(1) å‡æ‘Š</li><li>dequeue     <strong>O(n) </strong>åŠ¨æ€æ•°ç»„æ¯æ¬¡è¦å¾€å‰ç§»ï¼Œé‡æ–°èµ‹å€¼</li><li>front            O(1)</li><li>getSize        O(1)</li><li>isEmpty       O(1)</li></ul></li></ul></li></ul><h3 id="å¾ªç¯é˜Ÿåˆ—"><a href="#å¾ªç¯é˜Ÿåˆ—" class="headerlink" title="å¾ªç¯é˜Ÿåˆ—"></a>å¾ªç¯é˜Ÿåˆ—</h3><blockquote><p>æ•°ç»„é˜Ÿåˆ—å­˜åœ¨çš„é—®é¢˜ï¼š</p><p>åˆ é™¤é˜Ÿé¦–å…ƒç´ æ—¶ï¼ŒO(n)ï¼Œæ•´ä½“éœ€è¦å¾€å‰ç§»ä¸€ä¸ªä½ç½®ï¼Œå½“nå¾ˆå¤§çš„æ—¶å€™ï¼Œè€—æ—¶</p></blockquote><ul><li>æ—¶é—´å¤æ‚åº¦<ul><li>LoopQueueï¼ˆå¾ªç¯å¯¹åˆ—ï¼‰<ul><li>enqueue     O(1) å‡æ‘Š</li><li>dequeue     <strong>O(1) </strong>å‡æ‘Š</li><li>front            O(1)</li><li>getSize        O(1)</li><li>isEmpty       O(1)</li></ul></li></ul></li></ul><h3 id="é“¾è¡¨é˜Ÿåˆ—"><a href="#é“¾è¡¨é˜Ÿåˆ—" class="headerlink" title="é“¾è¡¨é˜Ÿåˆ—"></a>é“¾è¡¨é˜Ÿåˆ—</h3><ul><li><p>æ€è·¯å†ç¨‹</p><ol><li>LinkedListçš„å¤´éƒ¨å¢æˆ–åˆ éƒ½æ˜¯ Oï¼ˆ1ï¼‰çº§åˆ«çš„ï¼Œè€Œåœ¨å°¾éƒ¨åˆ™éœ€è¦Oï¼ˆnï¼‰çº§åˆ«æœç´¢è¿‡å»</li><li>å› æ­¤å¯ä»¥ç”¨ä¸€ä¸ªtailå¼•ç”¨æ¥è®°å½•å°¾éƒ¨çš„åœ°å€ï¼Œè¿™æ ·åœ¨å°¾éƒ¨å¢æ“ä½œä¹Ÿåªéœ€è¦Oï¼ˆ1ï¼‰çº§åˆ«æ“ä½œã€‚ä½†åœ¨å°¾éƒ¨åˆ è¿˜æ˜¯éœ€è¦Oï¼ˆnï¼‰ï¼Œå› ä¸ºåˆ é™¤éœ€è¦prevèŠ‚ç‚¹ï¼Œè¿˜æ˜¯éœ€è¦éå†</li><li>ç»¼åˆè€ƒè™‘æ—¶é—´å¤æ‚åº¦<ul><li>é“¾è¡¨å¤´headå½“åšé˜Ÿé¦–ï¼Œä½œä¸ºåˆ é™¤å…ƒç´ </li><li>å°¾tailå½“åšé˜Ÿå°¾ï¼Œæ¥æ·»åŠ å…ƒç´ </li></ul></li></ol></li><li><p>æ—¶é—´å¤æ‚åº¦</p><ul><li>LinkedListQueue<ul><li>enqueue     O(1) </li><li>dequeue     O(1) </li><li>front            O(1)</li><li>getSize        O(1)</li><li>isEmpty       O(1)</li></ul></li></ul></li></ul><h2 id="é“¾è¡¨ä¸é€’å½’"><a href="#é“¾è¡¨ä¸é€’å½’" class="headerlink" title="é“¾è¡¨ä¸é€’å½’"></a>é“¾è¡¨ä¸é€’å½’</h2><p>è¿‘ä¹å’Œé“¾è¡¨ç›¸å…³çš„æ‰€æœ‰æ“ä½œï¼Œéƒ½å¯ä»¥ä½¿ç”¨é€’å½’çš„å½¢å¼å®Œæˆã€‚</p><ul><li>æ¡ˆä¾‹ï¼ˆåˆ é™¤é“¾è¡¨ä¸­çš„å…ƒç´ ï¼‰</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Input:  <span class="number">1</span>-&gt;<span class="number">2</span>-&gt;<span class="number">6</span>-&gt;<span class="number">3</span>-&gt;<span class="number">4</span>-&gt;<span class="number">5</span>-&gt;<span class="number">6</span>, val = <span class="number">6</span></span><br><span class="line">Output: <span class="number">1</span>-&gt;<span class="number">2</span>-&gt;<span class="number">3</span>-&gt;<span class="number">4</span>-&gt;<span class="number">5</span></span><br></pre></td></tr></table></figure><ul><li><p>æ–¹æ³•</p><ul><li><p>æ™®é€šé“¾è¡¨ï¼ˆä¸å¸¦è™šæ‹Ÿå¤´ç»“ç‚¹ï¼‰</p><ul><li>æ€è·¯<ol><li>åˆ é™¤æ“ä½œï¼Œå¿…ç„¶è¦æ‰¾å‰ç»§ç»“ç‚¹prevï¼Œä¸ºåšç»Ÿä¸€åŒ–å¤„ç†ï¼Œæ•…è€Œå¤´ç»“ç‚¹éœ€è¦å•ç‹¬å¤„ç†</li><li>å…ˆå†™å‡ºä¸€èˆ¬æƒ…å†µï¼Œé»˜è®¤å¤´ç»“ç‚¹ä¸€å®šä¸æ˜¯valï¼Œåˆ™å†™å‡ºéå†</li><li>å•ç‹¬å¤„ç†å¤´ç»“ç‚¹ï¼Œä¿è¯å¤´ç»“ç‚¹ä¸€å®šä¸æ˜¯valå¼€å¤´</li></ol></li></ul></li><li><p>å¸¦è™šæ‹Ÿå¤´ç»“ç‚¹dummyHead</p><ul><li><p>æ€è·¯</p><p>dummyHeadçš„å­˜åœ¨ä½¿å¾—å¯ä»¥ç»Ÿä¸€å¤„ç†é—®é¢˜ï¼Œç®€ä¾¿</p></li></ul></li><li><p>é€’å½’</p><ul><li><p>æ€è·¯</p><p>é€’å½’è§£å†³åˆ é™¤æ›´å°çš„é“¾è¡¨ä¸­ç›¸åº”çš„å…ƒç´ </p></li></ul></li></ul></li></ul><h3 id="é€’å½’"><a href="#é€’å½’" class="headerlink" title="é€’å½’"></a>é€’å½’</h3><ul><li><p>æ­¥éª¤</p><ol><li>æ±‚è§£æœ€åŸºæœ¬çš„é—®é¢˜</li><li>æŠŠåŸé—®é¢˜è½¬åŒ–ä¸ºæ›´å°çš„é—®é¢˜</li></ol></li><li><p>é“¾è¡¨å¤©ç„¶çš„é€’å½’æ€§</p><p>é“¾è¡¨1ï¼š0 -&gt; 1 -&gt; 2 -&gt; 3 -&gt; 4 -&gt; null</p><p>åé¢çœ‹åšæ•´ä½“ï¼Œ0 -&gt; 1234 -&gt; null</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> æ•°æ®ç»“æ„ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> çº¿æ€§ </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>JavaWebåŸºç¡€å­¦ä¹ (2)</title>
      <link href="/2019/01/07/JavaWeb/JavaWeb%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A02/"/>
      <url>/2019/01/07/JavaWeb/JavaWeb%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A02/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote class="blockquote-center"><p>MVCã€äº‹åŠ¡ã€è¿æ¥æ± ã€Ajaxã€ç›‘å¬å™¨ã€è¿‡æ»¤å™¨ã€åŠ¨æ€ä»£ç†ã€æ³¨è§£</p></blockquote><p><img src="https://image-link.nos-eastchina1.126.net/javaweb_02"></p><a id="more"></a><h1 id="å¼€å‘æ¨¡å¼"><a href="#å¼€å‘æ¨¡å¼" class="headerlink" title="å¼€å‘æ¨¡å¼"></a>å¼€å‘æ¨¡å¼</h1><p><code>JavaBean</code>ï¼šä¸€ä¸ªæ™®é€šç±»ï¼ˆå®ä½“beanï¼‰,åŒ…å«3ä¸ªæ ‡å‡†</p><ol><li>æ— å‚æ„é€ </li><li>ç§æœ‰å±æ€§</li><li>å…¬å…±çš„getterå’Œsetteræ–¹æ³•</li></ol><h2 id="MVCæ¨¡å¼"><a href="#MVCæ¨¡å¼" class="headerlink" title="MVCæ¨¡å¼"></a>MVCæ¨¡å¼</h2><p>JSP + Servlet + JavaBean</p><p>MVC:å¼€å‘æ¨¡å¼ </p><p>Mï¼šæ¨¡å‹     <code>JavaBean</code></p><p>Vï¼šè§†å›¾        <code>JSP</code></p><p>Cï¼šæ§åˆ¶å™¨    <code>Servlet</code></p><h2 id="åˆ†å±‚æ€æƒ³"><a href="#åˆ†å±‚æ€æƒ³" class="headerlink" title="åˆ†å±‚æ€æƒ³"></a>åˆ†å±‚æ€æƒ³</h2><p>å¼ºå†…èšã€å¼±è€¦åˆ</p><p><img src="/2019/01/07/JavaWeb/JavaWebåŸºç¡€å­¦ä¹ 2/åˆ†å±‚.png" alt=""></p><h1 id="äº‹åŠ¡ä¸è¿æ¥æ± "><a href="#äº‹åŠ¡ä¸è¿æ¥æ± " class="headerlink" title="äº‹åŠ¡ä¸è¿æ¥æ± "></a>äº‹åŠ¡ä¸è¿æ¥æ± </h1><h2 id="äº‹åŠ¡"><a href="#äº‹åŠ¡" class="headerlink" title="äº‹åŠ¡"></a>äº‹åŠ¡</h2><p>äº‹åŠ¡æŒ‡é€»è¾‘ä¸Šçš„ä¸€ç»„æ“ä½œï¼Œç»„æˆè¿™ç»„æ“ä½œçš„å„ä¸ªå•å…ƒï¼Œè¦ä¹ˆå…¨éƒ¨æˆåŠŸï¼Œè¦ä¹ˆå…¨éƒ¨ä¸æˆåŠŸã€‚</p><h3 id="mysqläº‹åŠ¡"><a href="#mysqläº‹åŠ¡" class="headerlink" title="mysqläº‹åŠ¡"></a>mysqläº‹åŠ¡</h3><ol><li>mysqlå¼•æ“æ”¯æŒäº‹åŠ¡</li><li>é»˜è®¤è‡ªåŠ¨æäº¤äº‹åŠ¡ã€‚(<strong>æ¯æ¡</strong>è¯­å¥éƒ½å¤„åœ¨<strong>å•ç‹¬</strong>çš„äº‹åŠ¡ä¸­)</li><li>æ‰‹åŠ¨æ§åˆ¶äº‹åŠ¡<ul><li>å¼€å¯ï¼š<code>start transaction | begin</code></li><li>æäº¤ï¼š<code>commit</code></li><li>å›æ»šï¼š<code>rollback</code></li></ul></li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    conn.setAutoCommit(<span class="keyword">false</span>); <span class="comment">//1.ç›¸å½“äºbegin</span></span><br><span class="line">...<span class="comment">//2.åšä¸€äº›æ•°æ®åº“æ“ä½œ</span></span><br><span class="line">conn.commit(); <span class="comment">//3.æäº¤äº‹åŠ¡commit</span></span><br><span class="line">&#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">    <span class="keyword">if</span> (conn != <span class="keyword">null</span>) &#123;</span><br><span class="line">        conn.rollback(); <span class="comment">//4.å‡ºå¼‚å¸¸ï¼Œå›æ»šrollbackäº‹åŠ¡   </span></span><br><span class="line">    &#125;</span><br><span class="line">&#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">    å…³é—­èµ„æº</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="äº‹åŠ¡ç‰¹æ€§"><a href="#äº‹åŠ¡ç‰¹æ€§" class="headerlink" title="äº‹åŠ¡ç‰¹æ€§"></a>äº‹åŠ¡ç‰¹æ€§</h3><ul><li><p>åŸå­æ€§</p><ul><li>æŒ‡äº‹åŠ¡æ˜¯ä¸€ä¸ªä¸å¯åˆ†å‰²çš„å·¥ä½œå•ä½ï¼Œäº‹åŠ¡ä¸­çš„æ“ä½œè¦ä¹ˆéƒ½å‘ç”Ÿï¼Œè¦ä¹ˆéƒ½ä¸å‘ç”Ÿã€‚ </li></ul></li><li><p>ä¸€è‡´æ€§</p><ul><li>äº‹åŠ¡å¿…é¡»ä½¿æ•°æ®åº“ä»ä¸€ä¸ªä¸€è‡´æ€§çŠ¶æ€å˜æ¢åˆ°å¦å¤–ä¸€ä¸ªä¸€è‡´æ€§çŠ¶æ€ã€‚è½¬è´¦å‰å’Œè½¬è´¦åçš„æ€»é‡‘é¢ä¸å˜ã€‚</li></ul></li><li><p>éš”ç¦»æ€§</p><ul><li>äº‹åŠ¡çš„éš”ç¦»æ€§æ˜¯å¤šä¸ªç”¨æˆ·å¹¶å‘è®¿é—®æ•°æ®åº“æ—¶ï¼Œæ•°æ®åº“ä¸ºæ¯ä¸€ä¸ªç”¨æˆ·å¼€å¯çš„äº‹åŠ¡ï¼Œä¸èƒ½è¢«å…¶ä»–äº‹åŠ¡çš„æ“ä½œæ•°æ®æ‰€å¹²æ‰°ï¼Œå¤šä¸ªå¹¶å‘äº‹åŠ¡ä¹‹é—´è¦ç›¸äº’éš”ç¦»ã€‚</li></ul></li><li><p>æŒä¹…æ€§</p><ul><li>æŒ‡ä¸€ä¸ªäº‹åŠ¡ä¸€æ—¦è¢«æäº¤ï¼Œå®ƒå¯¹æ•°æ®åº“ä¸­æ•°æ®çš„æ”¹å˜å°±æ˜¯æ°¸ä¹…æ€§çš„ï¼Œæ¥ä¸‹æ¥å³ä½¿æ•°æ®åº“å‘ç”Ÿæ•…éšœä¹Ÿä¸åº”è¯¥å¯¹å…¶æœ‰ä»»ä½•å½±å“ã€‚</li></ul></li></ul><h3 id="äº‹åŠ¡éš”ç¦»çº§åˆ«"><a href="#äº‹åŠ¡éš”ç¦»çº§åˆ«" class="headerlink" title="äº‹åŠ¡éš”ç¦»çº§åˆ«"></a>äº‹åŠ¡éš”ç¦»çº§åˆ«</h3><ul><li><p>èµƒè¯»</p><ul><li>æŒ‡ä¸€ä¸ªäº‹åŠ¡è¯»å–äº†å¦ä¸€ä¸ªäº‹åŠ¡æœªæäº¤çš„æ•°æ®ã€‚ï¼ˆ<strong>ç»å¯¹è¦é¿å…</strong>ï¼‰</li></ul></li><li><p>ä¸å¯é‡å¤è¯»</p><ul><li>åœ¨ä¸€ä¸ªäº‹åŠ¡å†…è¯»å–è¡¨ä¸­çš„æŸä¸€è¡Œæ•°æ®ï¼Œå¤šæ¬¡è¯»å–ç»“æœä¸åŒã€‚ä¸€ä¸ªäº‹åŠ¡è¯»å–åˆ°äº†å¦ä¸€ä¸ªäº‹åŠ¡æäº¤åçš„æ•°æ®ã€‚ï¼ˆupdateï¼‰</li></ul></li><li><p>è™šè¯»ï¼ˆå¹»è¯»ï¼‰</p><ul><li>æ˜¯æŒ‡åœ¨ä¸€ä¸ªäº‹åŠ¡å†…è¯»å–åˆ°äº†åˆ«çš„äº‹åŠ¡æ’å…¥çš„æ•°æ®ï¼Œå¯¼è‡´å‰åè¯»å–ä¸ä¸€è‡´ã€‚ (insert)</li></ul></li></ul><p>è®¾ç½®äº‹åŠ¡çš„éš”ç¦»çº§åˆ«ï¼š</p><p> 1ã€<code>READ UNCOMMITTED</code>: èµƒè¯»ã€ä¸å¯é‡å¤è¯»ã€è™šè¯»éƒ½æœ‰å¯èƒ½å‘ç”Ÿã€‚</p><p> 2ã€<code>READ COMMITTED</code>: é¿å…èµƒè¯»ã€‚ä¸å¯é‡å¤è¯»ã€è™šè¯»éƒ½æœ‰å¯èƒ½å‘ç”Ÿã€‚ï¼ˆoracleé»˜è®¤çš„ï¼‰</p><p> 4ã€<code>REPEATABLE READ</code>:é¿å…èµƒè¯»ã€ä¸å¯é‡å¤è¯»ã€‚è™šè¯»æœ‰å¯èƒ½å‘ç”Ÿã€‚ï¼ˆmysqlé»˜è®¤ï¼‰</p><p> 8ã€<code>SERIALIZABLE</code>: é¿å…èµƒè¯»ã€ä¸å¯é‡å¤è¯»ã€è™šè¯»ã€‚  (<strong>ç›¸å½“äºé”ä½èµ„æº</strong>)</p><p>çº§åˆ«è¶Šé«˜ï¼Œæ€§èƒ½è¶Šä½ï¼Œæ•°æ®è¶Šå®‰å…¨</p><p>æŸ¥çœ‹äº‹åŠ¡ï¼š<code>SELECT @@transaction_isolation;</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//JDBCä¸­æ§åˆ¶äº‹åŠ¡éš”ç¦»çº§åˆ«</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//è®¾ç½®éš”ç¦»çº§åˆ«ï¼šå¿…é¡»åœ¨å¼€å¯äº‹åŠ¡ä¹‹å‰ã€‚</span></span><br><span class="line">Connection.setTransactionIsolation(<span class="keyword">int</span> level);</span><br><span class="line"><span class="comment">//å¯ç”¨å®</span></span><br><span class="line">TRANSACTION_READ_UNCOMMITTED <span class="comment">//å¯è„è¯»</span></span><br><span class="line">TRANSACTION_READ_COMMITTED  <span class="comment">//ä¸å¯è„è¯»</span></span><br><span class="line">TRANSACTION_REPEATABLE_READ <span class="comment">//ä¸å¯è„è¯»ã€é‡å¤è¯»</span></span><br><span class="line">TRANSACTION_SERIALIZABLE  <span class="comment">//ä¸å¯è„è¯»ã€é‡å¤è¯»å’Œè™šè¯»</span></span><br></pre></td></tr></table></figure><h2 id="æ•°æ®åº“è¿æ¥æ± "><a href="#æ•°æ®åº“è¿æ¥æ± " class="headerlink" title="æ•°æ®åº“è¿æ¥æ± "></a>æ•°æ®åº“è¿æ¥æ± </h2><h3 id="åŸç†"><a href="#åŸç†" class="headerlink" title="åŸç†"></a>åŸç†</h3><p><img src="/2019/01/07/JavaWeb/JavaWebåŸºç¡€å­¦ä¹ 2/è¿æ¥æ± åŸç†.jpg" alt=""></p><p>ç›®çš„ï¼šè§£å†³å»ºç«‹æ•°æ®åº“è¿æ¥è€—è´¹èµ„æºå’Œæ—¶é—´å¾ˆå¤šçš„é—®é¢˜ï¼Œæé«˜æ€§èƒ½ã€‚</p><h3 id="æ¨¡æ‹Ÿè¿æ¥æ± "><a href="#æ¨¡æ‹Ÿè¿æ¥æ± " class="headerlink" title="æ¨¡æ‹Ÿè¿æ¥æ± "></a>æ¨¡æ‹Ÿè¿æ¥æ± </h3><p>è‡ªå®šä¹‰æ•°æ®åº“è¿æ¥æ± è¦å®ç°<code>javax.sql.DataSource</code>æ¥å£ï¼Œä¸€ä¸ªæ ‡å‡†ï¼Œé˜²äº”èŠ±å…«é—¨ã€‚</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyDataSource</span> <span class="keyword">implements</span> <span class="title">DataSource</span> </span>&#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç”±äºé»˜è®¤çš„<code>Connection</code>æ¥å£çš„<code>close()</code>æ–¹æ³•ç›´æ¥å…³é—­ï¼Œè€Œåœ¨è¿æ¥æ± ä¸­ä¸å…è®¸å…³é—­</p><p>è§£å†³æ–¹æ³•</p><ul><li>è£…é¥°è®¾è®¡æ¨¡å¼ï¼šåŒ…è£…<code>Connection</code>ï¼Œç›´æ¥å†™<code>MyConnection</code></li><li>å…ˆç”¨é€‚é…å™¨åŒ…è£…ä¸€éï¼Œå†å†™è‡ªå·±çš„åŒ…è£…ç±»<code>MyConnection</code></li></ul><h3 id="å¸¸ç”¨æ•°æ®æºé…ç½®"><a href="#å¸¸ç”¨æ•°æ®æºé…ç½®" class="headerlink" title="å¸¸ç”¨æ•°æ®æºé…ç½®"></a>å¸¸ç”¨æ•°æ®æºé…ç½®</h3><h4 id="DPCP"><a href="#DPCP" class="headerlink" title="DPCP"></a>DPCP</h4><h4 id="C3P0"><a href="#C3P0" class="headerlink" title="C3P0"></a>C3P0</h4><h1 id="DBUtils"><a href="#DBUtils" class="headerlink" title="DBUtils"></a>DBUtils</h1><p>DBUtilså°è£…äº†å¯¹JDBCçš„æ“ä½œï¼Œç®€åŒ–äº†JDBCæ“ä½œã€‚å¯ä»¥å°‘å†™ä»£ç ã€‚</p><ol><li><p>å¯¹äºæ•°æ®è¡¨çš„<strong>è¯»æ“ä½œ</strong>ï¼Œä»–å¯ä»¥æŠŠç»“æœè½¬æ¢æˆListï¼ŒArrayï¼ŒSetç­‰javaé›†åˆï¼Œä¾¿äºç¨‹åºå‘˜æ“ä½œï¼›</p></li><li><p>å¯¹äºæ•°æ®è¡¨çš„<strong>å†™æ“ä½œ</strong>ï¼Œä¹Ÿå˜å¾—å¾ˆç®€å•ï¼ˆåªéœ€å†™sqlè¯­å¥ï¼‰</p></li><li><p>å¯ä»¥ä½¿ç”¨æ•°æ®æºï¼Œä½¿ç”¨JNDIï¼Œæ•°æ®åº“è¿æ¥æ± ç­‰æŠ€æœ¯æ¥ä¼˜åŒ–æ€§èƒ½â€”é‡ç”¨å·²ç»æ„å»ºå¥½çš„æ•°æ®åº“è¿æ¥å¯¹è±¡</p></li></ol><h2 id="æ ¸å¿ƒå¯¹è±¡"><a href="#æ ¸å¿ƒå¯¹è±¡" class="headerlink" title="æ ¸å¿ƒå¯¹è±¡"></a>æ ¸å¿ƒå¯¹è±¡</h2><ul><li><code>QueryRunner</code> ç±»<ul><li>æä¾›å¯¹sqlè¯­å¥æ“ä½œçš„API<ul><li><code>query()</code>ï¼šæ‰§è¡Œselect</li><li><code>update()</code>ï¼šæ‰§è¡Œinsert update delete</li><li><code>batch()</code>ï¼šæ‰¹å¤„ç†</li></ul></li></ul></li><li><code>ResultSetHandler</code>ï¼šæ¥å£<ul><li>ç”¨äºå®šä¹‰selectæ“ä½œåï¼Œæ€æ ·å°è£…ç»“æœé›†</li><li><code>ArrayHandler</code>ï¼šå–1æ¡è®°å½•ã€‚æŠŠè¯¥æ¡è®°å½•çš„æ¯åˆ—å€¼å°è£…åˆ°ä¸€ä¸ªæ•°ç»„ä¸­<code>Object[]</code></li><li><code>ArrayListHandler</code>ï¼šå–å¤šæ¡è®°å½•</li><li><code>ColumnListHandler</code>ï¼šå–æŸä¸€åˆ—çš„æ•°æ®ï¼Œå°è£…åˆ°Listä¸­</li><li><code>KeyedHandler</code>ï¼šå–å¤šæ¡è®°å½•</li><li><code>MapHandler</code>ï¼šå–1æ¡è®°å½•ã€‚æŠŠå½“å‰è®°å½•çš„åˆ—åå’Œåˆ—å€¼æ”¾åˆ°ä¸€ä¸ªMapä¸­</li><li><code>MapListHandler</code>ï¼šå–å¤šæ¡è®°å½•ã€‚æŠŠæ¯æ¡è®°å½•å°è£…åˆ°ä¸€ä¸ªMapä¸­ï¼Œå†æŠŠMapå°è£…åˆ°Listä¸­</li><li><code>ScalarHandler</code>ï¼šå–å•è¡Œå•åˆ—æ•°æ®</li><li><code>BeanHandler</code></li><li><code>BeanListHandler</code> </li></ul></li><li><code>DbUtils</code>ç±»ï¼ˆç”¨çš„ä¸å¤šï¼‰<ul><li>å®ƒå°±æ˜¯ä¸€ä¸ªå·¥å…·ç±»,å®šä¹‰äº†å…³é—­èµ„æºä¸äº‹åŠ¡å¤„ç†çš„æ–¹æ³•</li></ul></li></ul><h2 id="å¿«é€Ÿå…¥é—¨"><a href="#å¿«é€Ÿå…¥é—¨" class="headerlink" title="å¿«é€Ÿå…¥é—¨"></a>å¿«é€Ÿå…¥é—¨</h2><ol><li>å¯¼å…¥jaråŒ…</li><li>åˆ›å»º<code>QueryRunner</code>å¯¹è±¡</li><li>ä½¿ç”¨<code>query</code>æ–¹æ³•æ‰§è¡Œ<code>select</code>è¯­å¥</li><li>ä½¿ç”¨<code>ResultSetHandler</code>å°è£…ç»“æœé›† (<code>BeanListHandler</code>)</li><li>ä½¿ç”¨<code>DbUtils</code>ç±»é‡Šæ”¾èµ„æº</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">QueryRunner qr = <span class="keyword">new</span> QueryRunner(C3P0Util.getDataSource());</span><br><span class="line">List&lt;User&gt; list = qr.query(<span class="string">"select * from users"</span>, <span class="keyword">new</span> BeanListHandler&lt;User&gt;(User.class));</span><br></pre></td></tr></table></figure><h2 id="äº‹åŠ¡æ§åˆ¶"><a href="#äº‹åŠ¡æ§åˆ¶" class="headerlink" title="äº‹åŠ¡æ§åˆ¶"></a>äº‹åŠ¡æ§åˆ¶</h2><p>æ¨¡æ‹Ÿ<code>ThreadLocal</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ThreadLocal</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Map&lt;Runnable,Object&gt; container = <span class="keyword">new</span> HashMap&lt;Runnable,Object&gt;();</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">set</span><span class="params">(Object value)</span></span>&#123;</span><br><span class="line">        container.put(Thread.currentThread(),value);<span class="comment">//ç”¨å½“å‰çº¿ç¨‹ä½œä¸ºkey</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">get</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> container.get(Thread.currentThread());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">remove</span><span class="params">()</span></span>&#123;</span><br><span class="line">        container.remove(Thread.currentThread());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="Ajax"><a href="#Ajax" class="headerlink" title="Ajax"></a>Ajax</h1><p>(Asynchronous JavaScript And XML)</p><p> = DHTML(html4.0) + XHR</p><p><strong>åªåˆ·æ–°å±€éƒ¨é¡µé¢çš„æŠ€æœ¯</strong></p><ul><li>JavaScriptï¼šæ›´æ–°å±€éƒ¨çš„ç½‘é¡µ</li><li>XMLï¼šä¸€èˆ¬ç”¨äºè¯·æ±‚æ•°æ®å’Œå“åº”æ•°æ®çš„å°è£…</li><li><code>XMLHttpRequest</code>å¯¹è±¡ï¼šå‘é€è¯·æ±‚åˆ°æœåŠ¡å™¨å¹¶è·å¾—è¿”å›ç»“æœ</li><li>CSSï¼šç¾åŒ–é¡µé¢æ ·å¼</li><li>å¼‚æ­¥ï¼šå‘é€è¯·æ±‚åä¸ç­‰è¿”å›ç»“æœï¼Œç”±å›è°ƒå‡½æ•°å¤„ç†ç»“æœ</li></ul><h2 id="XMLHttpRequest"><a href="#XMLHttpRequest" class="headerlink" title="XMLHttpRequest"></a>XMLHttpRequest</h2><ol><li>æ–¹æ³•</li></ol><ul><li><code>open(method,URL,async)</code> <ul><li>get|post</li><li>url?name=fyd</li><li>true |false   (é»˜è®¤trueï¼Œå¼‚æ­¥)</li></ul></li><li><code>send(content)</code><ul><li>å‘é€è¯·æ±‚ã€‚ å¯å¸¦å‚æ•°æˆ–null</li></ul></li><li><code>setRequestHeader(header,value)</code><ul><li>è¯·æ±‚æ¶ˆæ¯å¤´</li></ul></li></ul><ol><li>å±æ€§</li></ol><ul><li><p>readyStateï¼šç±»å‹shortï¼›åªè¯»  </p><p> (XMLHttpRequestçš„çŠ¶æ€ä¿¡æ¯)</p><ul><li><p>0     XMLHttpRequestå¯¹è±¡æ²¡æœ‰å®Œæˆåˆå§‹åŒ–</p><ul><li>åˆšåˆšåˆ›å»º</li></ul></li><li><p>1     å¯¹è±¡<strong>å¼€å§‹</strong>å‘é€è¯·æ±‚</p><ul><li>è°ƒç”¨äº†openæ–¹æ³•ï¼Œä½†è¿˜æ²¡æœ‰è°ƒç”¨sendæ–¹æ³•ã€‚è¯·æ±‚è¿˜æ²¡æœ‰å‘å‡º</li></ul></li><li><p>2     è¯·æ±‚<strong>å‘é€å®Œæˆ</strong></p><ul><li>sendæ–¹æ³•å·²ç»è°ƒç”¨ï¼Œæ•°æ®å·²ç»æäº¤åˆ°æœåŠ¡å™¨ï¼Œä½†æ²¡æœ‰ä»»ä½•å“åº”</li></ul></li><li><p>3      <strong>å¼€å§‹è¯»å–å“åº”ï¼Œè¿˜æ²¡æœ‰ç»“æŸ</strong></p><ul><li>æ”¶åˆ°äº†æ‰€æœ‰çš„å“åº”æ¶ˆæ¯å¤´ï¼Œä½†æ­£æ–‡è¿˜æ²¡æœ‰å®Œå…¨æ”¶åˆ°</li></ul></li><li><p>4       å¯¹è±¡è¯»å–<strong>å“åº”ç»“æŸ</strong></p><ul><li>ä¸€åˆ‡éƒ½æ”¶åˆ°äº†</li></ul></li></ul></li><li><p>responseTextï¼šç±»å‹Stringï¼›åªè¯»</p></li><li><p>responseXMLï¼šç±»å‹Documentï¼›åªè¯»</p></li><li><p>statusï¼šç±»å‹shortï¼›åªè¯»</p><ul><li>200   æ­£å¸¸</li><li>400   æ— æ³•æ‰¾åˆ°è¯·æ±‚çš„èµ„æº</li><li>403   æ²¡æœ‰è®¿é—®æƒé™</li><li>404   è®¿é—®çš„èµ„æºä¸å­˜åœ¨</li><li>500   æœåŠ¡å™¨å†…éƒ¨é”™è¯¯</li></ul></li></ul><ol><li>äº‹ä»¶å¤„ç†å™¨</li></ol><ul><li>onreadystatechange(å½“çŠ¶æ€ç å˜åŠ¨è°ƒç”¨ï¼Œå›è°ƒçš„åŠŸèƒ½)</li></ul><h1 id="Listener-amp-Filter"><a href="#Listener-amp-Filter" class="headerlink" title="Listener &amp; Filter"></a>Listener &amp; Filter</h1><h2 id="ç›‘å¬å™¨"><a href="#ç›‘å¬å™¨" class="headerlink" title="ç›‘å¬å™¨"></a>ç›‘å¬å™¨</h2><ol><li><p>ä»€ä¹ˆæ˜¯ç›‘å¬å™¨</p><p> Javawebä¸­çš„ç›‘å¬å™¨æ˜¯ç”¨äºç›‘å¬webå¸¸è§å¯¹è±¡<code>HttpServletRequest</code>,<code>HttpSession</code>,<code>ServletContext</code></p></li><li><p>ç›‘å¬å™¨çš„ä½œç”¨</p><ul><li>ç›‘å¬webå¯¹è±¡åˆ›å»ºä¸é”€æ¯.</li><li>ç›‘å¬webå¯¹è±¡çš„å±æ€§å˜åŒ–</li><li>ç›‘å¬sessionç»‘å®šjavaBeanæ“ä½œ.</li></ul></li><li><p>ç›‘å¬æœºåˆ¶ç›¸å…³æ¦‚å¿µ</p><ul><li>äº‹ä»¶â€”â€”ä¸€ä»¶äº‹æƒ…</li><li>äº‹ä»¶æºâ€”-äº§ç”Ÿè¿™ä»¶äº‹æƒ…çš„æºå¤´</li><li>æ³¨å†Œç›‘å¬â€”-å°†ç›‘å¬å™¨ä¸äº‹ä»¶ç»‘å®šï¼Œå½“äº‹ä»¶äº§ç”Ÿæ—¶ï¼Œç›‘å¬å™¨å¯ä»¥çŸ¥é“ï¼Œå¹¶è¿›è¡Œå¤„ç†ã€‚-</li><li>ç›‘å¬å™¨â€”-å¯¹æŸä»¶äº‹æƒ…è¿›è¡Œå¤„ç†ç›‘å¬çš„ä¸€ä¸ªå¯¹è±¡</li></ul></li></ol><h2 id="è¿‡æ»¤å™¨"><a href="#è¿‡æ»¤å™¨" class="headerlink" title="è¿‡æ»¤å™¨"></a>è¿‡æ»¤å™¨</h2><p>Javawebä¸­çš„è¿‡æ»¤å™¨å¯ä»¥æ‹¦æˆªæ‰€æœ‰è®¿é—®webèµ„æºçš„è¯·æ±‚æˆ–å“åº”æ“ä½œã€‚</p><h1 id="ä»£ç†"><a href="#ä»£ç†" class="headerlink" title="ä»£ç†"></a>ä»£ç†</h1><h2 id="åŠ¨æ€ä»£ç†"><a href="#åŠ¨æ€ä»£ç†" class="headerlink" title="åŠ¨æ€ä»£ç†"></a>åŠ¨æ€ä»£ç†</h2><ol><li><p>jdkæä¾›ä¸€ä¸ªProxyç±»å¯ä»¥ç›´æ¥ç»™å®ç°æ¥å£ç±»çš„å¯¹è±¡ç›´æ¥ç”Ÿæˆä»£ç†å¯¹è±¡ã€‚</p></li><li><p>cglib  (springå­¦ä¹ )</p></li></ol><h2 id="AOPç¼–ç¨‹æ€æƒ³"><a href="#AOPç¼–ç¨‹æ€æƒ³" class="headerlink" title="AOPç¼–ç¨‹æ€æƒ³"></a>AOPç¼–ç¨‹æ€æƒ³</h2><ul><li>ä¸šåŠ¡æ–¹æ³•æ—¥åä¼šå¾ˆå¤šï¼Œä¼šæœ‰å¾ˆå¤šé‡å¤çš„ä»£ç </li><li>å·²ç»å­˜åœ¨å¾ˆå¤šçš„æ–¹æ³•ï¼Œå¹¶æ²¡æœ‰è€ƒè™‘åˆ°äº‹åŠ¡çš„é—®é¢˜ï¼Œç°åœ¨è¦æ±‚åŠ ä¸Š</li></ul><p><img src="/2019/01/07/JavaWeb/JavaWebåŸºç¡€å­¦ä¹ 2/aop.jpg" alt=""></p><h1 id="æ³¨è§£"><a href="#æ³¨è§£" class="headerlink" title="æ³¨è§£"></a>æ³¨è§£</h1><h2 id="JDKä¸‰ä¸ªåŸºæœ¬æ³¨è§£"><a href="#JDKä¸‰ä¸ªåŸºæœ¬æ³¨è§£" class="headerlink" title="JDKä¸‰ä¸ªåŸºæœ¬æ³¨è§£"></a>JDKä¸‰ä¸ªåŸºæœ¬æ³¨è§£</h2><ul><li><p><code>@Override</code>ï¼šæ£€æŸ¥å­ç±»ç¡®å®æ˜¯è¦†ç›–äº†çˆ¶ç±»çš„æ–¹æ³•ã€‚</p></li><li><p><code>@Deprecated</code>ï¼šè¯´æ˜å·²ç»è¿‡æ—¶äº†ã€‚</p></li><li><p><code>@SuppressWarnings({ &quot;unused&quot;, &quot;deprecation&quot; })</code>ï¼šæŠ‘åˆ¶ç¨‹åºä¸­çš„è­¦å‘Šã€‚unusedè­¦å‘Šçš„ç±»å‹ã€‚{}æ•°ç»„ã€‚allæŠ‘åˆ¶æ‰€æœ‰è­¦å‘Šã€‚</p></li></ul><h2 id="è‡ªå®šä¹‰æ³¨è§£è¯­æ³•"><a href="#è‡ªå®šä¹‰æ³¨è§£è¯­æ³•" class="headerlink" title="è‡ªå®šä¹‰æ³¨è§£è¯­æ³•"></a>è‡ªå®šä¹‰æ³¨è§£è¯­æ³•</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ³¨è§£å®ƒçš„æœ¬è´¨å°±æ˜¯ä¸€ä¸ªæ¥å£ï¼Œè¿™ä¸ªæ¥å£éœ€è¦ç»§æ‰¿ Annotationæ¥å£</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">MyAnnotation</span> <span class="keyword">extends</span> <span class="title">java</span>.<span class="title">lang</span>.<span class="title">annotation</span>.<span class="title">Annotation</span> </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//1.å£°æ˜</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> MyAnnotation &#123;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">age</span><span class="params">()</span>  <span class="keyword">default</span> -1</span>;</span><br><span class="line">    <span class="function">String <span class="title">name</span><span class="params">()</span> <span class="keyword">default</span> ""</span>;</span><br><span class="line">    <span class="function">Class <span class="title">clazz</span><span class="params">()</span> <span class="keyword">default</span> Object.class</span>;</span><br><span class="line">    String[] value(); <span class="comment">//èµ‹å€¼å¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œç›¸å½“äºä¸€ä¸ªå…ƒç´ </span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//2.ä½¿ç”¨</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UseAnnotation</span> </span>&#123;</span><br><span class="line">    <span class="meta">@MyAnnotation</span>(age=<span class="number">26</span>,name=<span class="string">"lp"</span>,value=<span class="string">"fyd"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li><p>æ³¨è§£ä¸­çš„æˆå‘˜</p><ul><li>æœ¬è´¨æ¥å£ï¼Œæ¥å£ä¸­ä¸ºå±æ€§æ–¹æ³•</li></ul></li><li><p>æ³¨è§£å±æ€§ç±»å‹</p><ul><li>åŸºæœ¬ç±»å‹</li><li>String</li><li>æšä¸¾ç±»å‹</li><li>æ³¨è§£ç±»å‹</li><li>Classç±»å‹</li><li>ä»¥ä¸Šç±»å‹çš„ä¸€ç»´æ•°ç»„ç±»å‹</li></ul></li><li><p>æ³¨è§£çš„åå°„<strong>é‡ç‚¹</strong></p><ol><li>åå°„æ³¨è§£ç±»</li></ol><p><code>java.lang.reflect.AnnotatedElement:</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;T extends Annotation&gt; <span class="function">T <span class="title">getAnnotation</span><span class="params">(Class&lt;T&gt; annotationType)</span></span></span><br><span class="line"><span class="function"><span class="comment">//å¾—åˆ°æŒ‡å®šç±»å‹çš„æ³¨è§£å¼•ç”¨ã€‚æ²¡æœ‰è¿”å›nullã€‚</span></span></span><br><span class="line"><span class="function">Annotation[] <span class="title">getAnnotations</span><span class="params">()</span></span></span><br><span class="line"><span class="function"><span class="comment">//å¾—åˆ°æ‰€æœ‰çš„æ³¨è§£ï¼ŒåŒ…å«ä»çˆ¶ç±»ç»§æ‰¿ä¸‹æ¥çš„ã€‚</span></span></span><br><span class="line"><span class="function">Annotation[] <span class="title">getDeclaredAnnotations</span><span class="params">()</span></span></span><br><span class="line"><span class="function"><span class="comment">//å¾—åˆ°è‡ªå·±èº«ä¸Šçš„æ³¨è§£ã€‚</span></span></span><br><span class="line"><span class="function"><span class="keyword">boolean</span> <span class="title">isAnnotationPresent</span><span class="params">(Class&lt;? extends Annotation&gt; annotationType)</span></span></span><br><span class="line"><span class="function"><span class="comment">//åˆ¤æ–­æŒ‡å®šçš„æ³¨è§£æœ‰æ²¡æœ‰</span></span></span><br></pre></td></tr></table></figure><p><code>Class</code>ã€<code>Method</code>ã€<code>Field</code>ã€<code>Constructor</code>ç­‰å®ç°äº†<code>AnnotatedElement</code>æ¥å£.</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Class.isAnnotationPresent(MyTest.class)</span><br><span class="line"><span class="comment">//åˆ¤æ–­ç±»ä¸Šé¢æœ‰æ²¡æœ‰@MyTestæ³¨è§£ï¼›</span></span><br><span class="line">Method.isAnnotationPresent(MyTest.class)</span><br><span class="line"><span class="comment">//åˆ¤æ–­æ–¹æ³•ä¸Šé¢æœ‰æ²¡æœ‰@MyTestæ³¨è§£ã€‚</span></span><br></pre></td></tr></table></figure><ol><li>åå°„æ³¨è§£ä¸­çš„å±æ€§</li></ol><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">Class clazz = MyClass.class;</span><br><span class="line">Method methods = clazz.getMethods();</span><br><span class="line"><span class="keyword">for</span> (Method m:methods) &#123;</span><br><span class="line">    MyTest myTest = m.getAnnotation(MyTest.class);</span><br><span class="line">    <span class="keyword">if</span> (myTest != <span class="keyword">null</span>) &#123; <span class="comment">//æ–¹æ³•ä¸Šé¢æœ‰MyTestæ³¨è§£</span></span><br><span class="line">        <span class="comment">//è·å–æ³¨è§£çš„timeoutå±æ€§</span></span><br><span class="line">        <span class="keyword">long</span> time = myTest.timeout(); <span class="comment">// -1æˆ–è€…å¤§äº0çš„å€¼</span></span><br><span class="line">        <span class="keyword">if</span> (time &lt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="comment">//ä¸éœ€è¦æµ‹è¯•æ•ˆç‡</span></span><br><span class="line">            m.invoke(clazz.newInstance(), <span class="keyword">null</span>);<span class="comment">//æ‰§è¡Œæ–¹æ³•</span></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">//éœ€è¦æµ‹è¯•æ•ˆç‡</span></span><br><span class="line">            <span class="keyword">long</span> startTime = System.nanoTime();</span><br><span class="line">            m.invoke(clazz.newInstance(), <span class="keyword">null</span>);</span><br><span class="line">            <span class="keyword">long</span> costTime = System.nanoTime() - startTime;</span><br><span class="line">            <span class="keyword">if</span> (costTime &gt; time) &#123;</span><br><span class="line">                System.out.println(m.getName()+<span class="string">"è¶…æ—¶"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><h2 id="å…ƒæ³¨è§£"><a href="#å…ƒæ³¨è§£" class="headerlink" title="å…ƒæ³¨è§£"></a>å…ƒæ³¨è§£</h2><p>è‡ªå®šä¹‰çš„æ³¨è§£çš„å­˜æ´»èŒƒå›´ï¼ˆç”Ÿå‘½å‘¨æœŸï¼‰ï¼šé»˜è®¤æ˜¯CLASSã€‚</p><p><img src="/2019/01/07/JavaWeb/JavaWebåŸºç¡€å­¦ä¹ 2/ç”Ÿå‘½å‘¨æœŸ.jpg" alt=""></p><p>åªèƒ½ç”¨åœ¨æ³¨è§£ä¸Šçš„æ³¨è§£å«åšå…ƒæ³¨è§£ã€‚ï¼ˆå³ï¼šç”¨äºä¿®é¥°æ³¨è§£çš„æ³¨è§£ï¼‰</p><ul><li><p><code>@Retention</code>ï¼šä½œç”¨ã€‚æ”¹å˜è‡ªå®šä¹‰çš„æ³¨è§£çš„å­˜æ´»èŒƒå›´ã€‚</p><ul><li>RetentionPolicyå®å¯¹è±¡:<ul><li>SOURCE</li><li>CLASS</li><li>RUNTIME</li></ul></li></ul></li><li><p><code>@Target</code>ï¼šä½œç”¨ã€‚æŒ‡å®šè¯¥æ³¨è§£èƒ½ç”¨åœ¨ä»€ä¹ˆåœ°æ–¹ã€‚</p><ul><li>ElementType:<ul><li>TYPE</li><li>METHOD</li><li>FIELD</li><li>ANNOTATION_TYPE</li></ul></li></ul></li><li><p><code>@Documented</code>ï¼šä½œç”¨ï¼Œä½¿ç”¨äº†@MyTestçš„æ³¨è§£çš„ç±»ï¼Œå¦‚æœ@MyTestæ³¨è§£ä¸Šé¢æœ‰<code>@Documented</code>æ³¨è§£ï¼Œé‚£ä¹ˆä½¿ç”¨äº†@MyTestçš„æ³¨è§£çš„ç±»çš„APIæ–‡æ¡£ä¸­ä¼šå‡ºç°@MyTestçš„èº«å½±ã€‚</p></li><li><p><code>@Inherited</code>ï¼šä½œç”¨ï¼Œè¯´æ˜è¯¥æ³¨è§£å¯ä»¥è¢«ç»§æ‰¿ä¸‹å»</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> JavaWeb </category>
          
      </categories>
      
      
        <tags>
            
            <tag> JavaWeb </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Mysql</title>
      <link href="/2018/12/23/%E6%95%B0%E6%8D%AE%E5%BA%93/MySQL/"/>
      <url>/2018/12/23/%E6%95%B0%E6%8D%AE%E5%BA%93/MySQL/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote class="blockquote-center"><p>Mysqlã€JDBC</p></blockquote><p><img src="https://image-link.nos-eastchina1.126.net/mysql"></p><a id="more"></a><h1 id="MySQL"><a href="#MySQL" class="headerlink" title="MySQL"></a>MySQL</h1><ul><li><p>å¸¸ç”¨å‘½ä»¤</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mysql -u root -p passwd -P ç«¯å£å· -h æœåŠ¡å™¨åœ°å€  </span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">VERSION</span>();</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">NOW</span>();</span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">USER</span>();</span><br></pre></td></tr></table></figure><ul><li>å…³é”®å­—ä¸å‡½æ•°åå…¨éƒ¨å¤§å†™</li><li>æ•°æ®åº“åã€è¡¨åã€å­—æ®µåå…¨éƒ¨å°å†™</li></ul></li></ul><h2 id="DDL"><a href="#DDL" class="headerlink" title="DDL"></a>DDL</h2><ul><li><p>æ•°æ®å®šä¹‰è¯­è¨€ï¼ˆData Definition Languageï¼‰</p><ul><li><p>ç”¨æ¥å®šä¹‰æ•°æ®åº“å¯¹è±¡ï¼šåº“ã€è¡¨ã€åˆ—ç­‰ï¼›</p></li><li><p><code>CREATEã€ ALTERã€DROP</code></p></li></ul></li></ul><h3 id="æ•°æ®åº“"><a href="#æ•°æ®åº“" class="headerlink" title="æ•°æ®åº“"></a>æ•°æ®åº“</h3><ul><li>åˆ›å»º</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> &#123;<span class="keyword">DATABASE</span> | <span class="keyword">SCHEMA</span>&#125; [<span class="keyword">IF</span> <span class="keyword">NOT</span> <span class="keyword">EXISTS</span>] db_name</span><br><span class="line">[<span class="keyword">DEFAULT</span>] <span class="built_in">CHARACTER</span> <span class="keyword">SET</span> [=] charset_name;  </span><br><span class="line"><span class="comment">/* if not ä¸ç›´æ¥æŠ¥é”™ï¼ŒæŠŠé”™è¯¯åŠ åˆ°wariningä¸­ */</span></span><br></pre></td></tr></table></figure><ul><li>æŸ¥è¯¢</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*æŸ¥çœ‹å½“å‰æ•°æ®åº“æœåŠ¡å™¨ä¸­çš„æ‰€æœ‰æ•°æ®åº“*/</span></span><br><span class="line"><span class="keyword">SHOW</span> &#123;<span class="keyword">DATABASES</span> | SCHEMAS&#125; [<span class="keyword">LIKE</span> <span class="string">'pattern'</span> | <span class="keyword">WHERE</span> expr];</span><br><span class="line"><span class="keyword">SHOW</span> <span class="keyword">WARNINGS</span>;</span><br><span class="line"><span class="comment">/*æ˜¾ç¤ºæ•°æ®åº“åˆ›å»ºæ—¶æŒ‡ä»¤*/</span></span><br><span class="line"><span class="keyword">SHOW</span> <span class="keyword">CREATE</span> <span class="keyword">DATABASE</span> db_name;</span><br></pre></td></tr></table></figure><ul><li>ä¿®æ”¹</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*æ”¹ç¼–ç æ–¹å¼*/</span></span><br><span class="line"><span class="keyword">ALTER</span> &#123;<span class="keyword">DATABASE</span> | <span class="keyword">SCHEMA</span>&#125; [db_name] [<span class="keyword">DEFAULT</span>] <span class="built_in">CHARACTER</span> <span class="keyword">SET</span> [=] charset_name;</span><br></pre></td></tr></table></figure><ul><li>åˆ é™¤</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> &#123;<span class="keyword">DATABASE</span> | <span class="keyword">SCHEMA</span>&#125; [<span class="keyword">IF</span> <span class="keyword">NOT</span> <span class="keyword">EXISTS</span>] db_name;</span><br></pre></td></tr></table></figure><h3 id="æ•°æ®è¡¨"><a href="#æ•°æ®è¡¨" class="headerlink" title="æ•°æ®è¡¨"></a>æ•°æ®è¡¨</h3><p><code>USE db_name;</code></p><p><code>SELECT DATABASE();</code>   æŸ¥çœ‹å½“å‰ä½¿ç”¨çš„æ•°æ®åº“</p><ul><li>åˆ›å»º</li></ul><h4 id="çº¦æŸ"><a href="#çº¦æŸ" class="headerlink" title="çº¦æŸ"></a>çº¦æŸ</h4><ul><li><p>ä¸»é”®çº¦æŸ(<code>PRIMARY KEY</code>)</p><ul><li>æ¯å¼ è¡¨åªèƒ½å­˜åœ¨ä¸€ä¸ªä¸»é”®</li><li>ä¸»é”®ä¿è¯è®°å½•å”¯ä¸€æ€§</li><li>ä¸»é”®è‡ªåŠ¨ä¸ºNOT NULL    </li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*æ–¹æ³•1*/</span></span><br><span class="line">Id int primary key,</span><br><span class="line"><span class="comment">/*æ–¹æ³•2ï¼šå¯è”åˆä¸»é”®*/</span></span><br><span class="line">id int,</span><br><span class="line">Name varchar(50),</span><br><span class="line">Primary key(id)</span><br><span class="line"><span class="comment">/*æ–¹æ³•3ï¼šåˆ›å»ºåä¿®æ”¹*/</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> student <span class="keyword">ADD</span>  PRIMARY <span class="keyword">KEY</span> (<span class="keyword">id</span>);</span><br></pre></td></tr></table></figure></li><li><p>å”¯ä¸€çº¦æŸ(<code>UNIQUE KEY</code>)</p><ul><li>å¯ä»¥å­˜åœ¨å¤šä¸ªå”¯ä¸€çº¦æŸ</li><li>å¯ä¿è®°å½•å”¯ä¸€æ€§</li><li>å­—æ®µå¯ä¸ºNULL</li></ul></li><li><p>é»˜è®¤çº¦æŸï¼ˆ <code>DEFAULT</code>ï¼‰</p><p><code>sex ENUM(&#39;1&#39;, &#39;2&#39;, &#39;3&#39;) DEFAULT &#39;3&#39;</code></p></li><li><p>éç©ºçº¦æŸï¼ˆ<code>NOT NULL</code>ï¼‰</p></li><li><p>å¤–é”®çº¦æŸï¼ˆä¸€èˆ¬ä¸ç”¨ç‰©ç†å¤–é”®ï¼Œè€Œç”¨é€»è¾‘å¤–é”®ï¼‰</p><p>ä¿æŒæ•°æ®ä¸€è‡´æ€§ï¼Œå®Œæ•´æ€§ã€‚å®ç°1å¯¹1ï¼Œ1å¯¹å¤šçš„å…³ç³»ã€‚</p><p><code>FOREIGN KEY (pid) REFERENCES tb_name (id) ON {DELETE|UPDATE} æ“ä½œ</code></p><ul><li>è¦æ±‚<ul><li>çˆ¶è¡¨å’Œå­è¡¨å¿…é¡»ä¸ºç›¸åŒå­˜å‚¨å¼•æ“ï¼Œç¦æ­¢ç”¨ä¸´æ—¶è¡¨</li><li>æ•°æ®è¡¨çš„å­˜å‚¨å¼•æ“åªæ˜¯ä¸ºInnoDB</li><li>å¤–é”®åˆ—å’Œå‚ç…§åˆ—å¿…é¡»å…·æœ‰ç›¸ä¼¼æ•°æ®ç±»å‹ã€‚å…¶ä¸­æ•°å­—çš„é•¿åº¦æˆ–æ˜¯å¦æœ‰ç¬¦å·ä½å¿…é¡»ç›¸åŒï¼›è€Œå­—ç¬¦çš„é•¿åº¦åˆ™å¯ä»¥ä¸åŒã€‚</li><li>å¤–é”®åˆ—å’Œå‚ç…§åˆ—å¿…é¡»åˆ›å»ºç´¢å¼•ã€‚å¦‚æœå¤–é”®åˆ—ä¸å­˜åœ¨ç´¢å¼•ï¼ŒMySQLä¼šè‡ªåŠ¨åˆ›å»º</li></ul></li><li>å‚ç…§æ“ä½œ<ul><li>CASCADEï¼šçˆ¶è¡¨åˆ é™¤æˆ–æ›´æ–°ä¸”è‡ªåŠ¨åˆ é™¤æˆ–è€…æ›´æ–°å­—è¡¨ä¸­åŒ¹é…è¡Œ</li><li>SET NULLï¼šçˆ¶è¡¨åˆ é™¤æˆ–æ›´æ–°è¡Œï¼Œå¹¶è®¾ç½®å­—è¡¨ä¸­å¤–é”®åˆ—ä¸ºNULLã€‚å­—è¡¨ä¸ä¸ºNOT NULL </li><li>RESTRICTï¼šæ‹’ç»å¯¹çˆ¶è¡¨çš„åˆ é™¤æˆ–æ›´æ–°æ“ä½œ</li><li>NOT ACTIONï¼šæ ‡å‡†SQLå…³é”®å­—ï¼Œåœ¨MySQLä¸­åŒRESTRICT</li></ul></li></ul></li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> [<span class="keyword">IF</span> <span class="keyword">NOT</span> <span class="keyword">EXISTS</span>] table_name (</span><br><span class="line">    column_name data_type </span><br><span class="line">    ....</span><br><span class="line">    <span class="keyword">id</span> <span class="built_in">INT</span> <span class="keyword">UNSIGNED</span> AUTO_INCREMENT PRIMARY <span class="keyword">KEY</span>, <span class="comment">/*è‡ªåŠ¨ç¼–å·ï¼Œå¿…é¡»ä¸ºä¸»é”®*/</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure><ul><li>æŸ¥è¯¢</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*æŸ¥æ•°æ®åº“ä¸­è¡¨*/</span></span><br><span class="line"><span class="keyword">SHOW</span> <span class="keyword">TABLES</span> [<span class="keyword">FROM</span> db_name] [<span class="keyword">LIKE</span> <span class="string">'pattern'</span> | <span class="keyword">WHERE</span> expr];</span><br><span class="line"><span class="comment">/*æŸ¥æŸè¡¨æ‰€æœ‰åˆ—*/</span></span><br><span class="line"><span class="keyword">SHOW</span> <span class="keyword">COLUMNS</span> <span class="keyword">FROM</span> tb_name;</span><br><span class="line"><span class="comment">/*æŸ¥æŸè¡¨ç´¢å¼•*/</span></span><br><span class="line"><span class="keyword">SHOW</span> <span class="keyword">INDEXES</span> <span class="keyword">FROM</span> tb_name\G;</span><br></pre></td></tr></table></figure><ul><li>ä¿®æ”¹</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*æ·»åŠ å•åˆ—*/</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> tb_name <span class="keyword">ADD</span>  col_name column_def [FRIST | <span class="keyword">AFTER</span> col_name]</span><br><span class="line"></span><br><span class="line"><span class="comment">/*æ·»åŠ å¤šåˆ—*/</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> tb_name <span class="keyword">ADD</span>  (col_name column_def, ...)</span><br><span class="line"></span><br><span class="line"><span class="comment">/*æ·»åŠ çº¦æŸ*/</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> tb_name <span class="keyword">ADD</span>  PRIMARY <span class="keyword">KEY</span> </span><br><span class="line"></span><br><span class="line"><span class="comment">/*æ·»åŠ åˆ é™¤é»˜è®¤çº¦æŸ*/</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> tb_name <span class="keyword">ALTER</span>  col_name &#123;<span class="keyword">SET</span> <span class="keyword">DEFAULT</span> é»˜è®¤å€¼/<span class="keyword">DROP</span> <span class="keyword">DEFAULT</span>&#125;</span><br></pre></td></tr></table></figure><ul><li>åˆ é™¤</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*åˆ åˆ—*/</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> tbl_name <span class="keyword">DROP</span> col_name1,<span class="keyword">DROP</span> col_name2;</span><br></pre></td></tr></table></figure><h2 id="DML"><a href="#DML" class="headerlink" title="DML"></a>DML</h2><ul><li><p>æ•°æ®æ“ä½œè¯­è¨€ï¼ˆData Manipulation Languageï¼‰</p><ul><li><p>ç”¨æ¥å®šä¹‰æ•°æ®åº“è®°å½•ï¼ˆæ•°æ®ï¼‰   </p></li><li><p><code>INSERTã€ UPDATEã€ DELETE</code></p></li></ul></li><li><p>æ’å…¥è®°å½•</p></li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> tbl_name [(col_name,...)] <span class="keyword">VALUES</span>(val1,...),(val2);</span><br><span class="line"><span class="comment">/*é»˜è®¤å€¼ç”¨DEFAULTæˆ–è€…åœ¨å­—æ®µåä¸­çœç•¥å¯¹åº”*/</span></span><br><span class="line"><span class="keyword">INSERT</span> tb1_name <span class="keyword">SET</span> col_name=&#123;expr|<span class="keyword">DEFAULT</span>&#125;,...;<span class="comment">/*å¯ç”¨å­æŸ¥è¯¢*/</span></span><br></pre></td></tr></table></figure><ul><li>åˆ é™¤è®°å½•</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> tb_name <span class="keyword">WHERE</span> æ¡ä»¶</span><br></pre></td></tr></table></figure><ul><li>æ›´æ–°è®°å½•</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span> table_name <span class="keyword">SET</span> col_name = <span class="keyword">DEFAULT</span> | è¡¨è¾¾å¼ [<span class="keyword">WHERE</span> æ¡ä»¶];</span><br></pre></td></tr></table></figure><h2 id="DQL"><a href="#DQL" class="headerlink" title="DQL"></a>DQL</h2><ul><li>æ•°æ®æŸ¥è¯¢è¯­è¨€<ul><li><code>SELECT</code></li></ul></li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> selection_list <span class="comment">/*è¦æŸ¥è¯¢çš„åˆ—åç§°*/</span></span><br><span class="line"><span class="keyword">FROM</span> table_list <span class="comment">/*è¦æŸ¥è¯¢çš„è¡¨åç§°*/</span></span><br><span class="line"><span class="keyword">WHERE</span> condition <span class="comment">/*è¡Œæ¡ä»¶*/</span></span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> grouping_columns <span class="comment">/*å¯¹ç»“æœåˆ†ç»„*/</span></span><br><span class="line"><span class="keyword">HAVING</span> condition <span class="comment">/*åˆ†ç»„åçš„è¡Œæ¡ä»¶*/</span></span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> sorting_columns <span class="comment">/*å¯¹ç»“æœåˆ†ç»„*/</span></span><br><span class="line"><span class="keyword">LIMIT</span> offset_start, <span class="keyword">row_count</span> <span class="comment">/*ç»“æœé™å®š*/</span></span><br></pre></td></tr></table></figure><h3 id="æ¡ä»¶æŸ¥è¯¢"><a href="#æ¡ä»¶æŸ¥è¯¢" class="headerlink" title="æ¡ä»¶æŸ¥è¯¢"></a>æ¡ä»¶æŸ¥è¯¢</h3><ul><li>=ã€!=ã€&lt;&gt;ã€&lt;ã€&lt;=ã€&gt;ã€&gt;=ï¼›</li><li>BETWEENâ€¦ANDï¼› </li><li>IN(set)ï¼›</li><li>IS NULLï¼› IS NOT NULL</li><li>ANDï¼›</li><li>ORï¼›</li><li>NOTï¼› </li></ul><h3 id="æ¨¡ç³ŠæŸ¥è¯¢"><a href="#æ¨¡ç³ŠæŸ¥è¯¢" class="headerlink" title="æ¨¡ç³ŠæŸ¥è¯¢"></a>æ¨¡ç³ŠæŸ¥è¯¢</h3><ul><li>é€šé…ç¬¦: <ul><li><code>_</code>ï¼šä»»æ„ä¸€ä¸ªå­—ç¬¦</li><li><code>%</code>ï¼šä»»æ„0~nä¸ªå­—ç¬¦</li></ul></li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*æŸ¥è¯¢å§“åä¸­ç¬¬2ä¸ªå­—æ¯ä¸ºâ€œiâ€çš„å­¦ç”Ÿè®°å½•*/</span></span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> stu <span class="keyword">WHERE</span> sname <span class="keyword">LIKE</span> <span class="string">'_i%'</span>;</span><br></pre></td></tr></table></figure><h3 id="å­—æ®µæ§åˆ¶æŸ¥è¯¢"><a href="#å­—æ®µæ§åˆ¶æŸ¥è¯¢" class="headerlink" title="å­—æ®µæ§åˆ¶æŸ¥è¯¢"></a>å­—æ®µæ§åˆ¶æŸ¥è¯¢</h3><ul><li><p>å»é‡</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> sal <span class="keyword">FROM</span> emp;</span><br></pre></td></tr></table></figure></li><li><p>åŠ æ³•</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*æŸ¥è¯¢å‡ºæ¥ç»“æœä¼šå¤šä¸€åˆ—æ±‚å’Œç»“æœ*/</span></span><br><span class="line"><span class="keyword">SELECT</span> *,sal+comm <span class="keyword">FROM</span> emp;</span><br><span class="line"><span class="comment">/*IFNULLæŠŠNULLè½¬æ¢ä¸ºæ•°å€¼*/</span></span><br><span class="line"><span class="keyword">SELECT</span> *,sal+<span class="keyword">IFNULL</span>(comm,<span class="number">0</span>) <span class="keyword">FROM</span> emp;</span><br></pre></td></tr></table></figure></li><li><p>ç»™åˆ—èµ·åˆ«å</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> *, sal+<span class="keyword">IFNULL</span>(comm,<span class="number">0</span>) <span class="keyword">AS</span> total <span class="keyword">FROM</span> emp;</span><br><span class="line"><span class="comment">/*ASå¯ä»¥çœç•¥*/</span></span><br></pre></td></tr></table></figure></li></ul><h3 id="æ’åº"><a href="#æ’åº" class="headerlink" title="æ’åº"></a>æ’åº</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> stu <span class="keyword">ORDER</span> <span class="keyword">BY</span> sage [<span class="keyword">ASC</span> | <span class="keyword">DESC</span>];</span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> emp <span class="keyword">ORDER</span> <span class="keyword">BY</span> sal <span class="keyword">DESC</span>,empno <span class="keyword">ASC</span>;</span><br></pre></td></tr></table></figure><h3 id="èšåˆå‡½æ•°"><a href="#èšåˆå‡½æ•°" class="headerlink" title="èšåˆå‡½æ•°"></a>èšåˆå‡½æ•°</h3><p>èšåˆå‡½æ•°æ˜¯ç”¨æ¥åšçºµå‘è¿ç®—çš„å‡½æ•°ï¼š</p><ul><li><p><code>COUNT()</code>ï¼šç»Ÿè®¡æŒ‡å®šåˆ—ä¸ä¸ºNULLçš„è®°å½•è¡Œæ•°ï¼›</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*æŸ¥è¯¢empè¡¨ä¸­è®°å½•æ•°ï¼š*/</span> </span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">COUNT</span>(*) <span class="keyword">AS</span> cnt <span class="keyword">FROM</span> emp;</span><br><span class="line"><span class="comment">/*æŸ¥è¯¢empè¡¨ä¸­æœ‰ä½£é‡‘çš„äººæ•°ï¼š*/</span> </span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">COUNT</span>(comm) cnt <span class="keyword">FROM</span> emp;</span><br><span class="line"><span class="comment">/*æŸ¥è¯¢æœ‰ä½£é‡‘çš„äººæ•°ï¼Œæœ‰é¢†å¯¼çš„äººæ•°ï¼š*/</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">COUNT</span>(comm), <span class="keyword">COUNT</span>(mgr) <span class="keyword">FROM</span> emp;</span><br></pre></td></tr></table></figure></li><li><p><code>MAX()</code>ï¼šè®¡ç®—æŒ‡å®šåˆ—çš„æœ€å¤§å€¼ï¼Œå¦‚æœæŒ‡å®šåˆ—æ˜¯å­—ç¬¦ä¸²ç±»å‹ï¼Œé‚£ä¹ˆä½¿ç”¨å­—ç¬¦ä¸²æ’åºè¿ç®—ï¼›</p></li><li><p><code>MIN()</code>ï¼šè®¡ç®—æŒ‡å®šåˆ—çš„æœ€å°å€¼ï¼Œå¦‚æœæŒ‡å®šåˆ—æ˜¯å­—ç¬¦ä¸²ç±»å‹ï¼Œé‚£ä¹ˆä½¿ç”¨å­—ç¬¦ä¸²æ’åºè¿ç®—ï¼›</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*æŸ¥è¯¢æœ€é«˜å·¥èµ„å’Œæœ€ä½å·¥èµ„ï¼š*/</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">MAX</span>(sal), <span class="keyword">MIN</span>(sal) <span class="keyword">FROM</span> emp;</span><br></pre></td></tr></table></figure></li><li><p><code>SUM()</code>ï¼šè®¡ç®—æŒ‡å®šåˆ—çš„æ•°å€¼å’Œï¼Œå¦‚æœæŒ‡å®šåˆ—ç±»å‹ä¸æ˜¯æ•°å€¼ç±»å‹ï¼Œé‚£ä¹ˆè®¡ç®—ç»“æœä¸º0ï¼›</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*æŸ¥è¯¢æ‰€æœ‰é›‡å‘˜æœˆè–ªå’Œï¼Œä»¥åŠæ‰€æœ‰é›‡å‘˜ä½£é‡‘å’Œ*/</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">SUM</span>(sal), <span class="keyword">SUM</span>(comm) <span class="keyword">FROM</span> emp;</span><br></pre></td></tr></table></figure></li><li><p><code>AVG()</code>ï¼šè®¡ç®—æŒ‡å®šåˆ—çš„å¹³å‡å€¼ï¼Œå¦‚æœæŒ‡å®šåˆ—ç±»å‹ä¸æ˜¯æ•°å€¼ç±»å‹ï¼Œé‚£ä¹ˆè®¡ç®—ç»“æœä¸º0ï¼›</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*ç»Ÿè®¡æ‰€æœ‰å‘˜å·¥å¹³å‡å·¥èµ„ï¼š*/</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="keyword">AVG</span>(sal) <span class="keyword">FROM</span> emp;</span><br></pre></td></tr></table></figure></li></ul><h3 id="åˆ†ç»„æŸ¥è¯¢"><a href="#åˆ†ç»„æŸ¥è¯¢" class="headerlink" title="åˆ†ç»„æŸ¥è¯¢"></a>åˆ†ç»„æŸ¥è¯¢</h3><ul><li><p>æ™®é€šåˆ†ç»„</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*æŸ¥è¯¢æ¯ä¸ªéƒ¨é—¨çš„éƒ¨é—¨ç¼–å·å’Œæ¯ä¸ªéƒ¨é—¨çš„å·¥èµ„å’Œï¼š*/</span></span><br><span class="line"><span class="keyword">SELECT</span> deptno, <span class="keyword">SUM</span>(sal) </span><br><span class="line"><span class="keyword">FROM</span> emp </span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> deptno;</span><br><span class="line"><span class="comment">/*å‡¡å’Œèšåˆå‡½æ•°åŒæ—¶å‡ºç°çš„åˆ—åï¼Œä¸€å®šè¦å†™åœ¨group by ä¹‹å*/</span></span><br></pre></td></tr></table></figure></li><li><p><code>HAVING</code></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*æŸ¥è¯¢å·¥èµ„æ€»å’Œå¤§äº9000çš„éƒ¨é—¨ç¼–å·ä»¥åŠå·¥èµ„å’Œï¼š*/</span></span><br><span class="line"><span class="keyword">SELECT</span> deptno, <span class="keyword">SUM</span>(sal)</span><br><span class="line"><span class="keyword">FROM</span> emp</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> deptno</span><br><span class="line"><span class="keyword">HAVING</span> <span class="keyword">SUM</span>(sal) &gt; <span class="number">9000</span>;</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨æ„ç‚¹</p></blockquote><p>havingä¸whereçš„åŒºåˆ«:</p><ol><li><p><code>having</code>æ˜¯åœ¨åˆ†ç»„åå¯¹æ•°æ®è¿›è¡Œè¿‡æ»¤.</p><p><code>where</code>æ˜¯åœ¨åˆ†ç»„å‰å¯¹æ•°æ®è¿›è¡Œè¿‡æ»¤â€‹        </p></li><li><p><code>having</code>åé¢å¯ä»¥ä½¿ç”¨èšåˆå‡½æ•°(ç»Ÿè®¡å‡½æ•°)</p></li></ol><p>â€‹         <code>where</code>åé¢ä¸å¯ä»¥ä½¿ç”¨èšåˆå‡½æ•°ã€‚</p><p><code>WHERE</code>æ˜¯å¯¹åˆ†ç»„å‰è®°å½•çš„æ¡ä»¶ï¼Œå¦‚æœæŸè¡Œè®°å½•æ²¡æœ‰æ»¡è¶³WHEREå­å¥çš„æ¡ä»¶ï¼Œé‚£ä¹ˆè¿™è¡Œè®°å½•ä¸ä¼šå‚åŠ åˆ†ç»„ï¼›è€Œ<code>HAVING</code>æ˜¯å¯¹åˆ†ç»„åæ•°æ®çš„çº¦æŸã€‚</p></li></ul><h3 id="LIMITï¼ˆç‰¹æœ‰ï¼‰"><a href="#LIMITï¼ˆç‰¹æœ‰ï¼‰" class="headerlink" title="LIMITï¼ˆç‰¹æœ‰ï¼‰"></a>LIMITï¼ˆç‰¹æœ‰ï¼‰</h3><ul><li>LIMITç”¨æ¥é™å®šæŸ¥è¯¢ç»“æœçš„èµ·å§‹è¡Œï¼Œä»¥åŠæ€»è¡Œæ•°ã€‚ï¼ˆä½œåˆ†é¡µç”¨ï¼‰</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*æŸ¥è¯¢5è¡Œè®°å½•ï¼Œèµ·å§‹è¡Œä»0å¼€å§‹*/</span></span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> emp <span class="keyword">LIMIT</span> <span class="number">0</span>, <span class="number">5</span>;</span><br></pre></td></tr></table></figure><h2 id="å¤šè¡¨æŸ¥è¯¢"><a href="#å¤šè¡¨æŸ¥è¯¢" class="headerlink" title="å¤šè¡¨æŸ¥è¯¢"></a>å¤šè¡¨æŸ¥è¯¢</h2><ul><li><p>åˆå¹¶ç»“æœé›†ï¼›UNION ã€  UNION ALL</p></li><li><p>è¿æ¥æŸ¥è¯¢</p><ul><li>å†…è¿æ¥  [INNER] JOIN  ON </li><li>å¤–è¿æ¥  OUTER JOIN ON<ul><li>å·¦å¤–è¿æ¥ LEFT [OUTER] JOIN</li><li>å³å¤–è¿æ¥ RIGHT [OUTER] JOIN</li><li>å…¨å¤–è¿æ¥ï¼ˆMySQLä¸æ”¯æŒï¼‰FULL JOIN</li></ul></li><li>è‡ªç„¶è¿æ¥  NATURAL JOIN</li></ul></li><li>å­æŸ¥è¯¢</li></ul><h3 id="åˆå¹¶ç»“æœé›†"><a href="#åˆå¹¶ç»“æœé›†" class="headerlink" title="åˆå¹¶ç»“æœé›†"></a>åˆå¹¶ç»“æœé›†</h3><ul><li><p>ä½œç”¨</p><ul><li>åˆå¹¶ç»“æœé›†å°±æ˜¯æŠŠä¸¤ä¸ªselectè¯­å¥çš„æŸ¥è¯¢ç»“æœåˆå¹¶åˆ°ä¸€èµ·ï¼</li></ul></li><li><p>ä¸¤ç§æ–¹å¼</p><ul><li><p>UNIONï¼šå»é™¤é‡å¤è®°å½•</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> t1 <span class="keyword">UNION</span> <span class="keyword">SELECT</span> * <span class="keyword">FROM</span> t2ï¼›</span><br></pre></td></tr></table></figure></li><li><p>UNION ALLï¼šä¸å»é™¤é‡å¤è®°å½•</p></li></ul></li></ul><blockquote><p>è¦æ±‚ï¼š</p></blockquote><p><strong>è¦è¢«åˆå¹¶çš„ä¸¤ä¸ªç»“æœï¼šåˆ—æ•°ã€åˆ—ç±»å‹å¿…é¡»ç›¸åŒï¼Œåˆ—åå¯ä¸åŒã€‚</strong></p><h3 id="è¿æ¥æŸ¥è¯¢"><a href="#è¿æ¥æŸ¥è¯¢" class="headerlink" title="è¿æ¥æŸ¥è¯¢"></a>è¿æ¥æŸ¥è¯¢</h3><p>è¿æ¥æŸ¥è¯¢ä¼šäº§ç”Ÿç¬›å¡å°”ç§¯</p><p><strong>ä½¿ç”¨ä¸»å¤–é”®å…³ç³»åšä¸ºæ¡ä»¶æ¥å»é™¤æ— ç”¨ä¿¡æ¯</strong></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> emp,dept <span class="keyword">WHERE</span> emp.deptno=dept.deptno</span><br></pre></td></tr></table></figure><ul><li>å†…è¿æ¥<ul><li>ç‰¹ç‚¹ï¼šæŸ¥è¯¢ç»“æœå¿…é¡»æ»¡è¶³æ¡ä»¶ã€‚</li></ul></li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * </span><br><span class="line"><span class="keyword">FROM</span> emp e </span><br><span class="line"><span class="keyword">INNER</span> <span class="keyword">JOIN</span> dept d <span class="comment">/*MySQLé»˜è®¤çš„è¿æ¥æ–¹å¼å°±æ˜¯å†…è¿æ¥*/</span></span><br><span class="line"><span class="keyword">ON</span> e.deptno=d.deptno;</span><br></pre></td></tr></table></figure><ul><li>å¤–è¿æ¥(å·¦ã€å³è¿æ¥)<ul><li>ç‰¹ç‚¹ï¼šæŸ¥è¯¢å‡ºçš„ç»“æœå­˜åœ¨ä¸æ»¡è¶³æ¡ä»¶çš„å¯èƒ½(ä¸æ»¡è¶³æ¡ä»¶çš„æ˜¾ç¤ºNULLã€‚)ã€‚</li></ul></li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*å·¦è¿æ¥*/</span></span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> emp e </span><br><span class="line"><span class="keyword">LEFT</span> <span class="keyword">OUTER</span> <span class="keyword">JOIN</span> dept d </span><br><span class="line"><span class="keyword">ON</span> e.deptno=d.deptno;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*å³è¿æ¥*/</span></span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> emp e </span><br><span class="line"><span class="keyword">RIGHT</span> <span class="keyword">OUTER</span> <span class="keyword">JOIN</span> dept d </span><br><span class="line"><span class="keyword">ON</span> e.deptno=d.deptno;</span><br></pre></td></tr></table></figure><h3 id="è‡ªç„¶è¿æ¥"><a href="#è‡ªç„¶è¿æ¥" class="headerlink" title="è‡ªç„¶è¿æ¥"></a>è‡ªç„¶è¿æ¥</h3><p>è¿æ¥æŸ¥è¯¢ä¼šäº§ç”Ÿæ— ç”¨ç¬›å¡å°”ç§¯ï¼Œæˆ‘ä»¬é€šå¸¸ä½¿ç”¨ä¸»å¤–é”®å…³ç³»ç­‰å¼æ¥å»é™¤å®ƒã€‚è€Œè‡ªç„¶è¿æ¥æ— éœ€ä½ å»ç»™å‡ºä¸»å¤–é”®ç­‰å¼ï¼Œå®ƒä¼šè‡ªåŠ¨æ‰¾åˆ°è¿™ä¸€ç­‰å¼ã€‚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> emp <span class="keyword">NATURAL</span> <span class="keyword">JOIN</span> dept;</span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> emp <span class="keyword">NATURAL</span> <span class="keyword">LEFT</span> <span class="keyword">JOIN</span> dept;</span><br><span class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> emp <span class="keyword">NATURAL</span> <span class="keyword">RIGHT</span> <span class="keyword">JOIN</span> dept;</span><br></pre></td></tr></table></figure><h3 id="å­æŸ¥è¯¢"><a href="#å­æŸ¥è¯¢" class="headerlink" title="å­æŸ¥è¯¢"></a>å­æŸ¥è¯¢</h3><ul><li><p>å‡ºç°ä½ç½®</p><ul><li><p>whereåï¼Œä½œä¸ºæ¡ä¸ºè¢«æŸ¥è¯¢çš„ä¸€æ¡ä»¶çš„ä¸€éƒ¨åˆ†ï¼›</p></li><li><p>fromåï¼Œä½œè¡¨ï¼›</p></li></ul></li><li><p>å½“å­æŸ¥è¯¢å‡ºç°åœ¨whereåä½œä¸ºæ¡ä»¶æ—¶ï¼Œè¿˜å¯ä»¥ä½¿ç”¨å¦‚ä¸‹å…³é”®å­—ï¼š</p><ul><li><p>any</p></li><li><p>all</p></li></ul></li><li><p>å­æŸ¥è¯¢ç»“æœé›†çš„å½¢å¼ï¼š</p><ul><li>å•è¡Œå•åˆ—ï¼ˆç”¨äºæ¡ä»¶ï¼‰</li><li>å•è¡Œå¤šåˆ—ï¼ˆç”¨äºæ¡ä»¶ï¼‰</li><li>å¤šè¡Œå•åˆ—ï¼ˆç”¨äºæ¡ä»¶ï¼‰</li><li>å¤šè¡Œå¤šåˆ—ï¼ˆç”¨äºè¡¨ï¼‰</li></ul></li></ul><h3 id="è‡ªè¿æ¥"><a href="#è‡ªè¿æ¥" class="headerlink" title="è‡ªè¿æ¥"></a>è‡ªè¿æ¥</h3><p>è‡ªå·±è¿æ¥è‡ªå·±ï¼Œèµ·åˆ«å</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*æ±‚7369å‘˜å·¥ç¼–å·ã€å§“åã€ç»ç†ç¼–å·å’Œç»ç†å§“å*/</span></span><br><span class="line"><span class="keyword">SELECT</span> e1.empno , e1.ename,e2.mgr,e2.ename </span><br><span class="line"><span class="keyword">FROM</span> emp e1, emp e2 </span><br><span class="line"><span class="keyword">WHERE</span> e1.mgr = e2.empno <span class="keyword">AND</span> e1.empno = <span class="number">7369</span>;</span><br></pre></td></tr></table></figure><h1 id="JDBC"><a href="#JDBC" class="headerlink" title="JDBC"></a>JDBC</h1><ul><li>æ“ä½œ</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"> <span class="comment">//1ã€æ³¨å†Œé©±åŠ¨</span></span><br><span class="line">DriverManager.registerDriver(<span class="keyword">new</span> com.mysql.jdbc.Driver());</span><br><span class="line"><span class="comment">//2ã€åˆ›å»ºè¿æ¥</span></span><br><span class="line">Connection conn = DriverManager.getConnection(<span class="string">"jdbc:mysql://localhost:3306/test"</span>, <span class="string">"root"</span>, <span class="string">""</span>);</span><br><span class="line"><span class="comment">//3ã€å¾—åˆ°æ“ä½œdbçš„sqlè¯­å¥çš„å¯¹è±¡Statement</span></span><br><span class="line">Statement stmt = conn.createStatement();</span><br><span class="line"><span class="comment">//4ã€æ‰§è¡Œsql</span></span><br><span class="line">ResultSet rs = stmt.executeQuery(<span class="string">"select * from emp limit 0, 1"</span>);</span><br><span class="line"><span class="comment">//5ã€å¤„ç†ç»“æœ</span></span><br><span class="line"><span class="keyword">while</span> (rs.next()) &#123;</span><br><span class="line">    System.out.println(rs.getObject(<span class="number">1</span>));<span class="comment">//ç»“æœæŸè¡Œç¬¬ä¸€åˆ—</span></span><br><span class="line">    System.out.println(rs.getObject(<span class="number">2</span>));</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//6ã€å…³é—­èµ„æº</span></span><br><span class="line">rs.close();</span><br><span class="line">stmt.close();</span><br><span class="line">conn.close();</span><br></pre></td></tr></table></figure><h2 id="å¸¸ç”¨ç±»å’Œæ¥å£"><a href="#å¸¸ç”¨ç±»å’Œæ¥å£" class="headerlink" title="å¸¸ç”¨ç±»å’Œæ¥å£"></a>å¸¸ç”¨ç±»å’Œæ¥å£</h2><h3 id="java-sql-Drivermanagerç±»"><a href="#java-sql-Drivermanagerç±»" class="headerlink" title="java.sql.Drivermanagerç±»"></a>java.sql.Drivermanagerç±»</h3><ul><li><p>åˆ›å»ºè¿æ¥</p></li><li><p>æ³¨å†Œé©±åŠ¨</p><p><code>DriverManager.registerDriver(new com.mysql.jdbc.Driver());</code>ä¸å»ºè®®ä½¿ç”¨</p><ul><li>å¯¼è‡´é©±åŠ¨è¢«æ³¨å†Œ2æ¬¡ï¼ˆ<code>com.mysql.jdbc.Driver</code>ä¸­æœ‰é™æ€ä»£ç å—æ³¨å†Œé©±åŠ¨ï¼‰</li><li>å¼ºçƒˆä¾èµ–æ•°æ®åº“çš„é©±åŠ¨jar</li></ul><blockquote><p>æ¨èä½¿ç”¨</p></blockquote><p><code>Class.forName(&quot;com.mysql.jdbc.Driver&quot;);</code>//ç›´æ¥åŠ è½½è¿™ä¸ªClass</p></li></ul><h3 id="java-sql-Connectionæ¥å£ï¼š"><a href="#java-sql-Connectionæ¥å£ï¼š" class="headerlink" title="java.sql.Connectionæ¥å£ï¼š"></a>java.sql.Connectionæ¥å£ï¼š</h3><ul><li>ä¸€ä¸ªè¿æ¥</li></ul><p><code>Statement createStatement();</code> //åˆ›å»ºæ“ä½œsqlè¯­å¥çš„å¯¹è±¡</p><h3 id="java-sql-Statementæ¥å£"><a href="#java-sql-Statementæ¥å£" class="headerlink" title="java.sql.Statementæ¥å£"></a>java.sql.Statementæ¥å£</h3><ul><li>æ“ä½œsqlè¯­å¥ï¼Œå¹¶è¿”å›ç›¸åº”ç»“æœçš„å¯¹è±¡</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">ResultSet  <span class="title">executeQuery</span><span class="params">(String sql)</span> </span></span><br><span class="line"><span class="function"><span class="comment">//æ ¹æ®æŸ¥è¯¢è¯­å¥è¿”å›ç»“æœé›†ã€‚åªèƒ½æ‰§è¡Œselectè¯­å¥ã€‚</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">executeUpdate</span><span class="params">(String sql)</span> </span></span><br><span class="line"><span class="function"><span class="comment">//æ ¹æ®æ‰§è¡Œçš„DMLï¼ˆinsert update deleteï¼‰è¯­å¥ï¼Œè¿”å›å—å½±å“çš„è¡Œæ•°ã€‚</span></span></span><br><span class="line"><span class="function"><span class="keyword">boolean</span> <span class="title">execute</span><span class="params">(String sql)</span> </span></span><br><span class="line"><span class="function"><span class="comment">//æ­¤æ–¹æ³•å¯ä»¥æ‰§è¡Œä»»æ„sqlè¯­å¥ã€‚è¿”å›booleanå€¼ï¼Œè¡¨ç¤ºæ˜¯å¦è¿”å›ResultSetç»“æœé›†ã€‚ä»…å½“æ‰§è¡Œselectè¯­å¥ï¼Œä¸”æœ‰è¿”å›ç»“æœæ—¶è¿”å›true, å…¶å®ƒè¯­å¥éƒ½è¿”å›false;</span></span></span><br></pre></td></tr></table></figure><h3 id="java-sql-ResultSetæ¥å£"><a href="#java-sql-ResultSetæ¥å£" class="headerlink" title="java.sql.ResultSetæ¥å£"></a>java.sql.ResultSetæ¥å£</h3><ul><li>ç»“æœé›†ï¼ˆå®¢æˆ·ç«¯å­˜è¡¨æ•°æ®çš„å¯¹è±¡ï¼‰</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">Object <span class="title">getObject</span><span class="params">(<span class="keyword">int</span> columnIndex)</span></span>;<span class="comment">//æ ¹æ®åºå·å–å€¼ï¼Œç´¢å¼•ä»1å¼€å§‹</span></span><br><span class="line"><span class="function">Object <span class="title">getObject</span><span class="params">(String ColomnName)</span></span>; <span class="comment">//æ ¹æ®åˆ—åå–å€¼ã€‚</span></span><br></pre></td></tr></table></figure><ul><li><p>å°†ç»“æœé›†ä¸­çš„æ•°æ®å°è£…åˆ°javaBeanä¸­</p><ul><li><p>javaçš„æ•°æ®ç±»å‹ä¸æ•°æ®åº“ä¸­çš„ç±»å‹çš„å…³ç³»</p><p>byte               tityint</p><p>short             smallint</p><p>int                  int</p><p>long             bigint</p><p>float             float</p><p>double            double</p><p>String            char varchar </p><p>Date             date</p></li></ul></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">boolean</span> <span class="title">next</span><span class="params">()</span><span class="comment">//å°†å…‰æ ‡ä»å½“å‰ä½ç½®å‘ä¸‹ç§»åŠ¨ä¸€è¡Œ</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">getInt</span><span class="params">(<span class="keyword">int</span> colIndex)</span><span class="comment">//ä»¥intå½¢å¼è·å–ResultSetç»“æœé›†å½“å‰è¡ŒæŒ‡å®šåˆ—å·å€¼</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">getInt</span><span class="params">(String colLabel)</span><span class="comment">//ä»¥intå½¢å¼è·å–ResultSetç»“æœé›†å½“å‰è¡ŒæŒ‡å®šåˆ—åå€¼</span></span></span><br><span class="line"><span class="function"><span class="keyword">float</span> <span class="title">getFloat</span><span class="params">(String colLabel)</span></span></span><br><span class="line"><span class="function">String <span class="title">getString</span><span class="params">(String colLabel)</span>  </span></span><br><span class="line"><span class="function">Date <span class="title">getDate</span><span class="params">(String columnName)</span></span>;</span><br></pre></td></tr></table></figure><ul><li>å¯ç§»åŠ¨æ¸¸æ ‡</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">boolean</span> <span class="title">next</span><span class="params">()</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">boolean</span> <span class="title">previous</span><span class="params">()</span></span>;<span class="comment">//å°†å…‰æ ‡ç§»åŠ¨åˆ°æ­¤ ResultSet å¯¹è±¡çš„ä¸Šä¸€è¡Œã€‚</span></span><br><span class="line"><span class="function"><span class="keyword">boolean</span> <span class="title">absolute</span><span class="params">(<span class="keyword">int</span> row)</span></span>;<span class="comment">//å‚æ•°æ˜¯å½“å‰è¡Œçš„ç´¢å¼•ï¼Œä»1å¼€å§‹ã€‚æ ¹æ®è¡Œçš„ç´¢å¼•å®šä½ç§»åŠ¨çš„æŒ‡å®šç´¢å¼•è¡Œã€‚</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">afterLast</span><span class="params">()</span></span>;<span class="comment">//å°†å…‰æ ‡ç§»åŠ¨åˆ°æœ«å°¾ï¼Œæ­£å¥½ä½äºæœ€åä¸€è¡Œä¹‹åã€‚</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">beforeFirst</span><span class="params">()</span></span>;<span class="comment">//å°†å…‰æ ‡ç§»åŠ¨åˆ°å¼€å¤´ï¼Œæ­£å¥½ä½äºç¬¬ä¸€è¡Œä¹‹å‰ã€‚</span></span><br></pre></td></tr></table></figure><h3 id="é‡Šæ”¾èµ„æº"><a href="#é‡Šæ”¾èµ„æº" class="headerlink" title="é‡Šæ”¾èµ„æº"></a>é‡Šæ”¾èµ„æº</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">Connection conn = <span class="keyword">null</span>;</span><br><span class="line">Statement stmt = <span class="keyword">null</span>;</span><br><span class="line">ResultSet rs = <span class="keyword">null</span>;</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">  ...  </span><br><span class="line">&#125; <span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">&#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (rs != <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            rs.close();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//stmtã€connåŒrs</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="CRUD"><a href="#CRUD" class="headerlink" title="CRUD"></a>CRUD</h2><ul><li><p>SQLæ³¨å…¥é—®é¢˜ï¼š<code>preparedStatement</code></p><p>preparedStatementï¼šé¢„ç¼–è¯‘å¯¹è±¡ï¼Œ æ˜¯Statementå¯¹è±¡çš„å­ç±»ã€‚</p><ul><li>ç‰¹ç‚¹<ul><li>æ€§èƒ½è¦é«˜ï¼Œä¼šæŠŠsqlè¯­å¥å…ˆç¼–è¯‘</li><li>sqlè¯­å¥ä¸­çš„å‚æ•°ä¼šå‘ç”Ÿå˜åŒ–ï¼Œè¿‡æ»¤æ‰ç”¨æˆ·è¾“å…¥çš„å…³é”®å­—</li></ul></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">String sql = <span class="string">"select * from users where name? and password=?"</span>;</span><br><span class="line">ps = conn.prepareStatement(sql); </span><br><span class="line"><span class="comment">//ç»™é¢„ç¼–è¯‘sqlèµ‹å€¼</span></span><br><span class="line">ps.setString(<span class="number">1</span>, name); <span class="comment">//1ä»£è¡¨sqlè¯­å¥ç¬¬ä¸€ä¸ªï¼Ÿ</span></span><br><span class="line">ps.setString(<span class="number">2</span>, password);</span><br><span class="line">ps.executeQuery();</span><br></pre></td></tr></table></figure></li><li><p>DBUtils</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DBUtils</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span>&#123;</span><br><span class="line">        åŠ è½½é©±åŠ¨</span><br><span class="line">    &#125;</span><br><span class="line">    æ–¹æ³•ï¼šè·å–è¿æ¥</span><br><span class="line">    æ–¹æ³•ï¼šå…³é—­èµ„æº</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>Insert</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">stmt = conn.prepareStatement(<span class="string">"INSERT INTO users VALUES(?,?,?,?,?)"</span>);</span><br><span class="line"><span class="keyword">int</span> i = stmt.executeUpdate();</span><br><span class="line"><span class="keyword">if</span>(i&gt;<span class="number">0</span>)&#123;</span><br><span class="line">    System.out.println(<span class="string">"success"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>Update</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">stmt = conn.prepareStatement(<span class="string">"UPDATE users SET NAME=?,PASSWORD=?,email=? WHERE id=?"</span>);</span><br><span class="line">stmt.setString(<span class="number">1</span>, <span class="string">"fyd"</span>);</span><br><span class="line">stmt.setString(<span class="number">2</span>, <span class="string">"208"</span>);</span><br><span class="line">stmt.setString(<span class="number">3</span>, <span class="string">"lp@163.com"</span>);</span><br><span class="line">stmt.setInt(<span class="number">4</span>, <span class="number">1206</span>);</span><br><span class="line"><span class="keyword">int</span> i = stmt.executeUpdate();</span><br></pre></td></tr></table></figure></li><li><p>Delete</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">stmt = conn.createStatement();</span><br><span class="line"><span class="keyword">int</span> i = stmt.executeUpdate(<span class="string">"DELETE FROM users WHERE id=4"</span>);</span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      
      <categories>
          
          <category> Mysql </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Mysql </tag>
            
            <tag> JDBC </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>JavaWebåŸºç¡€å­¦ä¹ (1)</title>
      <link href="/2018/12/10/JavaWeb/JavaWeb%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A01/"/>
      <url>/2018/12/10/JavaWeb/JavaWeb%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A01/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote class="blockquote-center"><p>XMLè¯­è¨€ã€TomcatæœåŠ¡å™¨ã€Servletã€JSPç®€ä»‹</p></blockquote><p><img src="https://image-link.nos-eastchina1.126.net/javaweb_01"></p><a id="more"></a><h1 id="XML"><a href="#XML" class="headerlink" title="XML"></a>XML</h1><ol><li>æ¦‚è¿°</li></ol><ul><li>å¯æ‰©å±•ï¼šæ‰€æœ‰çš„æ ‡ç­¾éƒ½æ˜¯è‡ªå®šä¹‰çš„ã€‚  </li><li><p>åŠŸèƒ½ï¼šæ•°æ®å­˜å‚¨</p><ul><li>é…ç½®æ–‡ä»¶</li><li>æ•°æ®ä¼ è¾“</li></ul></li><li><p>htmlä¸xmlåŒºåˆ«ï¼š</p><ul><li>htmlè¯­æ³•æ¾æ•£ï¼Œxmlè¯­æ³•ä¸¥æ ¼</li><li>htmlåšé¡µé¢å±•ç¤ºï¼Œxmlåš<strong>æ•°æ®å­˜å‚¨</strong></li><li>htmlæ‰€æœ‰æ ‡ç­¾éƒ½æ˜¯é¢„å®šä¹‰çš„ï¼Œxmlæ‰€æœ‰æ ‡ç­¾éƒ½æ˜¯è‡ªå®šä¹‰çš„</li></ul></li></ul><ol><li>è¯­æ³•</li></ol><ul><li><p>æ–‡æ¡£å£°æ˜ï¼š</p><ul><li>å¿…é¡»å†™åœ¨xmlæ–‡æ¡£çš„ç¬¬ä¸€è¡Œã€‚</li><li>å†™æ³•ï¼š<code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;</code></li><li>å±æ€§ï¼š    <ul><li>versionï¼šç‰ˆæœ¬å· å›ºå®šå€¼ 1.0</li><li>encoding:æŒ‡å®šæ–‡æ¡£çš„ç è¡¨ã€‚é»˜è®¤å€¼ä¸º iso-8859-1</li><li>standaloneï¼šæŒ‡å®šæ–‡æ¡£æ˜¯å¦ç‹¬ç«‹  yes æˆ– no</li></ul></li></ul></li><li><p>å…ƒç´ ï¼šxmlæ–‡æ¡£ä¸­çš„æ ‡ç­¾</p><ul><li><p>æ–‡æ¡£ä¸­å¿…é¡»æœ‰ä¸”åªèƒ½æœ‰ä¸€ä¸ªæ ¹å…ƒç´ </p></li><li><p>å…ƒç´ éœ€è¦æ­£ç¡®é—­åˆã€‚<code>&lt;body&gt;&lt;/body&gt; &lt;br/&gt;</code></p></li><li>å…ƒç´ éœ€è¦æ­£ç¡®åµŒå¥—</li><li>å…ƒç´ åç§°è¦éµå®ˆï¼š<ul><li>å…ƒç´ åç§°åŒºåˆ†å¤§å°å†™</li><li>æ•°å­—ä¸èƒ½å¼€å¤´</li></ul></li></ul></li><li><p>æ–‡æœ¬ï¼š</p><ul><li>è½¬ä¹‰å­—ç¬¦ï¼š<code>&amp;gt;</code>  ç­‰ä»·äº&gt;</li><li>CDATA: é‡Œè¾¹çš„æ•°æ®ä¼šåŸæ ·æ˜¾ç¤º<ul><li><code>&lt;![CDATA[ æ•°æ®å†…å®¹ ]]&gt;</code></li></ul></li></ul></li><li><p>å±æ€§ï¼š</p><ul><li>å±æ€§å€¼å¿…é¡»ç”¨å¼•å·å¼•èµ·æ¥ã€‚å•åŒå¼•å·éƒ½è¡Œ</li></ul></li><li><p>æ³¨é‡Šï¼š</p><!-- --></li><li><p>å¤„ç†æŒ‡ä»¤ï¼šç°åœ¨åŸºæœ¬ä¸ç”¨<br><code>&lt;?xml-stylesheet type=&quot;text/css&quot; href=&quot;1.css&quot;?&gt;</code></p></li></ul><ol><li><p>xmlçº¦æŸ</p><p>1ï¼‰ã€dtd:</p><ul><li>å†…éƒ¨dtdï¼šåœ¨xmlå†…éƒ¨å®šä¹‰dtd(äº†è§£ï¼Œä¸€èˆ¬ä¸è‡ªå·±å†™)</li></ul></li></ol><ul><li><p>å¤–éƒ¨dtdï¼šåœ¨å¤–éƒ¨æ–‡ä»¶ä¸­å®šä¹‰dtd<br>â€‹    * æœ¬åœ°dtdæ–‡ä»¶ï¼š<code>&lt;!DOCTYPE students SYSTEM  &quot;student.dtd&quot;&gt;</code></p><ul><li>ç½‘ç»œdtdæ–‡ä»¶ï¼š<code>&lt;!DOCTYPE students PUBLIC &quot;åç§°ç©ºé—´&quot;  &quot;student.dtd&quot;&gt;</code></li></ul><p>2ï¼‰ã€schema:</p></li><li><p>å¯¼å…¥xsdçº¦æŸæ–‡æ¡£ï¼š</p><ul><li>ç¼–å†™æ ¹æ ‡ç­¾</li><li>å¼•å…¥å®ä¾‹åç§°ç©ºé—´ <code>xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</code></li><li>å¼•å…¥åç§°ç©ºé—´ <code>xsi:schemaLocation=&quot;localhost/xml student.xsd&quot;</code></li><li>å¼•å…¥é»˜è®¤çš„åç§°ç©ºé—´</li></ul></li></ul><ol><li>xmlè§£æ<ul><li>DOM4Jè§£æ</li><li>XPATH(ä¸“ç”¨äºæŸ¥è¯¢)</li></ul></li></ol><h1 id="æœåŠ¡å™¨"><a href="#æœåŠ¡å™¨" class="headerlink" title="æœåŠ¡å™¨"></a>æœåŠ¡å™¨</h1><ul><li><p>javaEEè§„èŒƒï¼š</p><ul><li>13ç§æŠ€æœ¯çš„æ€»ç§°ã€‚<code>Servelet/Jsp</code>ã€<code>JDBC</code>ã€<code>JNDI</code>ã€<code>JTA</code>â€¦</li></ul></li><li><p>å¸¸è§æœåŠ¡å™¨</p><ul><li><p>WebLogicã€WebSphereASã€JbossASï¼Œéƒ½æ”¯æŒjavaEEè§„èŒƒ</p></li><li><p>è½»é‡çº§Tomcatï¼Œæ”¯æŒ<code>Servelet/Jsp</code>è§„èŒƒ</p></li></ul></li></ul><h2 id="Tomcat"><a href="#Tomcat" class="headerlink" title="Tomcat"></a>Tomcat</h2><ul><li><p>ç›®å½•</p><p><img src="/2018/12/10/JavaWeb/JavaWebåŸºç¡€å­¦ä¹ 1/ç›®å½•ä»‹ç».jpg" alt=""></p></li></ul><h2 id="HTTP"><a href="#HTTP" class="headerlink" title="HTTP"></a>HTTP</h2><ul><li><p>è¯·æ±‚</p><p><img src="/2018/12/10/JavaWeb/JavaWebåŸºç¡€å­¦ä¹ 1/request.png" alt=""></p><ul><li><p>è¯·æ±‚æ¶ˆæ¯è¡Œ</p><p><code>GET  /index.html?name=lp&amp;pwd=fyd  HTTP/1.1</code></p></li><li><p>è¯·æ±‚æ¶ˆæ¯å¤´</p><ul><li>Accept:æµè§ˆå™¨å¯æ¥å—çš„MIMEç±»å‹(èƒ½æ¥æ”¶çš„æ–‡ä»¶ç±»å‹)</li><li>Accept-Encoding:æµè§ˆå™¨èƒ½å¤Ÿè¿›è¡Œè§£ç çš„æ•°æ®ç¼–ç æ–¹å¼</li><li>â€¦â€¦</li></ul></li><li><p>æ¶ˆæ¯æ­£æ–‡</p><p><code>name=lp&amp;pwd=fyd</code></p></li></ul></li><li><p>å“åº”</p><ul><li><p>å“åº”æ¶ˆæ¯è¡Œ</p><p><code>HTTP/1.1   200   OK</code></p><p>åè®®/ç‰ˆæœ¬   å“åº”çŠ¶æ€ç   å¯¹å“åº”ç çš„æè¿°ï¼ˆä¸€åˆ‡æ­£å¸¸ï¼‰</p><ul><li><p>200(æ­£å¸¸)  ä¸€åˆ‡æ­£å¸¸</p></li><li><p>302/307(ä¸´æ—¶é‡å®šå‘)</p></li><li><p>304(æœªä¿®æ”¹)</p><ul><li>è¡¨ç¤ºå®¢æˆ·æœºç¼“å­˜çš„ç‰ˆæœ¬æ˜¯æœ€æ–°çš„ï¼Œå®¢æˆ·æœºå¯ä»¥ç»§ç»­ä½¿ç”¨å®ƒï¼Œæ— éœ€åˆ°æœåŠ¡å™¨è¯·æ±‚ã€‚</li></ul></li><li><p>404(æ‰¾ä¸åˆ°)  æœåŠ¡å™¨ä¸Šä¸å­˜åœ¨å®¢æˆ·æœºæ‰€è¯·æ±‚çš„èµ„æºã€‚</p></li><li><p>500(æœåŠ¡å™¨å†…éƒ¨é”™è¯¯)</p></li></ul></li><li><p>å“åº”æ¶ˆæ¯å¤´</p></li><li><p>å“åº”æ­£æ–‡</p></li></ul></li></ul><h2 id="Servlet"><a href="#Servlet" class="headerlink" title="Servlet"></a>Servlet</h2><p>â€‹    servlet æ˜¯è¿è¡Œåœ¨ Web æœåŠ¡å™¨ä¸­çš„å°å‹ Java ç¨‹åºï¼ˆå³ï¼šæœåŠ¡å™¨ç«¯çš„å°åº”ç”¨ç¨‹åºï¼‰<strong>æ— é¡»æ‰‹åŠ¨new</strong>ã€‚servlet é€šå¸¸é€šè¿‡ HTTPï¼ˆè¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼‰æ¥æ”¶å’Œå“åº”æ¥è‡ª Web å®¢æˆ·ç«¯çš„è¯·æ±‚ã€‚</p><ul><li>å†™ä¸€ä¸ªJavaç±»ï¼Œå®ç°servlet</li><li>ä¿®æ”¹web.xmlæ–‡ä»¶ï¼Œç»™servletæä¾›ä¸€ä¸ªå¯è®¿é—®çš„URIåœ°å€</li></ul><h3 id="æ‰§è¡Œè¿‡ç¨‹"><a href="#æ‰§è¡Œè¿‡ç¨‹" class="headerlink" title="æ‰§è¡Œè¿‡ç¨‹"></a>æ‰§è¡Œè¿‡ç¨‹</h3><ol><li><p>æµè§ˆå™¨   <code>:8080/myWebApp/demo</code></p></li><li><p>tomcat   æ‰¾åˆ°<code>myWebApp</code></p></li><li><p>web.xml  æ‰¾åˆ°<code>/demo</code>å</p></li><li><p>é€šè¿‡<code>&lt;servlet-name&gt;</code>æ‰¾åˆ°å¯¹åº”çš„<code>.class</code>å¹¶å®ä¾‹åŒ–(å•å®ä¾‹)</p><p>(<code>&lt;load-on-startup&gt;</code>å¯ä»¥å¯åŠ¨å°±å®ä¾‹åŒ–ï¼Œæ•°å­—è¡¨ç¤ºä¼˜å…ˆçº§)</p></li><li><p>è°ƒç”¨<code>init()</code></p></li><li><p>è°ƒç”¨<code>service()</code>ï¼Œå¤šçº¿ç¨‹ï¼ˆæ¥ä¸€æ¬¡è¯·æ±‚è°ƒç”¨ä¸€æ¬¡ï¼‰</p></li><li><p>æŠŠä¿¡æ¯å“åº”ç»™å®¢æˆ·ç«¯ </p></li><li><p>ç›´åˆ°<code>myWebApp</code>è¢«å¸è½½è°ƒç”¨<code>destroy()</code></p></li></ol><h3 id="ä¸‰ç§åˆ›å»ºæ–¹å¼"><a href="#ä¸‰ç§åˆ›å»ºæ–¹å¼" class="headerlink" title="ä¸‰ç§åˆ›å»ºæ–¹å¼"></a>ä¸‰ç§åˆ›å»ºæ–¹å¼</h3><ul><li>å®ç°<code>javax.servlet.Servlet</code>æ¥å£</li><li><p>ç»§æ‰¿<code>javax.servet.GenericServlet</code>ç±»     (é€‚é…å™¨æ¨¡å¼)</p></li><li><p>ç»§æ‰¿<code>javax.servlet.http.HttpServlet</code>ç±»ï¼ˆæ¨¡æ¿æ–¹æ³•è®¾è®¡æ¨¡å¼ï¼‰å¼€å‘ä½¿ç”¨</p></li></ul><blockquote><p>æ³¨æ„ç‚¹</p></blockquote><p>å¦‚æœ<code>&lt;url-pattern&gt;</code>çš„å€¼æ˜¯/ï¼Œè¡¨ç¤ºæ‰§è¡Œé»˜è®¤æ˜ å°„ï¼Œæ‰€æœ‰èµ„æºéƒ½æ˜¯servlet</p><h3 id="æ ¸å¿ƒç±»"><a href="#æ ¸å¿ƒç±»" class="headerlink" title="æ ¸å¿ƒç±»"></a>æ ¸å¿ƒç±»</h3><p><img src="/2018/12/10/JavaWeb/JavaWebåŸºç¡€å­¦ä¹ 1/Servletæ ¸å¿ƒç±».jpg" alt=""></p><h3 id="ServletConfig"><a href="#ServletConfig" class="headerlink" title="ServletConfig"></a>ServletConfig</h3><ul><li>è·å–servleté…ç½®ä¿¡æ¯<ul><li>æ³•1ï¼šé‡å†™<code>init</code>æ–¹æ³•ï¼Œè·å–<code>ServletConfig</code>å¯¹è±¡</li><li>æ³•2ï¼šé€šè¿‡<code>getServletConfig()</code>æ–¹æ³•è·å–å¯¹è±¡</li><li>æ³•3ï¼šç›´æ¥è°ƒç”¨çˆ¶ç±»<code>getInitParameter(key)</code>æ–¹æ³•ï¼Œå› ä¸ºå­ç±»æ²¡é‡å†™è¯¥æ–¹æ³•thisæˆ–è€…superå‡å¯ã€‚</li></ul></li></ul><blockquote><p><strong>æ·±å…¥åˆ†æ</strong></p></blockquote><ol><li><code>HttpServlet</code>ç»§æ‰¿äº†<code>GenericServlet</code>é»˜è®¤çš„<code>init(ServletConfig config)</code>æ–¹æ³•</li><li><p>è¯¥æ–¹æ³•å®ç°äº†æŠ½è±¡ç±»<code>GenericServlet</code>ä¸­ç§æœ‰çš„<code>ServletConfig config</code>çš„èµ‹å€¼</p></li><li><p>ä½¿å¾—<code>HttpServlet</code>çš„thisè°ƒç”¨<code>getInitParameter</code>æ–¹æ³•èƒ½è·å–åˆ°é…ç½®ä¿¡æ¯ã€‚</p></li><li><p>æ‰€ä»¥å¦‚æœé‡å†™äº†initæ–¹æ³•ï¼Œå°±ä¼šå¯¼è‡´thisè°ƒç”¨å¤±è´¥</p></li></ol><h3 id="ServletContext"><a href="#ServletContext" class="headerlink" title="ServletContext"></a>ServletContext</h3><p><code>this.getServletContext()</code>ä»£è¡¨æ•´ä¸ªåº”ç”¨ã€‚</p><p>ä¸€ä¸ªwebApp<strong>åªæœ‰ä¸€ä¸ª</strong>ServletContextå¯¹è±¡ï¼ˆæ— è®ºå¤šå°‘ä¸ªç”¨æˆ·å…±ç”¨ä¸€ä¸ªï¼‰ï¼Œå•å®ä¾‹</p><ul><li><p>åŸŸå¯¹è±¡</p><ul><li>ä½¿å¤šä¸ª<code>Servlet</code>å…±äº«æ•°æ®</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">setAttribute</span><span class="params">(String name,object value)</span></span>;</span><br><span class="line"><span class="comment">//å‘ServletContextå¯¹è±¡çš„mapä¸­æ·»åŠ æ•°æ®</span></span><br><span class="line"><span class="function">Object <span class="title">getAttribute</span><span class="params">(String name)</span></span>;</span><br><span class="line"><span class="comment">//ä»ServletContextå¯¹è±¡çš„mapä¸­å–æ•°æ®</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">rmoveAttribute</span><span class="params">(String name)</span></span>;</span><br><span class="line"><span class="comment">//æ ¹æ®nameå»ç§»é™¤æ•°æ®</span></span><br></pre></td></tr></table></figure></li><li><p>è·å–å…¨å±€é…ç½®ä¿¡æ¯</p><p>web.xmlï¼ˆå¿…é¡»æ˜¯å…¨å±€ï¼Œä¹Ÿå°±æ˜¯åœ¨servletæ ‡ç­¾å¤–éƒ¨çš„ï¼‰</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;context-param&gt;</span><br><span class="line">        &lt;param-name&gt;encoding&lt;/param-name&gt;</span><br><span class="line">        &lt;param-value&gt;UTF-8&lt;/param-value&gt;</span><br><span class="line">&lt;/context-param&gt;</span><br><span class="line">String encoding = sc.getInitParmeter(<span class="string">"encoding"</span>);</span><br></pre></td></tr></table></figure></li><li><p>è·å–èµ„æºè·¯å¾„</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sc.getRealPath(<span class="string">"/WEB-INF/classes/åŒ…å/æ–‡ä»¶å"</span>);</span><br><span class="line">sc.getRealPath(<span class="string">"/index.jsp"</span>)</span><br></pre></td></tr></table></figure></li><li><p>å®ç°servletè½¬å‘</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ServletContext sc = <span class="keyword">this</span>.getServletContext();</span><br><span class="line">RequstDispatcher rd = sc.getRequstDispatcher(<span class="string">"/servlet/new"</span>);</span><br><span class="line"><span class="comment">//ä¸éœ€è¦å†åŠ Appåçš„è·¯å¾„,åªæ˜¯appå†…éƒ¨çš„servletè½¬å‘</span></span><br><span class="line">rd.forward(request, response);</span><br></pre></td></tr></table></figure></li></ul><h3 id="Req-amp-Res"><a href="#Req-amp-Res" class="headerlink" title="Req &amp; Res"></a>Req &amp; Res</h3><ol><li><code>HttpServletResponse</code></li></ol><ul><li><p>å“åº”è¡Œ</p></li><li><p>å“åº”å¤´</p><ul><li><p>ä¸ç¼“å­˜</p><p><code>response.setHeader(&quot;cache-control&quot;, &quot;no-cache&quot;)</code></p><p><code>response.setDateHeader(&quot;expires&quot;,0);</code></p></li><li><p>åˆ·æ–°</p><p><code>response.setHeader(&quot;refresh&quot;, &quot;3;url=...&quot;)</code>3ç§’ååˆ·æ–°åˆ°æ–°é¡µé¢</p></li><li><p>ä¸‹è½½æ–‡ä»¶</p></li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">String filename = URLEncoder.encode(æ–‡ä»¶å, <span class="string">"UTF-8"</span>);</span><br><span class="line"><span class="comment">//å‘ŠçŸ¥å®¢æˆ·ç«¯ä¸‹è½½æ–‡ä»¶</span></span><br><span class="line">response.setHeader(<span class="string">"content-disposition"</span>, <span class="string">"attachment;filename="</span>+filename);</span><br><span class="line">response.setHeader(<span class="string">"content-type"</span>, <span class="string">"image/jpeg"</span>);</span><br></pre></td></tr></table></figure></li><li><p>å“åº”æ­£æ–‡</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">response.setCharacterEncoding(<span class="string">"UTF-8"</span>);<span class="comment">//æœåŠ¡å™¨ç¼–ç </span></span><br><span class="line">response.setHeader(<span class="string">"content-type"</span>, <span class="string">"text/html;charset=UTF-8"</span>);<span class="comment">//å‘Šè¯‰æµè§ˆå™¨åº”ä½¿ç”¨ç¼–ç </span></span><br><span class="line">response.setContentType(<span class="string">"text/html;charset=UTF-8"</span>)<span class="comment">//ä¸€æ­¥åˆ°ä½</span></span><br><span class="line"></span><br><span class="line">response.getWriter().write();</span><br><span class="line">response.getOutputStream().write(<span class="string">"str"</span>.getBytes());</span><br></pre></td></tr></table></figure></li><li><p>è¯·æ±‚é‡å®šå‘</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">response.setStatus(<span class="number">302</span>);</span><br><span class="line">response.setHeader(<span class="string">"location"</span>, <span class="string">"/myApp/servlet/className"</span>);</span><br><span class="line"><span class="comment">//æˆ–è€…</span></span><br><span class="line">response.sendRedirect(<span class="string">"/myApp/servlet/className"</span>); </span><br><span class="line"><span class="comment">//é‡å®šå‘ä¹‹åçš„ä»£ç ä¼šç»§ç»­æ‰§è¡Œå†è·³è½¬ï¼Œå¯ä»¥åŠ ä¸ªreturn</span></span><br></pre></td></tr></table></figure></li></ul><blockquote><p>æ³¨æ„ç‚¹</p><ol><li><p><code>getOutputStream</code>å’Œ<code>getWriter</code>äº’ç›¸æ’æ–¥ï¼Œåªèƒ½ç”¨å…¶ä¸€</p></li><li><p>åº•å±‚åˆ†åˆ«å¯¹åº”<code>ServletOutputStream</code>å’Œ<code>PrintWriter</code></p></li><li>Servletç¨‹åºå‘ä¸¤ä¸ªè¾“å‡ºæµå¯¹è±¡å†™å…¥çš„æ•°æ®å°†è¢«Servletå¼•æ“ä»<code>response</code>é‡Œè·å–ï¼Œå†å°†è¿™äº›å½“å“åº”æ¶ˆæ¯æ­£æ–‡ï¼Œä¸è¡Œå’Œå¤´ç»„åˆè¾“å‡ºåˆ°å®¢æˆ·ç«¯</li><li>Servletçš„<code>service</code>æ–¹æ³•ç»“æŸåï¼Œå¼•æ“å°†æ£€æŸ¥è¾“å‡ºæµå¯¹è±¡æ˜¯å¦è°ƒç”¨è¿‡<code>close()</code>ï¼Œè‹¥æœªå…³é—­åˆ™ç”±å¼•æ“æ¥å…³é—­</li></ol></blockquote><ol><li>HttpServletRequest</li></ol><ul><li>è¯·æ±‚è¡Œ</li></ul><p><code>Get  http://localhost:8080/myApp/servlet/main?username=lp  http/1.1</code></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">String <span class="title">getMethod</span><span class="params">()</span></span>; <span class="comment">//è·å¾—è¯·æ±‚æ–¹å¼ GET</span></span><br><span class="line"><span class="function">String <span class="title">getRequestURL</span><span class="params">()</span></span>;<span class="comment">//è¿”å›å®¢æˆ·ç«¯å‘å‡ºè¯·æ±‚æ—¶çš„å®Œæ•´URLã€‚</span></span><br><span class="line"><span class="function">String <span class="title">getRequestURI</span><span class="params">()</span></span>; <span class="comment">//è¿”å›è¯·æ±‚è¡Œä¸­çš„èµ„æºåéƒ¨åˆ†ã€‚</span></span><br><span class="line"><span class="function">String <span class="title">getContextPath</span><span class="params">()</span></span>; <span class="comment">//å½“å‰åº”ç”¨çš„è™šæ‹Ÿç›®å½•    /my (é‡è¦)</span></span><br><span class="line"><span class="function">String <span class="title">getQueryString</span><span class="params">()</span> </span>; <span class="comment">//è¿”å›è¯·æ±‚è¡Œä¸­çš„å‚æ•°éƒ¨åˆ†   username=lp</span></span><br></pre></td></tr></table></figure><ul><li>è¯·æ±‚æ¶ˆæ¯å¤´</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">String <span class="title">getHeader</span><span class="params">(String name)</span>  <span class="comment">//æ ¹æ®å¤´åç§°å¾—åˆ°å¤´ä¿¡æ¯å€¼</span></span></span><br><span class="line"><span class="function">Enumeration <span class="title">getHeaderNames</span><span class="params">()</span>  <span class="comment">//å¾—åˆ°æ‰€æœ‰å¤´ä¿¡æ¯name</span></span></span><br><span class="line"><span class="function">Enumeration <span class="title">getHeaders</span><span class="params">(String name)</span><span class="comment">//æ ¹æ®å¤´åç§°å¾—åˆ°ç›¸åŒåç§°å¤´ä¿¡æ¯å€¼</span></span></span><br></pre></td></tr></table></figure><ul><li>è¯·æ±‚æ­£æ–‡</li></ul><blockquote><p>åˆ‡è®°ï¼šå‘Šè¯‰æœåŠ¡ç«¯è§£æè¯·æ±‚çš„ç¼–ç æ–¹å¼</p></blockquote><p><code>req.setCharacterEncoding(&quot;UTF-8&quot;);</code> </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;input type=<span class="string">"text"</span> name=<span class="string">"username"</span> /&gt;</span><br><span class="line"><span class="function">String <span class="title">getParameter</span><span class="params">(name)</span> <span class="comment">//æ ¹æ®è¡¨å•ä¸­nameå±æ€§çš„åï¼Œè·å–value</span></span></span><br><span class="line"><span class="function">String <span class="title">getParameterValues</span><span class="params">(String name)</span><span class="comment">//ä¸“ä¸šä¸ºå¤é€‰æ¡†å–å–æä¾›çš„æ–¹æ³•</span></span></span><br><span class="line"><span class="function">Enumeration <span class="title">getParameterNames</span><span class="params">()</span> <span class="comment">//å¾—åˆ°è¡¨å•æäº¤çš„æ‰€æœ‰nameçš„æ–¹æ³• </span></span></span><br><span class="line"><span class="function">Map&lt;String, String[]&gt; getParameterMap </span></span><br><span class="line"><span class="function"><span class="comment">//åˆ°è¡¨å•æäº¤çš„æ‰€æœ‰å€¼çš„æ–¹æ³•  (åšæ¡†æ¶ç”¨)éå¸¸å®ç”¨</span></span></span><br><span class="line"><span class="function">getInputStream  <span class="comment">//ä»¥å­—èŠ‚æµçš„æ–¹å¼å¾—åˆ°æ‰€æœ‰è¡¨å•æ•°æ®</span></span></span><br></pre></td></tr></table></figure><ul><li>è¯·æ±‚è½¬å‘</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">response.setContentType(<span class="string">"text/html;charset=UTF-8"</span>);</span><br><span class="line">req.setAttribute(<span class="string">"newKey"</span>, <span class="string">"newData"</span>);<span class="comment">//2æ¬¡åŒ…è£…ï¼Œè½¬å‘</span></span><br><span class="line">req.getAttribute(<span class="string">"newKey"</span>);<span class="comment">//å¿…é¡»setè¿‡çš„ï¼Œè¡¨å•æäº¤çš„æ— æ³•è·å–</span></span><br><span class="line">req.removeAttribute(<span class="string">"newKey"</span>);        </span><br><span class="line">req.getRequstDispatcher(<span class="string">"/servlet/new"</span>).foward(req, resp);</span><br><span class="line"><span class="comment">//è½¬å‘å¤„ç†å®Œä¼šå›æ¥ç»§ç»­æ‰§è¡ŒåŸservletæœªæ‰§è¡Œçš„è¯­å¥</span></span><br><span class="line">    <span class="comment">//è¯·æ±‚åŒ…å«</span></span><br><span class="line">req.getRequstDispatcher(<span class="string">"/servlet/new"</span>).include(req, resp);</span><br><span class="line"><span class="comment">//ä¸è½¬å‘çš„åŒºåˆ«</span></span><br><span class="line"><span class="number">1</span>.å¦‚æœAservletè¯·æ±‚BServleté‚£ä¹ˆAä¸­æœ€å¥½ä¸è¦åœ¨æ·»åŠ å“åº”ä½“ï¼Œå¦åˆ™å¯¼è‡´çš„ç»“æœå³æ˜¯ä¸¤ç§ï¼Œä½†æ˜¯æ·»åŠ å“åº”å¤´æ˜¯å¯ä»¥çš„ï¼ˆå°±æ˜¯â€œç•™å¤´ä¸ç•™ä½“â€ï¼‰</span><br><span class="line"><span class="number">1</span>ï¼‰æ•°æ®è¢«æ¸…ç©ºï¼Œä¸ä¼šå‘é€åˆ°å®¢æˆ·ç«¯ã€‚</span><br><span class="line"><span class="number">2</span>ï¼‰æ•°æ®å·²æäº¤ä½†æ˜¯åœ¨è½¬å‘æ—¶å‡ºç°å¼‚å¸¸ã€‚</span><br></pre></td></tr></table></figure><blockquote><p>è½¬å‘å’ŒåŒ…å«çš„åŒºåˆ«</p></blockquote><ul><li><p>è½¬å‘</p><p>å¦‚æœAservletè¯·æ±‚BServleté‚£ä¹ˆAä¸­æœ€å¥½ä¸è¦åœ¨æ·»åŠ å“åº”ä½“ï¼Œå¦åˆ™å¯¼è‡´çš„ç»“æœå³æ˜¯ä¸¤ç§ï¼Œä½†æ˜¯æ·»åŠ å“åº”å¤´æ˜¯å¯ä»¥çš„ï¼ˆå°±æ˜¯â€œ<strong>ç•™å¤´ä¸ç•™ä½“</strong>â€ï¼‰</p><ul><li>æ•°æ®è¢«æ¸…ç©ºï¼Œä¸ä¼šå‘é€åˆ°å®¢æˆ·ç«¯ã€‚</li><li>æ•°æ®å·²æäº¤ä½†æ˜¯åœ¨è½¬å‘æ—¶å‡ºç°å¼‚å¸¸ã€‚</li></ul></li><li><p>åŒ…å«</p><p><strong>ç•™å¤´åˆç•™ä½“</strong>ï¼Œç”±ä¸¤ä¸ªServletå…±åŒå®Œæˆå“åº”ã€‚</p></li></ul><blockquote><p>è½¬å‘å’Œé‡å®šå‘çš„åŒºåˆ«</p></blockquote><ul><li><p>è½¬å‘</p><ul><li>è½¬å‘request ç”±æœåŠ¡å™¨æ‰§è¡Œ</li><li>å®¢æˆ·ç«¯åªå‘é€ä¸€æ¬¡è¯·æ±‚</li><li>åœ°å€æ ä¸å˜</li><li>è½¬å‘èƒ½ä¼ é€’æ•°æ®</li><li>è½¬å‘ä¸å¯è·³è½¬å…¶ä»–åº”ç”¨ï¼Œåªèƒ½åœ¨æœ¬åº”ç”¨ä¸‹çš„èµ„æº</li><li>è½¬å‘ä¹Ÿæ˜¯ä¸€ä¸ªåŸŸå¯¹è±¡ï¼ˆå½“å‰åº”ç”¨ï¼Œå¤šä¸ªservletå…±äº«ï¼‰</li><li>è¦ä¹ˆæ˜¯Getè¦ä¹ˆæ˜¯Post</li></ul></li><li><p>é‡å®šå‘</p><ul><li>é‡å®šå‘response ç”±å®¢æˆ·ç«¯æ‰§è¡Œ</li><li>å®¢æˆ·ç«¯å‘é€2æ¬¡è¯·æ±‚</li><li>åœ°å€æ ä¼šå˜</li><li>ä¸èƒ½ä¼ é€’æ•°æ®</li><li>å¯è·³è½¬åˆ°å…¶ä»–åº”ç”¨</li><li>ä¸€å®šæ˜¯Get</li></ul></li></ul><h3 id="Cookie-amp-Session"><a href="#Cookie-amp-Session" class="headerlink" title="Cookie&amp;Session"></a>Cookie&amp;Session</h3><ol><li><p>Cookie</p><p>ç”±äºCookieæ•°æ®æ˜¯ç”±å®¢æˆ·ç«¯æ¥ä¿å­˜å’Œæºå¸¦çš„ï¼Œæ‰€ä»¥ç§°ä¹‹ä¸º<strong>å®¢æˆ·ç«¯æŠ€æœ¯</strong></p></li></ol><ul><li>å°æ¡ˆä¾‹ï¼šä¸Šæ¬¡è®¿é—®æ—¶é—´</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">req.setCharacterEncoding(<span class="string">"UTF-8"</span>);</span><br><span class="line">resp.setContentType(<span class="string">"text/html;charset=UTF-8"</span>);</span><br><span class="line">PrintWriter out = resp.getWriter();</span><br><span class="line"><span class="comment">//è·å–å½“å‰pathä¸‹çš„æ‰€æœ‰Cookie</span></span><br><span class="line">Cookie[] cookies = req.getCookies();</span><br><span class="line"><span class="keyword">if</span>(cookies != <span class="keyword">null</span>) &#123;</span><br><span class="line">    <span class="keyword">for</span> (Cookie ck : cookies) &#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="string">"lastTime"</span>.equals(ck.getName())) &#123;</span><br><span class="line">            out.print(<span class="string">"ä¸Šæ¬¡è®¿é—®æ—¶é—´ä¸ºï¼š"</span> + <span class="keyword">new</span>                   Date(Long.parseLong(ck.getValue())).toLocaleString());</span><br><span class="line">         &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//è®¾ç½®Cookie</span></span><br><span class="line">Cookie ck = <span class="keyword">new</span> Cookie(<span class="string">"lastTime"</span>, System.currentTimeMillis()+<span class="string">""</span>);</span><br><span class="line"><span class="comment">//æŒä¹…åŒ–5minå­˜åˆ°ç£ç›˜</span></span><br><span class="line">ck.setMaxAge(<span class="number">60</span>*<span class="number">5</span>); </span><br><span class="line">ck.setPath(<span class="string">"/myApp"</span>);</span><br><span class="line">ck.setPath(req.getContextPath())<span class="comment">//åŒä¸Šï¼Œå½“å‰Appä¸‹å…±äº«Cookie</span></span><br><span class="line">ck.setPath(<span class="string">"/"</span>) <span class="comment">//ç›´æ¥æŠŠæœåŠ¡å™¨ä¸Šçš„æ‰€æœ‰åº”ç”¨å…±äº«Cookie</span></span><br><span class="line">resp.addCookie(ck);</span><br></pre></td></tr></table></figure><ul><li><p>å±æ€§</p><ul><li><p>nameï¼šåç§°ä¸èƒ½å”¯ä¸€ç¡®å®šä¸€ä¸ªCookieã€‚å› ä¸ºè·¯å¾„å¯èƒ½ä¸åŒã€‚</p></li><li><p>valueï¼šèƒ½å­˜ä¸­æ–‡ã€‚æ³¨æ„è€ƒè™‘ç¼–ç çš„ä¸€è‡´æ€§</p></li><li><p>pathï¼šé»˜è®¤å€¼æ˜¯å†™Cookieçš„é‚£ä¸ªç¨‹åºçš„è®¿é—®è·¯å¾„</p><p><code>http://localhost:8080/myApp/servlet/ck1</code>å†™çš„Cookie</p><ul><li>pathå°±æ˜¯ï¼š<code>/myApp/servlet/</code></li><li>å®¢æˆ·ç«¯åœ¨è®¿é—®æœåŠ¡å™¨å¦å¤–èµ„æºæ—¶ï¼Œæ ¹æ®è®¿é—®çš„è·¯å¾„æ¥å†³å®šæ˜¯å¦å¸¦ç€Cookieåˆ°æœåŠ¡å™¨</li><li>å½“å‰è®¿é—®çš„è·¯å¾„å¦‚æœæ˜¯ä»¥Cookieçš„pathå¼€å¤´çš„è·¯å¾„ï¼Œæµè§ˆå™¨å°±å¸¦ã€‚å¦åˆ™ä¸å¸¦ã€‚ä¾‹å¦‚<code>/myApp/servlet/1path/2path</code>å¯è®¿é—®ï¼Œè€Œ<code>/myApp/</code>ä¸è¡Œï¼Œå¯ä»¥é€šè¿‡<code>setPath()</code>æ–¹å¼è§£å†³ã€‚</li></ul></li><li><p>maxAgeï¼šCookieçš„ç¼“å­˜æ—¶é—´ã€‚é»˜è®¤æ˜¯-1ï¼ˆé»˜è®¤å­˜åœ¨æµè§ˆå™¨çš„å†…å­˜ä¸­ï¼‰ã€‚å•ä½æ˜¯ç§’ã€‚</p><ul><li><p>è´Ÿæ•°ï¼šcookieçš„æ•°æ®å­˜åœ¨æµè§ˆå™¨ç¼“å­˜ä¸­</p></li><li><p>0ï¼šåˆ é™¤ã€‚è·¯å¾„è¦ä¿æŒä¸€è‡´ï¼Œå¦åˆ™å¯èƒ½åˆ é”™äººã€‚</p></li><li><p>æ­£æ•°ï¼šç¼“å­˜ï¼ˆæŒä¹…åŒ–åˆ°ç£ç›˜ä¸Šï¼‰çš„æ—¶é—´</p></li></ul></li></ul></li><li><p>ç›¸å…³ç»†èŠ‚</p><ul><li><p>ä¸€ä¸ªCookieåªèƒ½æ ‡è¯†ä¸€ç§ä¿¡æ¯</p></li><li><p>æµè§ˆå™¨ä¸€èˆ¬åªå…è®¸å­˜æ”¾300ä¸ªCookieï¼Œæ¯ä¸ªç«™ç‚¹æœ€å¤šå­˜æ”¾20ä¸ªï¼Œæ¯ä¸ªé™åˆ¶ä¸º4KB</p></li><li><p>å¦‚æœåˆ›å»ºäº†ä¸€ä¸ªCookieï¼Œå¹¶å°†å®ƒå‘é€åˆ°æµè§ˆå™¨</p><ul><li><p>é»˜è®¤æƒ…å†µä¸‹æ˜¯ä¸€ä¸ªä¼šè¯çº§åˆ«çš„ï¼ˆå³å­˜å‚¨åœ¨æµè§ˆå™¨å†…å­˜ä¸­ï¼‰ï¼Œç”¨æˆ·é€€å‡ºæµè§ˆå™¨åˆ™è¢«åˆ é™¤ã€‚</p></li><li><p>è‹¥å¸Œæœ›æŒä¹…åŒ–å­˜å‚¨åˆ°ç£ç›˜ï¼Œåˆ™éœ€è¦ä½¿ç”¨<code>maxAge</code>ã€‚</p></li></ul></li><li><p>åˆ é™¤Cookieæ—¶ï¼Œpathå¿…é¡»ä¸€è‡´ï¼Œå¦åˆ™æ— æ³•åˆ é™¤</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Cookie ck = <span class="keyword">new</span> Cookie(<span class="string">"lastTime"</span>, <span class="string">""</span>);</span><br><span class="line">ck.setPath(<span class="string">"/myApp"</span>);</span><br><span class="line">ck.setMaxAge(<span class="number">0</span>); </span><br><span class="line">resp.addCookie(ck);</span><br></pre></td></tr></table></figure></li></ul></li></ul><ol><li><p>Session</p><p>â€‹    æœåŠ¡å™¨ä¸ºæ¯ä¸ªç”¨æˆ·æµè§ˆå™¨åˆ›ä¸€ä¸ªSessionå¯¹è±¡ï¼Œ<strong>ä¸€ä¸ªæµè§ˆå™¨ç‹¬å ä¸€ä¸ªSession</strong>ã€‚å› æ­¤ï¼Œåœ¨éœ€è¦ä¿å­˜ç”¨æˆ·æ•°æ®æ—¶ï¼ŒæœåŠ¡å™¨ç¨‹åºå¯ä»¥æŠŠç”¨æˆ·æ•°æ®å†™åˆ°ç”¨æˆ·æµè§ˆå™¨ç‹¬å çš„Sessionã€‚å½“ç”¨æˆ·æµè§ˆå™¨è®¿é—®å½“å‰Appä¸‹å…¶ä»–ç¨‹åºï¼Œè·å–è¯¥Sessionã€‚</p></li></ol><ul><li><p>ç‰¹ç‚¹</p><ul><li>åŒä¸€ä¸ªä¼šè¯ä¸‹<strong>ï¼Œå¯ä»¥ä½¿ä¸€ä¸ªåº”ç”¨çš„</strong>å¤šä¸ªèµ„æºå…±äº«æ•°æ®</li><li>cookieå®¢æˆ·ç«¯æŠ€æœ¯ï¼Œåªèƒ½å­˜å­—ç¬¦ä¸²ã€‚HttpSessionæœåŠ¡å™¨ç«¯çš„æŠ€æœ¯ï¼Œå®ƒå¯ä»¥å­˜å¯¹è±¡ã€‚</li></ul></li><li><p>åŸç†</p><ul><li>æœåŠ¡å™¨è·å–åç§°ä¸º<code>JSESSIONID</code>çš„Cookieçš„å€¼ã€‚</li><li>è‹¥æ— è¯¥Cookieï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„HttpSessionå¯¹è±¡ï¼Œåˆ†é…ä¸€ä¸ªå”¯ä¸€çš„<code>SessionID</code>ï¼Œå¹¶ä¿å­˜åœ¨Bçš„cookieä¸­<code>JSESSIONID:1023</code>ã€‚</li><li>æœ‰è¿™æ ·çš„Cookieï¼Œè·å–cookieçš„å€¼ï¼ˆå³HttpSessionå¯¹è±¡çš„å€¼ï¼‰ï¼Œä»æœåŠ¡å™¨çš„å†…å­˜ä¸­æ ¹æ®IDæ‰¾é‚£ä¸ªHttpSessionå¯¹è±¡</li></ul></li><li><p>å¸¸ç”¨API</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">setAttribute</span><span class="params">(String name,Object value)</span></span>;</span><br><span class="line"><span class="function">Object <span class="title">getAttribute</span><span class="params">(String name)</span></span>;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">removeAttribute</span><span class="params">(String name)</span></span>;</span><br><span class="line">HttpSession.getId():</span><br><span class="line">setMaxInactiveInterval(<span class="keyword">int</span> interval)  è®¾ç½®sessionçš„å­˜æ´»æ—¶é—´</span><br><span class="line">invalidate() ä½¿æ­¤ä¼šè¯æ— æ•ˆ</span><br></pre></td></tr></table></figure></li><li><p>çŠ¶æ€</p><ul><li><p>åˆ›å»º</p></li><li><p>é”€æ¯</p><ul><li>å¼ºåˆ¶ï¼š<code>invalidate()</code></li><li><p>è¶…æ—¶ï¼š<code>setMaxInactiveInterval</code>ï¼ˆé»˜è®¤30minï¼‰</p></li><li><p>xmlä¸­è®¾ç½®</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">session-config</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- è®¾ç½®æœ‰æ•ˆæ—¶é—´min --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">session-timeout</span>&gt;</span>1<span class="tag">&lt;/<span class="name">session-timeout</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">session-config</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul></li><li><p>åºåˆ—åŒ–</p><p>â€‹    å½“å†…å­˜æº¢å‡ºï¼ŒæœåŠ¡å™¨é‡å¯ç­‰ï¼Œtomcatä¼šæŠŠHttpSessionæŒä¹…åŒ–åˆ°æœ¬åœ°ï¼Œè®°å¾—å¯¹åº”ç±»è¦å®ç°<code>serializable</code>æ¥å£ï¼ˆé’åŒ–-æç½®ï¼‰    </p><p>â€‹    ç­‰é‡å¯åï¼ˆæ´»åŒ–-æ¿€æ´»ï¼‰</p></li></ul></li></ul><blockquote><p>å½“ç¦ç”¨cookie</p></blockquote><ol><li><p><code>request.getSession();</code>å¿…é¡»å†™ã€‚</p></li><li><p><code>response.encodeURL(String url);</code></p><p>è¿”å›çš„urlï¼š <code>http://url;JSESSIONID=111</code></p></li></ol><h2 id="JSP"><a href="#JSP" class="headerlink" title="JSP"></a>JSP</h2><p>JSP<strong>æœ¬è´¨</strong>å°±æ˜¯Servletã€‚</p><h3 id="åŸç†"><a href="#åŸç†" class="headerlink" title="åŸç†"></a>åŸç†</h3><ol><li><p>æµè§ˆå™¨è®¿é—®jspé¡µé¢ï¼ŒæœåŠ¡å™¨æ˜¯å¦‚ä½•è°ƒç”¨æ‰§è¡Œjspé¡µé¢ï¼Ÿï¼ˆServletï¼‰</p><ul><li><p>tomcatå®šä½åˆ°<code>/myWebApp</code>é¡¹ç›®</p></li><li><p>æœåŠ¡å™¨æŠŠ<code>index.jsp</code>è½¬è¯‘æˆ<code>index_jsp.java</code>ï¼Œç»§è€Œç¼–è¯‘æˆ<code>.class</code>æ–‡ä»¶</p><p>ï¼ˆæ•…è€Œç¬¬äºŒæ¬¡è®¿é—®ä¼šå¿«å¾ˆå¤šï¼Œç”±äºå·²ç»ç¼–è¯‘å¥½ï¼‰</p></li></ul></li><li><p>webæœåŠ¡å™¨åœ¨æ‰§è¡Œjspé¡µé¢æ—¶ï¼Œå¦‚ä½•æŠŠé¡µé¢ä¸­htmlå‘é€ç»™å®¢æˆ·ç«¯ï¼Œä»¥åŠæ‰§è¡ŒJavaä»£ç ï¼Ÿ</p><ul><li>åœ¨è½¬è¯‘åçš„<code>.java</code>æ–‡ä»¶ï¼Œ<code>out.write(&quot;&lt;html&gt;\r\n&quot;)</code>ï¼Œå°±åƒåŸç”Ÿè¿”å›å­—ç¬¦ä¸²ä¸€æ ·è¿”å›ã€‚</li><li>javaä»£ç åŸæ ·æ‰§è¡Œ</li></ul></li></ol><h3 id="ç¼–å†™åŸåˆ™"><a href="#ç¼–å†™åŸåˆ™" class="headerlink" title="ç¼–å†™åŸåˆ™"></a>ç¼–å†™åŸåˆ™</h3><ul><li><p>Servletï¼šé‡ç‚¹ç¼–å†™javaä»£ç é€»è¾‘ ï¼ˆè·å–è¡¨å•æ•°æ®ã€å¤„ç†ä¸šåŠ¡é€»è¾‘ã€åˆ†å‘è½¬å‘ï¼‰</p></li><li><p>JSPï¼šä»£ç æ˜¾ç¤ºæ¨¡æ¿ã€‚é‡ç‚¹åœ¨äºæ˜¾ç¤ºæ•°æ®</p></li></ul><h3 id="åŸºæœ¬è¯­æ³•"><a href="#åŸºæœ¬è¯­æ³•" class="headerlink" title="åŸºæœ¬è¯­æ³•"></a>åŸºæœ¬è¯­æ³•</h3><ul><li><p>æ¨¡æ¿å…ƒç´ å³html</p></li><li><p>è„šæœ¬</p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;% code %&gt;</span><br><span class="line">&lt;%=<span class="number">2</span>+<span class="number">3</span>%&gt; ç­‰ä»·äº out.print(<span class="number">2</span>+<span class="number">3</span>)</span><br><span class="line">&lt;%! %&gt; è¡¨ç¤ºåœ¨ç±»ä¸­å®šä¹‰å…¨å±€æˆå‘˜ï¼Œå’Œé™æ€å—</span><br><span class="line"></span><br><span class="line">&lt;%-- è¢«æ³¨é‡Šå†…å®¹ --%&gt; å®‰å…¨ï¼Œçœæµé‡</span><br><span class="line">&lt;!--htmlæ³¨é‡Š --&gt;  ç”¨æˆ·çœ‹çš„åˆ°ä¸å®‰å…¨</span><br></pre></td></tr></table></figure></li><li><p>3æŒ‡ä»¤ (å‘Šè¯‰jspå¼•æ“å¦‚ä½•å¤„ç†jspé¡µé¢ä¸­å…¶ä½™éƒ¨åˆ†)</p><ul><li>page</li></ul><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">"java"</span>  pageEncoding=<span class="string">"UTF-8"</span>%&gt;</span><br></pre></td></tr></table></figure><ul><li><p>include</p><ul><li><p>é™æ€åŒ…å«</p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ include file=<span class="string">"/include/header.jsp"</span> %&gt;</span><br></pre></td></tr></table></figure></li><li><p>åŠ¨æ€åŒ…å«</p><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:include page="/include/header.jsp"&gt;&lt;/jsp:include&gt;</span><br></pre></td></tr></table></figure><blockquote><p>åŒºåˆ«ï¼šç¿»è¯‘çš„æ—¶é—´æ®µä¸åŒ</p></blockquote><p>å‰è€…ï¼šåœ¨ç¿»è¯‘æ—¶å°±æŠŠä¸¤ä¸ªæ–‡ä»¶åˆå¹¶</p><p>åè€…ï¼šä¸ä¼šåˆå¹¶æ–‡ä»¶ï¼Œå½“ä»£ç æ‰§è¡Œåˆ°includeæ—¶ï¼Œæ‰åŒ…å«å¦ä¸€ä¸ªæ–‡ä»¶çš„å†…å®¹ã€‚</p><p>åŸåˆ™ï¼šèƒ½ç”¨é™çš„å°±ä¸ç”¨åŠ¨çš„ã€‚</p></li></ul></li><li><p>tablib</p><p>ä½œç”¨ï¼šåœ¨JSPé¡µé¢ä¸­å¯¼å…¥JSTLæ ‡ç­¾åº“ã€‚æ›¿æ¢jspä¸­çš„javaä»£ç ç‰‡æ®µã€‚</p></li></ul><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ taglib uri=<span class="string">"http://java.sun.com/jsp/jstl/core"</span> prefix=<span class="string">"åˆ«å"</span> %&gt;</span><br></pre></td></tr></table></figure></li><li><p>6ä¸ªåŠ¨ä½œ</p><figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;jsp:include &gt; åŠ¨æ€åŒ…å«</span><br><span class="line">&lt;jsp:forward&gt; è¯·æ±‚è½¬å‘</span><br><span class="line">&lt;jsp:param&gt; è®¾ç½®è¯·æ±‚å‚æ•°</span><br><span class="line"></span><br><span class="line">&lt;jsp:useBean&gt; åˆ›å»ºä¸€ä¸ªå¯¹è±¡</span><br><span class="line">&lt;jsp:setProperty&gt; ç»™æŒ‡å®šçš„å¯¹è±¡å±æ€§èµ‹å€¼</span><br><span class="line">&lt;jsp:getProperty&gt; å–å‡ºæŒ‡å®šå¯¹è±¡çš„å±æ€§å€¼</span><br></pre></td></tr></table></figure></li><li><p>9å¤§å†…ç½®å¯¹è±¡</p><p> åœ¨&lt;%=%&gt; &lt;% %&gt;å†…éƒ¨ç›´æ¥ä½¿ç”¨çš„å¯¹è±¡</p></li></ul><div class="table-container"><table><thead><tr><th style="text-align:left">å¯¹è±¡å</th><th>ç±»å‹</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td style="text-align:left">request</td><td>javax.servlet.http.HttpServletRequest</td><td></td></tr><tr><td style="text-align:left">response</td><td>â€¦HttpServletResponse</td><td></td></tr><tr><td style="text-align:left">session</td><td>â€¦HttpSession</td><td>ç”±session=â€trueâ€å¼€å…³</td></tr><tr><td style="text-align:left">application</td><td>javax.servlet.ServletContext</td><td></td></tr><tr><td style="text-align:left">exception</td><td>java.lang.Throwable</td><td>ç”±isErrorPage=â€falseâ€å¼€å…³</td></tr><tr><td style="text-align:left">page</td><td>java.lang.Objectå½“å‰å¯¹è±¡this</td><td>å½“å‰servletå®ä¾‹</td></tr><tr><td style="text-align:left">config</td><td>javax.servlet.ServletConfig</td><td></td></tr><tr><td style="text-align:left">out</td><td>javax.servlet.jsp.JspWriter</td><td>printWriterå¯¹è±¡</td></tr><tr><td style="text-align:left">pageContext</td><td>javax.servlet.jsp.PageContext</td></tr></tbody></table></div><p>pageContext(é‡è¦)</p><ol><li><p>æœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ªåŸŸå¯¹è±¡ï¼šå®ƒå¯ä»¥æ“ä½œå…¶å®ƒä¸‰ä¸ªåŸŸå¯¹è±¡ï¼ˆrequest session applicationï¼‰çš„æ•°æ®</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">findAttribute(String name); </span><br><span class="line"><span class="comment">//è‡ªåŠ¨ä»page request session applicationä¾æ¬¡æŸ¥æ‰¾ï¼Œæ‰¾åˆ°äº†å°±å–å€¼ï¼Œç»“æŸæŸ¥æ‰¾ã€‚</span></span><br></pre></td></tr></table></figure></li></ol><ul><li><p><code>PageContext</code> :  å­˜æ”¾çš„æ•°æ®åœ¨å½“å‰é¡µé¢æœ‰æ•ˆã€‚å¼€å‘æ—¶ä½¿ç”¨è¾ƒå°‘ã€‚</p></li><li><p><code>ServletRequest</code>: å­˜æ”¾çš„æ•°æ®åœ¨ä¸€æ¬¡è¯·æ±‚ï¼ˆè½¬å‘ï¼‰å†…æœ‰æ•ˆã€‚ä½¿ç”¨éå¸¸å¤šã€‚</p></li><li><p><code>HttpSession</code>: å­˜æ”¾çš„æ•°æ®åœ¨ä¸€æ¬¡ä¼šè¯ä¸­æœ‰æ•ˆã€‚ä½¿ç”¨çš„æ¯”è¾ƒå¤šã€‚å¦‚ï¼šå­˜æ”¾ç”¨æˆ·çš„ç™»å½•ä¿¡æ¯ï¼Œè´­ç‰©è½¦åŠŸèƒ½ã€‚</p></li><li><p><code>ServletContext</code>: å­˜æ”¾çš„æ•°æ®åœ¨æ•´ä¸ªåº”ç”¨èŒƒå›´å†…éƒ½æœ‰æ•ˆã€‚å› ä¸ºèŒƒå›´å¤ªå¤§ï¼Œåº”å°½é‡å°‘ç”¨ã€‚</p></li></ul><ol><li><p>å®ƒå¯ä»¥åˆ›å»ºå…¶å®ƒçš„8ä¸ªéšå¼å¯¹è±¡</p><p>åœ¨æ™®é€šç±»ä¸­å¯ä»¥é€šè¿‡PageContextè·å–å…¶ä»–JSPéšå¼å¯¹è±¡ã€‚è‡ªå®šä¹‰æ ‡ç­¾æ—¶å°±ä½¿ç”¨ã€‚</p></li><li><p>æä¾›äº†çš„ç®€æ˜“æ–¹æ³•</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pageContext.forward(<span class="string">"2.jsp"</span>);</span><br><span class="line">pageContext.include(<span class="string">"2.jsp"</span>);</span><br></pre></td></tr></table></figure></li></ol><blockquote><p>é™„åŠ ï¼šç®€åŒ–javaä»£ç </p></blockquote><ul><li><p>ELè¡¨è¾¾å¼ï¼š</p><p>è¦ç®€åŒ–jspä¸­javaä»£ç å¼€å‘ã€‚å®ƒä¸æ˜¯ä¸€ç§å¼€å‘è¯­è¨€ï¼Œæ˜¯jspä¸­<strong>è·å–æ•°æ®</strong>çš„ä¸€ç§è§„èŒƒ</p></li><li><p>JSTLï¼šJSPæ ‡å‡†æ ‡ç­¾åº“</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> JavaWeb </category>
          
      </categories>
      
      
        <tags>
            
            <tag> XMLè¯­è¨€ </tag>
            
            <tag> Tomcat </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>shellç¼–ç¨‹</title>
      <link href="/2018/12/01/Linux/Shell/"/>
      <url>/2018/12/01/Linux/Shell/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote class="blockquote-center"><p>bashã€å˜é‡ã€shellç¼–ç¨‹</p></blockquote><p><img src="https://image-link.nos-eastchina1.126.net/shell"></p><a id="more"></a><h1 id="Shell"><a href="#Shell" class="headerlink" title="Shell"></a>Shell</h1><p>å‘½ä»¤è¡Œè§£é‡Šå™¨ï¼Œæä¾›ç»™userä¸€ä¸ªå‘Linuxå†…æ ¸å‘é€è¯·æ±‚ä»¥ä¾¿æ‰§è¡Œå¯¹åº”ä»»åŠ¡çš„å·¥å…·</p><ul><li><p>åˆ†ç±»</p><p>Bourne Shellï¼šshã€kshã€<strong>Bash</strong>ã€pshã€zsh</p><p>C Shellï¼ˆBSDç‰ˆçš„Unixä¸­ï¼‰ï¼šcshã€tcsh</p></li><li><p>æ‰§è¡Œ</p><ul><li><p>ç›´æ¥è¿è¡Œ</p><p>chmod  755  hello.sh</p><p>./hello.sh</p></li><li><p>Bashè°ƒç”¨æ‰§è¡Œ</p><p>bash  hello.sh </p></li></ul></li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash     (è‹¥è°ƒç”¨å…¶ä»–è¯­è¨€ï¼Œè¿™è¡Œä¸è¦çœç•¥)</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> æ³¨é‡Š</span></span><br><span class="line">echo -e "\e[1;31m text \e[0m"          </span><br><span class="line"><span class="meta">#</span><span class="bash">31m=çº¢è‰²     32m=ç»¿è‰²    33m=é»„è‰²</span></span><br></pre></td></tr></table></figure><h2 id="bashä¸­åŸºæœ¬åŠŸèƒ½"><a href="#bashä¸­åŸºæœ¬åŠŸèƒ½" class="headerlink" title="bashä¸­åŸºæœ¬åŠŸèƒ½"></a>bashä¸­åŸºæœ¬åŠŸèƒ½</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">1.åˆ«å</span></span><br><span class="line">alias ls='ls --color=auto' </span><br><span class="line"><span class="meta">#</span><span class="bash">è®¾å®šåˆ«åï¼Œä¸´æ—¶ç”Ÿæ•ˆ  </span></span><br><span class="line"><span class="meta">#</span><span class="bash">æ°¸ä¹…ï¼Œå†™å…¥ç¯å¢ƒå˜é‡é…ç½®æ–‡ä»¶ ~/.bashrc   å†souceé‡æ–°åŠ è½½é…ç½®æ–‡ä»¶ç”Ÿæ•ˆï¼Œä¸ç„¶è¦é‡å¯</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">2.å†å²</span></span><br><span class="line">history -c:æ¸…ç©ºå†å²å‘½ä»¤</span><br><span class="line">-w:æŠŠç¼“å­˜ä¸­å†å²å‘½ä»¤å†™å…¥~/.bash_history</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">3.è¾“å‡ºé‡å®šå‘</span></span><br><span class="line">å‘½ä»¤ &amp;&gt;æ–‡ä»¶  #è¦†ç›–æ–¹å¼å…¨éƒ½å†™åˆ°æ–‡ä»¶ä¸­</span><br><span class="line">å‘½ä»¤ &gt;&gt; æ–‡ä»¶1  2&gt;&gt;æ–‡ä»¶2 #æ­£ç¡®è¿½åŠ åˆ°æ–‡ä»¶1ï¼Œé”™è¯¯è¾“å‡ºè¿½åŠ åˆ°æ–‡ä»¶2</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">4.å¤šå‘½ä»¤æ‰§è¡Œ</span></span><br><span class="line">date ; å¤„ç† ; date #å¯ä»¥ç”¨æ¥çœ‹å¤„ç†æ—¶é—´  å¯ä»¥é…åˆ&amp;&amp; ||</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">5.é€šé…ç¬¦</span></span><br><span class="line">*  ?  [0-9]   [^0-9]</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">6.Bashä¸­å…¶ä»–ç‰¹æ®Šç¬¦å·</span></span><br><span class="line">'' #å•å¼•å·ä¸­æ‰€æœ‰ç‰¹æ®Šå­—ç¬¦éƒ½æ²¡ç‰¹æ®Šå«ä¹‰</span><br><span class="line">"" #åŒå¼•å·ä¸­ï¼Œ$è°ƒç”¨å˜é‡   `å¼•ç”¨å‘½ä»¤  \è½¬ä¹‰ç¬¦</span><br><span class="line"><span class="meta">$</span><span class="bash">() &lt;=&gt; `` ç­‰ä»·äºåå¼•å·æ‰§è¡Œç³»ç»Ÿå‘½ä»¤   $å–å˜é‡å€¼</span></span><br></pre></td></tr></table></figure><h2 id="Bashå˜é‡ä¸å˜é‡åˆ†ç±»"><a href="#Bashå˜é‡ä¸å˜é‡åˆ†ç±»" class="headerlink" title="Bashå˜é‡ä¸å˜é‡åˆ†ç±»"></a>Bashå˜é‡ä¸å˜é‡åˆ†ç±»</h2><p>bashä¸­å˜é‡å­˜çš„æ‰€æœ‰ç±»å‹ï¼ˆstring,number,dateç­‰ï¼‰éƒ½æ˜¯å­—ç¬¦ä¸²ç±»å‹</p><h3 id="ç”¨æˆ·è‡ªå®šä¹‰å˜é‡"><a href="#ç”¨æˆ·è‡ªå®šä¹‰å˜é‡" class="headerlink" title="ç”¨æˆ·è‡ªå®šä¹‰å˜é‡"></a>ç”¨æˆ·è‡ªå®šä¹‰å˜é‡</h3><ul><li>åªåœ¨å½“å‰shellæœ‰æ•ˆ</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">name="lai ping"   #  =ä¸èƒ½æœ‰ç©ºæ ¼ï¼Œå¦åˆ™å½“å‘½ä»¤è§£æé”™è¯¯</span><br><span class="line">name="$name"456   #  å˜é‡å åŠ   name=lai ping456</span><br><span class="line">set  #  æŸ¥è¯¢ç³»ç»Ÿä¸‹æ‰€æœ‰å˜é‡  -u  å¯ä»¥ç”¨æç¤ºï¼Œè°ƒç”¨æœªå®šä¹‰çš„å˜é‡ï¼Œé»˜è®¤æ— </span><br><span class="line">unset name      # åˆ é™¤å˜é‡</span><br></pre></td></tr></table></figure><h3 id="ç¯å¢ƒå˜é‡"><a href="#ç¯å¢ƒå˜é‡" class="headerlink" title="ç¯å¢ƒå˜é‡"></a>ç¯å¢ƒå˜é‡</h3><p>å…¨å±€å˜é‡</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">export x=1  #è®¾ç½®ç¯å¢ƒå˜é‡</span><br><span class="line">set #æŸ¥çœ‹æ‰€æœ‰å˜é‡(å½“å‰shellå±€éƒ¨å’Œå…¨å±€)</span><br><span class="line">env #æŸ¥çœ‹ç¯å¢ƒå˜é‡</span><br></pre></td></tr></table></figure><p>å¸¸ç”¨ç¯å¢ƒå˜é‡</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">SHELL:å½“å‰</span><br><span class="line">TERM:ç»ˆç«¯ç¯å¢ƒ</span><br><span class="line">PATH:PATHç¯å¢ƒå˜é‡  ç³»ç»ŸæŸ¥æ‰¾å‘½ä»¤çš„è·¯å¾„</span><br><span class="line"></span><br><span class="line">PATH="$PATH":/root/sh  #å¢åŠ PATHå˜é‡çš„å€¼</span><br></pre></td></tr></table></figure><h3 id="ä½ç½®å‚æ•°å˜é‡"><a href="#ä½ç½®å‚æ•°å˜é‡" class="headerlink" title="ä½ç½®å‚æ•°å˜é‡"></a>ä½ç½®å‚æ•°å˜é‡</h3><ul><li>$nï¼šnä¸ºæ•°å­—ï¼Œ0ä»£è¡¨å‘½ä»¤æœ¬èº«ï¼Œ1-9ä»£è¡¨ç¬¬1åˆ°9ä¸ªå‚æ•°ï¼Œ10ä»¥ä¸Šå‚æ•°éœ€è¦ {10}</li><li>$*ï¼šå‘½ä»¤è¡Œæ‰€æœ‰å‚æ•°ï¼ŒæŠŠæ‰€æœ‰å‚æ•°çœ‹åšä¸€ä¸ªæ•´ä½“</li><li>$@ï¼šæ‰€æœ‰å‚æ•°ï¼ŒæŠŠæ¯ä¸ªå‚æ•°åŒºåˆ†å¯¹å¾…ï¼Œforå¾ªç¯ä½“ç°åŒºåˆ«</li><li>$#ï¼šæ‰€æœ‰å‚æ•°ä¸ªæ•°</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line">num1=$1</span><br><span class="line">num2=$2</span><br><span class="line">sum=$(($num1+$num2))</span><br><span class="line">echo $sum</span><br><span class="line"></span><br><span class="line">./sum.sh 12 2434</span><br></pre></td></tr></table></figure><h3 id="é¢„å®šä¹‰å˜é‡"><a href="#é¢„å®šä¹‰å˜é‡" class="headerlink" title="é¢„å®šä¹‰å˜é‡"></a>é¢„å®šä¹‰å˜é‡</h3><ul><li>$?ï¼šæœ€åä¸€æ¬¡æ‰§è¡Œçš„å‘½ä»¤çš„è¿”å›çŠ¶æ€ã€‚è‹¥ä¸º0ï¼Œè¯æ˜ä¸Šä¸ªå‘½ä»¤æ­£ç¡®æ‰§è¡Œ</li><li>$$ï¼šå½“å‰è¿›ç¨‹çš„è¿›ç¨‹å·ï¼ˆPIDï¼‰</li><li>$!ï¼šåå°è¿è¡Œæœ€åä¸€ä¸ªè¿›ç¨‹çš„è¿›ç¨‹å·</li></ul><h2 id="è¿ç®—ç¬¦"><a href="#è¿ç®—ç¬¦" class="headerlink" title="è¿ç®—ç¬¦"></a>è¿ç®—ç¬¦</h2><p>declare [+/-] é€‰é¡¹  å˜é‡å   </p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">declare -i c  #å®šä¹‰cä¸ºæ•´å‹å˜é‡ </span><br><span class="line">declare -x MYPATH #ç­‰ä»·äº export MYPATH</span><br></pre></td></tr></table></figure><p>$((è¿ç®—å¼))</p><p>å˜é‡æµ‹è¯•åœ¨è„šæœ¬ä¼˜åŒ–æ—¶ç”¨</p><h2 id="ç¯å¢ƒå˜é‡é…ç½®æ–‡ä»¶"><a href="#ç¯å¢ƒå˜é‡é…ç½®æ–‡ä»¶" class="headerlink" title="ç¯å¢ƒå˜é‡é…ç½®æ–‡ä»¶"></a>ç¯å¢ƒå˜é‡é…ç½®æ–‡ä»¶</h2><ul><li><p>ç®€ä»‹</p><ul><li>ä¸»è¦æ˜¯å®šä¹‰å¯¹ç³»ç»Ÿçš„æ“ä½œç¯å¢ƒç”Ÿæ•ˆçš„ç³»ç»Ÿé»˜è®¤ç¯å¢ƒå˜é‡ï¼Œå¦‚PATHã€HISTSIZEã€PS1ã€HOSTNAMEç­‰é»˜è®¤ç¯å¢ƒå˜é‡ã€‚</li></ul></li><li><p>source é…ç½®æ–‡ä»¶ æˆ– . é…ç½®æ–‡ä»¶</p><ul><li>é…ç½®æ–‡ä»¶ç”Ÿæ•ˆï¼Œä¸ç”¨é‡å¯</li></ul></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">/etc/profile</span><br><span class="line">/etc/profile.d/*.sh</span><br><span class="line">~/.bash_profile</span><br><span class="line">~/.bashrc  </span><br><span class="line">/etc/bashrc</span><br></pre></td></tr></table></figure><ul><li>ç™»å½•è°ƒç”¨é¡ºåº</li></ul><p>/etc/profile â†’  ~/.bash_profile â†’  ~/.bashrc â†’  /etc/bashrc  â†’  å‘½ä»¤æç¤ºç¬¦</p><p>â€‹           â†“                                    (åŒºåˆ†no login å³åˆ‡æ¢å­shell)</p><p>/etc/profile.d/*.sh</p><p>â€‹           â†“</p><p>/etc/profile.d/lang.sh  â†’   /etc/sysc config/i18nï¼ˆè¯­è¨€ï¼‰</p><p>(åŒºåˆ†no loginå°±æ˜¯åˆ‡æ¢å­shell) </p><ul><li>å…¶ä»–é…ç½®æ–‡ä»¶<ul><li>~/.bash_logoutï¼š  æ³¨é”€ç”Ÿæ•ˆ</li><li>~/.bash_historyï¼š  å½“å‰çš„ä¼šåœ¨history,æ³¨é”€æ‰å†™å…¥</li><li>/etc/issueï¼š æœ¬åœ°ç»ˆç«¯ç™»å½•ä¿¡æ¯ issue.net è¿œç¨‹ç™»å½•</li></ul></li></ul><h2 id="Shell-ç¼–ç¨‹"><a href="#Shell-ç¼–ç¨‹" class="headerlink" title="Shell ç¼–ç¨‹"></a>Shell ç¼–ç¨‹</h2><h3 id="è¾“å‡ºé‡å®šå‘"><a href="#è¾“å‡ºé‡å®šå‘" class="headerlink" title="è¾“å‡ºé‡å®šå‘"></a>è¾“å‡ºé‡å®šå‘</h3><ul><li><p>æŠŠæœ¬æ¥è¾“å‡ºåˆ°å±å¹•åˆ°é‡å®šå‘åˆ°æ–‡ä»¶</p><ul><li>/dev/stdout  1 æ­£ç¡®  </li><li>/dev/stderr   2 é”™è¯¯</li></ul></li><li><p>ç”¨æ¥ç®¡ç†é”™è¯¯æ—¥å¿—</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">é”™è¯¯å‘½ä»¤  2&gt;&gt;err.log</span><br><span class="line"></span><br><span class="line">å‘½ä»¤ &gt;&gt; æ–‡ä»¶ 2&gt;1&amp; <span class="comment">#è¿½åŠ æ–¹å¼ï¼Œæ­£ç¡®é”™è¯¯éƒ½ä¿å­˜åˆ°æ–‡ä»¶</span></span><br><span class="line">å‘½ä»¤ &amp;&gt;&gt;æ–‡ä»¶   <span class="comment">#åŒä¸ŠåŠŸèƒ½</span></span><br><span class="line">    &amp;&gt;/dev/null <span class="comment">#ä¸¢å¼ƒ</span></span><br><span class="line">å‘½ä»¤ &gt;&gt;æ–‡ä»¶1 2&gt;&gt;æ–‡ä»¶2 <span class="comment">#æ­£ç¡®1 é”™è¯¯2</span></span><br></pre></td></tr></table></figure></li></ul><h3 id="æ­£åˆ™è¡¨è¾¾å¼"><a href="#æ­£åˆ™è¡¨è¾¾å¼" class="headerlink" title="æ­£åˆ™è¡¨è¾¾å¼"></a>æ­£åˆ™è¡¨è¾¾å¼</h3><ul><li><p>ä¸é€šé…ç¬¦åŒºåˆ«</p><ul><li>æ­£åˆ™æ˜¯æ–‡ä»¶ä¸­åŒ¹é…ç¬¦åˆæ¡ä»¶çš„<strong>å­—ç¬¦ä¸²</strong>ï¼ŒåŒ…å«åŒ¹é…ã€‚grepã€awkã€sedç­‰</li><li>é€šé…ç¬¦ï¼ˆ*, ?ï¼‰æ˜¯åŒ¹é…æ¡ä»¶çš„<strong>æ–‡ä»¶å</strong>ï¼Œå®Œå…¨åŒ¹é…ã€‚lsã€findã€cp</li></ul></li><li><p>å¸¸è§</p></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">*  å‰ä¸€ä¸ªå­—ç¬¦åŒ¹é…0æ¬¡æˆ–ä»»æ„å¤šæ¬¡  <span class="string">"a*"</span> åŒ¹é…æ‰€æœ‰ï¼Œæ— æ„ä¹‰</span><br><span class="line">.    åŒ¹é…ä»»æ„ä¸€ä¸ªå­—ç¬¦</span><br><span class="line">^åŒ¹é…è¡Œé¦–<span class="string">"^$"</span> ç©ºç™½è¡Œ</span><br><span class="line">$åŒ¹é…è¡Œå°¾</span><br><span class="line">[]ä¸€ä¸ªå­—ç¬¦</span><br><span class="line">[^]</span><br><span class="line">\è½¬ä¹‰ (ä¸€éƒ¨åˆ†å¿…é¡»è½¬ä¹‰æ‰èƒ½è¡¨ç¤ºã€ä¸€éƒ¨åˆ†è½¬ä¹‰åæœ‰ç‰¹æ®Šå«ä¹‰æˆ–åŠŸèƒ½)</span><br><span class="line">\+      1æ¬¡æˆ–å¤šæ¬¡</span><br><span class="line">\?é›¶æ¬¡æˆ–ä¸€æ¬¡</span><br><span class="line">\&#123;n\&#125;è¡¨ç¤ºå…¶å‰é¢å­—ç¬¦æ°å¥½næ¬¡</span><br><span class="line">\&#123;n,\&#125;</span><br><span class="line">\&#123;n,m\&#125;</span><br></pre></td></tr></table></figure><h3 id="å­—ç¬¦æˆªå–å‘½ä»¤"><a href="#å­—ç¬¦æˆªå–å‘½ä»¤" class="headerlink" title="å­—ç¬¦æˆªå–å‘½ä»¤"></a>å­—ç¬¦æˆªå–å‘½ä»¤</h3><ul><li>cut<ul><li>æå–ä¸€è¡Œä¸­æŸä¸ªå­—æ®µï¼Œä¸grepæ­é…ä½¿ç”¨</li></ul></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#æ ¼å¼</span></span><br><span class="line">cut -f(åˆ—å·) 1,3  -d(åˆ†éš”ç¬¦,é»˜è®¤æ˜¯tab) <span class="string">":"</span>    <span class="comment"># ç¬¬1åˆ—å†…å®¹:ç¬¬3åˆ—å†…å®¹</span></span><br><span class="line"><span class="comment">#æ¡ˆä¾‹ ï¼ˆæå–è‡ªæ·»åŠ ç”¨æˆ·åï¼‰</span></span><br><span class="line">cat /etc/passwd | grep /bin/bash | grep -v(å–å) root | cut -d <span class="string">":"</span> -f 1</span><br></pre></td></tr></table></figure><ul><li>printf ï¼ˆåœ¨awkä¸­ç”¨ï¼Œä¸€èˆ¬å°±ç”¨catã€echoï¼‰</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#å¾ˆåƒCè¯­è¨€</span></span><br><span class="line">%ns   <span class="comment">#nè¡¨ç¤ºè¾“å‡ºå‡ ä¸ªå­—ç¬¦</span></span><br><span class="line">%ni  <span class="comment">#nè¾“å‡ºå‡ ä¸ªæ•°å­—</span></span><br><span class="line">%m.nf <span class="comment">#mæ•´æ•°ä½æ•°ï¼Œnå°æ•°ä½æ•°</span></span><br></pre></td></tr></table></figure><ul><li><p>awk ï¼ˆæ¯”cutå¼ºå¤§å¤šã€å¤æ‚ï¼‰</p></li><li><p>sedï¼ˆé‡ç‚¹â˜…ï¼‰</p><ul><li>è½»é‡çº§æµç¼–è¾‘å™¨ã€‚å¯¹æ•°æ®è¿›è¡Œé€‰å–ã€æ›¿æ¢ã€åˆ é™¤ã€æ–°å¢çš„å‘½ä»¤</li><li>ç›¸æ¯”äºviï¼Œä¸å…‰å¯ä»¥ä¿®æ”¹æ–‡ä»¶å†…å®¹ï¼Œè¿˜å¯ä»¥ç›´æ¥ä¿®æ”¹å‘½ä»¤ç»“æœ</li></ul><p>æ ¼å¼ï¼š</p><p>â€‹    <code>sed [option] &#39;[action]&#39; æ–‡ä»¶å</code></p><ul><li>option:<ul><li>-n       ä¸€èˆ¬sedå‘½ä»¤è¾“å‡ºæ‰€æœ‰æ•°æ®ã€‚æ­¤å¤„ä¼šæŠŠç»è¿‡sedå¤„ç†çš„è¡Œè¾“å‡ºåˆ°å±å¹•</li><li>-e       å…è®¸å¯¹è¾“å…¥æ•°æ®åº”ç”¨å¤šæ¡sedç¼–è¾‘</li><li>-i        ç”¨sedçš„ä¿®æ”¹ç»“æœç›´æ¥ä¿®æ”¹è¯»å–æ•°æ®çš„æ–‡ä»¶ï¼Œè€Œä¸æ˜¯è¾“å‡ºåˆ°å±å¹•        </li></ul></li><li>action:<ul><li>a \       è¿½åŠ ï¼Œ åœ¨å½“å‰è¡Œåæ·»åŠ ä¸€è¡Œæˆ–å¤šè¡Œã€‚æ·»åŠ å¤šè¡Œï¼Œé™¤æœ€åä¸€è¡Œï¼Œæ¯è¡Œæœ«å°¾éœ€è¦ç”¨<code>&quot;\&quot;</code>ä»£è¡¨æ•°æ®æœªå®Œç»“ã€‚</li><li>c \     è¡Œæ›¿æ¢ï¼Œç”¨cåé¢çš„å­—ç¬¦ä¸²æ›¿æ¢åŸæ•°æ®è¡Œï¼Œæ›¿æ¢å¤šè¡Œæ—¶â€¦â€¦â€¦åŒä¸Š</li><li>i \     æ’å…¥ï¼Œåœ¨å½“æœŸè¡Œå‰æ’å…¥ä¸€è¡Œæˆ–å¤šè¡Œã€‚æ’å…¥å¤šè¡Œâ€¦â€¦â€¦åŒä¸Š</li><li>d     åˆ é™¤ï¼Œåˆ é™¤æŒ‡å®šè¡Œ</li><li>p    æ‰“å°ï¼Œè¾“å‡ºæŒ‡å®šçš„è¡Œ</li><li>s    å­—ä¸²æ›¿æ¢ï¼Œç”¨ä¸€ä¸ªå­—ç¬¦ä¸²æ›¿æ¢å¦ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚</li></ul></li></ul></li></ul><p>â€‹            æ ¼å¼ä¸º<code>&quot;è¡ŒèŒƒå›´s/æ—§å­—ä¸²/æ–°å­—ä¸²/g&quot;</code></p><p>â€‹          ï¼ˆ /gè¡¨ç¤ºä¸€è¡Œä¸­<strong>æ‰€æœ‰</strong>åŒ¹é…åˆ°çš„ï¼Œä¸åŠ åˆ™ä¸ºç¬¬ä¸€æ¬¡åŒ¹é…åˆ°çš„ï¼‰</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">sed -n <span class="string">'2p'</span> file  <span class="comment">#æ‰“å°è¾“å‡ºç¬¬2è¡Œ</span></span><br><span class="line">sed <span class="string">'2,4d'</span> file <span class="comment">#åˆ é™¤ç¬¬2åˆ°4è¡Œ   $è¡¨ç¤ºæœ€åè¡Œ</span></span><br><span class="line">sed <span class="string">'/2/d'</span> test.txt     <span class="comment">#sedä¸­æ­£åˆ™ç”¨/.../ä¸­é—´</span></span><br><span class="line">sed <span class="string">'2a hello'</span> file  <span class="comment">#åœ¨ç¬¬äºŒè¡Œåè¿½åŠ hello</span></span><br><span class="line">sed <span class="string">'2i hello\</span></span><br><span class="line"><span class="string">world'</span> file <span class="comment">#åœ¨ç¬¬äºŒè¡Œå‰æ’å…¥ä¸¤è¡Œæ•°æ®(hello\nworld)</span></span><br><span class="line">sed <span class="string">'2c no such p'</span> file</span><br><span class="line">sed -i <span class="string">'4s/99/55/g'</span> file     <span class="comment">#æŠŠç¬¬4è¡Œçš„99æ”¹ä¸º55</span></span><br><span class="line">sed -e <span class="string">'s/lp//g;s/fyd//g'</span> file <span class="comment">#åŒæ—¶å§"lp"å’Œ"fyd"æ›¿æ¢ä¸ºç©º</span></span><br></pre></td></tr></table></figure><h3 id="å­—ç¬¦å¤„ç†å‘½ä»¤"><a href="#å­—ç¬¦å¤„ç†å‘½ä»¤" class="headerlink" title="å­—ç¬¦å¤„ç†å‘½ä»¤"></a>å­—ç¬¦å¤„ç†å‘½ä»¤</h3><ul><li><p>æ’åºå‘½ä»¤sort</p><ul><li><p>-f  å¿½ç•¥å¤§å°å†™</p></li><li><p>-n  ä»¥æ•°å€¼å‹è¿›è¡Œæ’åºï¼Œé»˜è®¤ç”¨å­—ç¬¦ä¸²æ’åº</p></li><li><p>-r   åå‘æ’åº</p></li><li><p>-t    æŒ‡å®šåˆ†éš”ç¬¦ï¼Œé»˜è®¤æ˜¯åˆ¶è¡¨ç¬¦</p></li><li><p>-k n[,m] æŒ‰ç…§æ‰§è¡Œçš„å­—æ®µèŒƒå›´æ’åºã€‚ä»ç¬¬nå­—æ®µå¼€å§‹ï¼Œmå­—æ®µç»“æŸï¼ˆé»˜è®¤åˆ°è¡Œå°¾ï¼‰</p></li></ul></li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sort -n -t <span class="string">":"</span> -k 3,3 /etc/passwd <span class="comment">#ç”¨:åˆ†å‰²åç¬¬ä¸‰ä¸ªå­—æ®µæŒ‰æ•°å€¼å¤§å°æ’åº</span></span><br></pre></td></tr></table></figure><ul><li><p>ç»Ÿè®¡å‘½ä»¤wc</p><ul><li><p>-l   åªç»Ÿè®¡è¡Œæ•°</p></li><li><p>-w åªç»Ÿè®¡å•è¯æ•°</p></li><li><p>-m åªç»Ÿè®¡å­—ç¬¦æ•°</p></li></ul></li></ul><h3 id="æ¡ä»¶åˆ¤æ–­"><a href="#æ¡ä»¶åˆ¤æ–­" class="headerlink" title="æ¡ä»¶åˆ¤æ–­"></a>æ¡ä»¶åˆ¤æ–­</h3><ul><li>ç¬¦å·<code>[]</code></li></ul><ol><li>æŒ‰ç…§æ–‡ä»¶ç±»å‹è¿›è¡Œåˆ¤æ–­</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">-d  <span class="comment">#åˆ¤æ–­è¯¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼Œå¹¶ä¸”æ˜¯å¦ä¸ºç›®å½•</span></span><br><span class="line">-e  <span class="comment">#åˆ¤æ–­è¯¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨</span></span><br><span class="line">-f  <span class="comment">#åˆ¤æ–­è¯¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼Œå¹¶ä¸”æ˜¯å¦ä¸ºæ™®é€šæ–‡ä»¶</span></span><br><span class="line"><span class="built_in">test</span> -e file</span><br><span class="line">[ -e file ]   <span class="comment">#ä¸¤ç§æ–¹å¼ç­‰ä»·  echo $?åˆ¤æ–­</span></span><br><span class="line">[ -d file ] &amp;&amp; <span class="built_in">echo</span> <span class="string">'yes'</span> || <span class="built_in">echo</span> <span class="string">"no"</span>  <span class="comment">#ä¸ç”¨æ‰‹å·¥åˆ¤æ–­</span></span><br></pre></td></tr></table></figure><ol><li><p>åˆ¤æ–­æ–‡ä»¶æƒé™</p><ul><li>-r</li><li>-w</li><li>-x</li></ul></li><li><p>ä¸¤ä¸ªæ–‡ä»¶ä¹‹é—´è¿›è¡Œæ¯”è¾ƒ</p></li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">æ–‡ä»¶1 -nt æ–‡ä»¶2 <span class="comment">#åˆ¤æ–­æ–‡ä»¶1ä¿®æ”¹æ—¶é—´æ˜¯å¦æ¯”æ–‡ä»¶2æ–°</span></span><br><span class="line">-ot <span class="comment">#æ¯”è°æ—§</span></span><br><span class="line">-ef <span class="comment">#åˆ¤æ–­Inodeå·ä¸€è‡´ï¼Œä¸¤ä¸ªæ–‡ä»¶æ˜¯å¦ä¸ºåŒä¸€ä¸ªæ–‡ä»¶ã€‚ç”¨äºåˆ¤æ–­ç¡¬é“¾æ¥(Inodeå·ä¸€è‡´)</span></span><br></pre></td></tr></table></figure><ol><li>ä¸¤ä¸ªæ•´æ•°ä¹‹é—´æ¯”è¾ƒ</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">-eq=</span><br><span class="line">-ne!=</span><br><span class="line">-gt&gt;</span><br><span class="line">-lt&lt;</span><br><span class="line">-ge&gt;=</span><br><span class="line">-le   &lt;=</span><br></pre></td></tr></table></figure><ol><li>å­—ç¬¦ä¸²åˆ¤æ–­</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-z<span class="comment">#åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦ä¸ºç©º</span></span><br><span class="line">-n<span class="comment">#éç©º</span></span><br><span class="line">==</span><br><span class="line">!=</span><br></pre></td></tr></table></figure><ol><li>å¤šé‡æ¡ä»¶</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">åˆ¤æ–­1 -a åˆ¤æ–­2<span class="comment">#ä¸</span></span><br><span class="line">-o<span class="comment">#æˆ–</span></span><br><span class="line">!<span class="comment">#é</span></span><br></pre></td></tr></table></figure><h3 id="æµç¨‹æ§åˆ¶"><a href="#æµç¨‹æ§åˆ¶" class="headerlink" title="æµç¨‹æ§åˆ¶"></a>æµç¨‹æ§åˆ¶</h3><h4 id="if"><a href="#if" class="headerlink" title="if"></a>if</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> [ æ¡ä»¶åˆ¤æ–­ ];<span class="keyword">then</span></span><br><span class="line">code</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line">æˆ–è€…</span><br><span class="line"><span class="keyword">if</span> [ æ¡ä»¶åˆ¤æ–­ ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">code</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#åŒåˆ†æ”¯</span></span><br><span class="line"><span class="keyword">if</span> [ æ¡ä»¶åˆ¤æ–­ ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">success</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    fail</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="comment">#å¤šåˆ†æ”¯</span></span><br><span class="line"><span class="keyword">if</span> [ æ¡ä»¶1 ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line"><span class="keyword">elif</span> [ æ¡ä»¶2 ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure><ul><li><p>æ¡ˆä¾‹1 å¤‡ä»½</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line">date=$(date +\%y\%m\%d) <span class="comment">#ç™¾åˆ†å·å¿…é¡»è½¬ä¹‰ï¼Œä¸ç„¶åœ¨å®šæ—¶ä»»åŠ¡ä¸­ä¼šåˆ°å…¶å†…å®šå«ä¹‰</span></span><br><span class="line">size=$(du -sh éœ€è¦å¤‡ä»½çš„æ–‡ä»¶å¤¹)</span><br><span class="line"><span class="keyword">if</span> [ -d /tmp/backup ]</span><br><span class="line">  <span class="keyword">then</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"Date : <span class="variable">$date</span>!"</span> &gt; /tmp/backup/info.txt</span><br><span class="line"><span class="built_in">echo</span> <span class="string">"Data size: <span class="variable">$size</span>"</span> &gt;&gt; /tmp/backup/info.txt</span><br><span class="line"><span class="built_in">cd</span> /tmp/backup</span><br><span class="line">tar -zcf  backupDB_<span class="variable">$date</span>.tar.gz  /etc /tmp/backup/info.txt &amp;&gt;/dev/null</span><br><span class="line">rm -rf /tmp/backup/info.txt</span><br><span class="line">  <span class="keyword">else</span></span><br><span class="line">    mkdir /tmp/backup</span><br><span class="line">    åŒä¸Š</span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure></li><li><p>æ¡ˆä¾‹2 åˆ¤æ–­ç”¨æˆ·è¾“å…¥ </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">read</span> -p <span class="string">"please input a filename:"</span> -t 3 file <span class="comment">#3så†…è¾“å…¥</span></span><br><span class="line"><span class="keyword">if</span> [ -z <span class="string">"<span class="variable">$file</span>"</span> ] <span class="comment">#ç©º</span></span><br><span class="line"><span class="keyword">then</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"error, null"</span></span><br><span class="line"><span class="built_in">exit</span> 1</span><br><span class="line"><span class="keyword">elif</span> [ ! -e <span class="string">"<span class="variable">$file</span>"</span> ] <span class="comment">#æ˜¯å¦å­˜åœ¨</span></span><br><span class="line"><span class="keyword">then</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"file not exist"</span></span><br><span class="line"><span class="built_in">exit</span> 2</span><br><span class="line"><span class="keyword">elif</span> [ -d <span class="string">"<span class="variable">$file</span>"</span> ]</span><br><span class="line"><span class="keyword">then</span> </span><br><span class="line"><span class="built_in">echo</span> <span class="string">"file is a directory"</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure></li></ul><h4 id="case"><a href="#case" class="headerlink" title="case"></a>case</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">case</span> $å˜é‡å <span class="keyword">in</span></span><br><span class="line"><span class="string">"å€¼1"</span>)</span><br><span class="line">;;</span><br><span class="line"><span class="string">"å€¼2"</span>)</span><br><span class="line">;;</span><br><span class="line">*)</span><br><span class="line">;;</span><br><span class="line"><span class="keyword">esac</span></span><br></pre></td></tr></table></figure><h4 id="for"><a href="#for" class="headerlink" title="for"></a>for</h4><ul><li><p>æ ¼å¼1</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> å˜é‡å <span class="keyword">in</span> å€¼1 å€¼2 å€¼3...</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">$å˜é‡å</span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure><ul><li>æ¡ˆä¾‹ï¼šæ‰¹é‡è§£å‹ç¼©</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~/lp</span><br><span class="line">ls *.tar.gz &gt; ls.log</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> $(cat ls.log)</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">tar -zxf <span class="variable">$i</span> &amp;&gt;/dev/null</span><br><span class="line"><span class="keyword">done</span></span><br><span class="line">rm -rf ~/lp/ls.log</span><br></pre></td></tr></table></figure></li><li><p>æ ¼å¼2</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>((åˆå§‹;æ¡ä»¶;))</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line"><span class="comment">#todo:</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure></li></ul><h4 id="whileå’Œuntil"><a href="#whileå’Œuntil" class="headerlink" title="whileå’Œuntil"></a>whileå’Œuntil</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> [ æ¡ä»¶ ]</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line"><span class="comment">#todo:</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line">until [ æ¡ä»¶ ]  <span class="comment">#åˆ°æ¡ä»¶é€€å‡ºå¾ªç¯</span></span><br><span class="line"><span class="keyword">do</span></span><br><span class="line"><span class="comment">#todo:</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure><h3 id="å®šæ—¶ä»»åŠ¡"><a href="#å®šæ—¶ä»»åŠ¡" class="headerlink" title="å®šæ—¶ä»»åŠ¡"></a>å®šæ—¶ä»»åŠ¡</h3><h4 id="crontabè®¾ç½®"><a href="#crontabè®¾ç½®" class="headerlink" title="crontabè®¾ç½®"></a>crontabè®¾ç½®</h4><ul><li><p>å‰æï¼šcrondæœåŠ¡é»˜è®¤è‡ªå¯åŠ¨</p></li><li><p>ç”¨æ³•</p><ul><li>-e         ç¼–è¾‘å®šæ—¶ä»»åŠ¡</li><li>-l              æŸ¥è¯¢ä»»åŠ¡</li><li>-r              åˆ é™¤å½“å‰ç”¨æˆ·æ‰€æœ‰çš„ä»»åŠ¡</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">crontab -e</span><br><span class="line"><span class="comment">#è¿›å…¥vimç¼–è¾‘å·¥ä½œ</span></span><br><span class="line">* * * * * æ‰§è¡Œçš„ä»»åŠ¡</span><br><span class="line">ä¸€å°æ—¶å½“ä¸­ç¬¬å‡ åˆ†   0-59</span><br><span class="line">ä¸€å¤©ä¸­ç¬¬å‡ å°æ—¶   0-23</span><br><span class="line">ä¸€æœˆä¸­ç¬¬å‡ å¤©    1-31</span><br><span class="line">ä¸€å¹´ä¸­ç¬¬å‡ æœˆ1-12</span><br><span class="line">ä¸€å‘¨ä¸­æ˜ŸæœŸå‡ 0-7(0ã€7éƒ½ä»£è¡¨æ˜ŸæœŸæ—¥)</span><br><span class="line">* ä»»ä½•æ—¶é—´</span><br><span class="line">ï¼Œä¸è¿ç»­æ—¶é—´  0 8,12,16 * * * <span class="comment">#æ¯å¤©8ã€12ã€16æ—¶</span></span><br><span class="line">- è¿ç»­æ—¶é—´</span><br><span class="line">*/næ¯éš”å¤šä¹…</span><br></pre></td></tr></table></figure></li></ul><h3 id="å•æœºå¤‡ä»½"><a href="#å•æœºå¤‡ä»½" class="headerlink" title="å•æœºå¤‡ä»½"></a>å•æœºå¤‡ä»½</h3><ul><li><p>å‰æ</p><ul><li><code>yum -y install dump</code></li></ul></li><li><p>å¤‡ä»½ç›®å½•</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">dump -oj -f ~/myBakup.dump.bz2  å¾…å¤‡ä»½çš„ç›®å½•</span><br><span class="line"><span class="comment">#ç›®å½•åªèƒ½ç”¨0çº§åˆ«å®Œå…¨å¤‡ä»½</span></span><br><span class="line"></span><br><span class="line">cat /etc/dumpdatas <span class="comment">#æŸ¥çœ‹å¤‡ä»½æ—¶é—´æ–‡ä»¶</span></span><br></pre></td></tr></table></figure></li><li><p>æ¢å¤</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">restore -r -f ~/myBakup.dump.bz2  <span class="comment">#æ¢å¤åˆ°å½“å‰ç›®å½•</span></span><br></pre></td></tr></table></figure></li></ul>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> shell </tag>
            
        </tags>
      
    </entry>
    
    <entry>
      <title>Mood</title>
      <link href="/2018/11/26/mood/"/>
      <url>/2018/11/26/mood/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><blockquote class="blockquote-center"><p> å¸Œ æœ› ç§‹ æ‹› é¡º åˆ© å§ ~ ğŸ™ <br></p></blockquote>]]></content>
      
      
      
    </entry>
    
    <entry>
      <title>Git æ“ä½œå°ç»“</title>
      <link href="/2018/06/24/git%E6%93%8D%E4%BD%9C%E5%B0%8F%E7%BB%93/"/>
      <url>/2018/06/24/git%E6%93%8D%E4%BD%9C%E5%B0%8F%E7%BB%93/</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" class="aplayer-secondary-style-marker" href="/assets/css/APlayer.min.css"><script src="/assets/js/APlayer.min.js" class="aplayer-secondary-script-marker"></script><h2 id="gitæäº¤ä»£ç "><a href="#gitæäº¤ä»£ç " class="headerlink" title="gitæäº¤ä»£ç "></a>gitæäº¤ä»£ç </h2><ol><li>å¯ä»¥å…ˆpullçš„æƒ…å†µ</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#è¯¥æ–¹æ³•é€‚åˆè¿œç«¯ä»£ç å’Œä½ å½“å‰çš„(åŒ…æ‹¬æœªaddæˆ–è€…å·²addæœªcommit)è¿›è¡Œæ¯”è¾ƒ</span></span><br><span class="line">git pull  <span class="comment">#è‹¥æ— å†²çªï¼Œå¯ç›´æ¥merge</span></span><br><span class="line">git commit -a -m <span class="string">"message"</span></span><br><span class="line">git push</span><br></pre></td></tr></table></figure><ol><li>æ— æ³•å…ˆpullï¼ˆå³å­˜åœ¨å†²çªï¼‰æ–¹æ¡ˆä¸€ï¼šæ¨è</li></ol><a id="more"></a><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">git stash <span class="comment">#æŠŠå½“å‰çš„æ‰€æœ‰ä¿®æ”¹æš‚å­˜ä¸‹æ¥ï¼Œæ­¤æ—¶statusä¼šæ¢å¤åˆ°æœ€åˆå¹²å‡€çš„çŠ¶æ€</span></span><br><span class="line">git pull</span><br><span class="line"></span><br><span class="line">git stash pop <span class="comment">#æŠŠæš‚å­˜åŒºçš„ä¿®æ”¹æ¢å¤å‡ºæ¥ï¼Œå¹¶ä¸”å†²çªçš„åœ°æ–¹ä¼šæ ‡è®°å‡ºæ¥ï¼Œå¾…æ‰‹åŠ¨ä¿®æ”¹</span></span><br><span class="line">git stash apply stash@&#123;0&#125; <span class="comment">#ä¸Šé¢è¿™æ ·æ¢å¤è‹¥æ— å†²çªå’Œè‡ªåŠ¨åˆ é™¤stashè®°å½•ï¼Œè€Œè¿™ä¸ªä¸ä¼š</span></span><br><span class="line"></span><br><span class="line">git commit -a -m <span class="string">"message"</span></span><br><span class="line">git push</span><br></pre></td></tr></table></figure><p>é™„åŠ ï¼š</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">git stash list <span class="comment">#æŸ¥çœ‹æš‚å­˜çš„å†…å®¹åˆ—è¡¨(åŒ…å«åœ¨å“ªæ¡åˆ†æ”¯ä¸Šçš„æš‚å­˜)</span></span><br><span class="line"><span class="comment">#å¦‚æœä½¿ç”¨git stash pop ä¸åŠ åï¼Œåˆ™æ¢å¤æœ€è¿‘ä¸€æ¡è®°å½•ï¼Œå“ªæ€•æ˜¯mybranchä¸Šçš„å†…å®¹ä¹Ÿä¼šè¢«æ¢å¤åˆ°masterã€‚(è‹¥æ— å†²çªï¼Œä¼šå§listä¸­è®°å½•åˆ é™¤ï¼Œè‹¥å†²çªåˆ™éœ€å†²åŠ¨åˆ é™¤)</span></span><br><span class="line">git stash clear <span class="comment">#æ¸…ç©ºæ‰€æœ‰å†…å®¹</span></span><br><span class="line">git stash drop stash@&#123;0&#125;<span class="comment">#åˆ é™¤ç¬¬ä¸€ä¸ªé˜Ÿåˆ—ï¼Œä¸åŠ é»˜è®¤åˆ é™¤ç¼–å·ä¸º0</span></span><br></pre></td></tr></table></figure><ol><li>æ— æ³•å…ˆpullï¼ˆå³å­˜åœ¨å†²çªï¼‰æ–¹æ¡ˆäºŒï¼ˆç¼ºç‚¹ï¼šéœ€è¦æäº¤2æ¬¡ï¼Œæœ‰æ—¶å¹¶ä¸æƒ³æäº¤ï¼‰</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">git commit -a -m <span class="string">"messgae1"</span></span><br><span class="line">git pull <span class="comment">#æ­¤æ—¶å†²çªå¤„ä¼šæ ‡è®°å‡ºæ¥ï¼Œæ‰‹åŠ¨è§£å†³å†²çª</span></span><br><span class="line">git commit -a -m <span class="string">"messgae2"</span></span><br><span class="line">git push</span><br></pre></td></tr></table></figure><h2 id="gitåˆ†æ”¯"><a href="#gitåˆ†æ”¯" class="headerlink" title="gitåˆ†æ”¯"></a>gitåˆ†æ”¯</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git branch --all <span class="comment">#æŸ¥çœ‹æ‰€æœ‰åˆ†æ”¯æƒ…å†µï¼ŒåŒ…æ‹¬æœ¬åœ°å’Œè¿œç«¯</span></span><br></pre></td></tr></table></figure><p>æ— è®ºåœ¨ä¸»åˆ†æ”¯ï¼Œæˆ–è€…å…¶ä»–åˆ†æ”¯ä¸Šä¿®æ”¹äº†ä¸œè¥¿ï¼Œä½†æ˜¯æœªcommitï¼Œåˆ‡æ¢åˆ†æ”¯æ—¶ï¼Œä¼š<strong>ä»ç„¶å­˜åœ¨</strong>ã€‚</p><p>å› æ­¤ï¼Œåœ¨åˆ‡æ¢åˆ†æ”¯çš„æ—¶å€™ï¼Œæœ€å¥½commitå†åˆ‡æ¢ï¼Œæˆ–è€…git stashä¸‹æ¥ã€‚</p><h3 id="åˆ†æ”¯æ–°å»ºä¸åˆå¹¶"><a href="#åˆ†æ”¯æ–°å»ºä¸åˆå¹¶" class="headerlink" title="åˆ†æ”¯æ–°å»ºä¸åˆå¹¶"></a>åˆ†æ”¯æ–°å»ºä¸åˆå¹¶</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#1.æ–°å»ºåˆ†æ”¯å¹¶åˆ‡æ¢åˆ°è¯¥åˆ†æ”¯ä¸Š</span></span><br><span class="line">git checkout -b åˆ†æ”¯å </span><br><span class="line"><span class="comment">#ç­‰ä»·äºä¸‹é¢ä¸¤æ¡å‘½ä»¤</span></span><br><span class="line">git branch åˆ†æ”¯å</span><br><span class="line">git checkout åˆ†æ”¯å</span><br><span class="line"></span><br><span class="line"><span class="comment">#2.åˆå¹¶</span></span><br><span class="line">git checkout master</span><br><span class="line">git merge åˆ†æ”¯å <span class="comment">#fast-forward æ— éœ€è§£å†³å†²çª</span></span><br><span class="line">                <span class="comment">#å¦‚æœå½“å‰masterå’Œåˆ†æ”¯çš„èµ·ç‚¹ä¸æ˜¯åŒä¸ªç‚¹ï¼Œå¯èƒ½ä¼šæœ‰çŸ›ç›¾éœ€è§£å†³</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#3.åˆ é™¤æ— ç”¨çš„åˆ†æ”¯</span></span><br><span class="line">git branch -d åˆ†æ”¯å <span class="comment">#(-D å¼ºåˆ¶åˆ é™¤ï¼Œ-dæ— æ³•åˆ é™¤æœªmergeçš„åˆ†æ”¯)</span></span><br></pre></td></tr></table></figure><h3 id="è¿œç¨‹åˆ†æ”¯"><a href="#è¿œç¨‹åˆ†æ”¯" class="headerlink" title="è¿œç¨‹åˆ†æ”¯"></a>è¿œç¨‹åˆ†æ”¯</h3><ol><li>åˆ†æ”¯ç”±æœ¬åœ°æ–°å»ºå¹¶æ¨é€ç»™è¿œç¨‹</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">git checkout master</span><br><span class="line">git push</span><br><span class="line">git pull <span class="comment">#å¯ç¼ºçœåé¢çš„ä»“åº“å &lt;è¿œç¨‹åº“å&gt; &lt;è¿œç¨‹åˆ†æ”¯å&gt;:&lt;æœ¬åœ°åˆ†æ”¯å&gt;  </span></span><br><span class="line">                        <span class="comment"># git pushæ˜¯  &lt;æœ¬åœ°åˆ†æ”¯&gt;:&lt;è¿œç¨‹åˆ†æ”¯&gt;  </span></span><br><span class="line"></span><br><span class="line">git checkout mybranch1</span><br><span class="line">git push origin mybranch1</span><br><span class="line">git pull origin mybranch1  <span class="comment">#åé¢ä»“åº“åã€åˆ†æ”¯åä¸å¯ç¼ºçœ</span></span><br></pre></td></tr></table></figure><blockquote><p>git pullå’Œpushåé¢æœ‰äº›å¯ä»¥çœç•¥ï¼Œéœ€è¦<strong>é…ç½®</strong>push.defaulté»˜è®¤è¡Œä¸º</p><p>*<strong>å»ºè®®</strong>åˆ†æ”¯æ“ä½œçš„æ—¶å€™ï¼Œæ¯æ¬¡pullå’ŒpushåŠ ä¸Šä»“åº“å<origin> &lt;åˆ†æ”¯å&gt;(æœ¬åœ°å’Œè¿œç¨‹åˆ†æ”¯åç›¸åŒ)</origin></p></blockquote><ol><li>åˆ†æ”¯ç”±è¿œç¨‹æ–°å»ºå¥½æœ¬åœ°è·Ÿè¸ª</li></ol><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git checkout -t(--track) origin/mybranch1 <span class="comment">#å…‹éš†è¿œç«¯åˆ†æ”¯å¹¶åˆ›å»ºåˆ°æœ¬åœ°ï¼Œåä¸è¿œç«¯åŒ</span></span><br></pre></td></tr></table></figure><p><strong>åˆå¹¶åˆ†æ”¯ä¸å‰é¢ç›¸åŒï¼Œgit merge</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git checkout master</span><br><span class="line">git merge mybranch1</span><br><span class="line">git push &lt;origin&gt; &lt;master&gt;</span><br></pre></td></tr></table></figure><p>æœ€ååˆ é™¤æ— ç”¨çš„åˆ†æ”¯</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#åˆ é™¤è¿œç¨‹åˆ†æ”¯</span></span><br><span class="line">git push origin --delete(-d) mybranch1</span><br><span class="line"></span><br><span class="line"><span class="comment">#åˆ é™¤æœ¬åœ°åˆ†æ”¯</span></span><br><span class="line">git branch -d mybranch1 <span class="comment">#-Då¼ºåˆ¶åˆ é™¤</span></span><br></pre></td></tr></table></figure><h3 id="åˆ é™¤è¿œç¨‹åˆ†æ”¯åæœ¬åœ°æœªåŒæ­¥"><a href="#åˆ é™¤è¿œç¨‹åˆ†æ”¯åæœ¬åœ°æœªåŒæ­¥" class="headerlink" title="åˆ é™¤è¿œç¨‹åˆ†æ”¯åæœ¬åœ°æœªåŒæ­¥"></a>åˆ é™¤è¿œç¨‹åˆ†æ”¯åæœ¬åœ°æœªåŒæ­¥</h3><ul><li>æ–¹æ³•1</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git fetch -p å‘½ä»¤</span><br><span class="line"><span class="comment">#å‘½ä»¤è¡Œè§£é‡Š--prune -p  åˆ é™¤ä¸å­˜åœ¨çš„è¿œç¨‹è·Ÿè¸ªåˆ†æ”¯</span></span><br></pre></td></tr></table></figure><ul><li>æ–¹æ³•2</li></ul><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git remote show origin <span class="comment">#æŸ¥çœ‹è¿œç¨‹åˆ†æ”¯ï¼Œè¿˜æœ‰æœ¬åœ°åˆ†æ”¯ä¸ä¹‹ç›¸å¯¹åº”å…³ç³»ç­‰ä¿¡æ¯ã€‚</span></span><br><span class="line">git remote prune origin <span class="comment">#å¯ä»¥åˆ é™¤è¿œç¨‹å·²ç»ä¸å­˜åœ¨çš„åˆ†æ”¯</span></span><br></pre></td></tr></table></figure><h2 id="ç‰ˆæœ¬å›é€€"><a href="#ç‰ˆæœ¬å›é€€" class="headerlink" title="ç‰ˆæœ¬å›é€€"></a>ç‰ˆæœ¬å›é€€</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git reset --hard HEAD^</span><br><span class="line">git reset --hard commit_id</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> git </category>
          
      </categories>
      
      
        <tags>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
  
  
</search>
